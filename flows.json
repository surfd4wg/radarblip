[
    {
        "id": "b11a3e12.64964",
        "type": "tab",
        "label": "INFO",
        "disabled": false,
        "info": "This tab provides functional information and reminders about in project events.  This tab should have no functional flows pertaining to the overall project, but only as a documentive source.\n\nAll inner development notation should be removed prior to product release to public."
    },
    {
        "id": "6432b979.125f98",
        "type": "tab",
        "label": "Auto Flows Backup and Email",
        "disabled": false,
        "info": "This grabs a copy of the local flows.json file,\nlocated in the user node-red directory:\n\n/home/ubuntu/.node-red/flows_xxxxxxx.json\n\nwhich is the file of all flows on this server,\n\nyou may need to manually set the file name and \nlocation of your flows file,\n\nwill attach the flows file into an automated email and send.  You just need to click on the injection node to trigger the backup and email process.\n\n\n\nNote, adjusted the settings.js file so the flow file is always flow.json.\n"
    },
    {
        "id": "d04ea5a4.8bc1e8",
        "type": "tab",
        "label": "MAIN",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e521bf7.1bc084",
        "type": "tab",
        "label": "HTTP Endpoints",
        "disabled": false,
        "info": ""
    },
    {
        "id": "dbfc8b70.04c788",
        "type": "tab",
        "label": "Payment Webhook",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e5b2e67a.fda9d8",
        "type": "tab",
        "label": "RSS Feed Farm",
        "disabled": true,
        "info": ""
    },
    {
        "id": "aa217fe3.6dd8e",
        "type": "subflow",
        "name": "Storage Sub-Flow",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 180,
                "wires": [
                    {
                        "id": "f0664db0.e3779"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "744b7dea.ce4b94",
        "type": "subflow",
        "name": "LinkStripper",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 240,
                "y": 200,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 680,
                "y": 200,
                "wires": []
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "35be5ce0.5455b4",
        "type": "subflow",
        "name": "Filter 2.0",
        "info": "",
        "category": "",
        "in": [],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "b8230b41.807868",
        "type": "ui_tab",
        "z": "",
        "name": "Home",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "bd40d9b2.f7c888",
        "type": "ui_group",
        "z": "",
        "name": "Default",
        "tab": "b8230b41.807868",
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "a3cb5458.4c20e8",
        "type": "twilio-api",
        "z": "",
        "name": "",
        "sid": "AC21e0f2d408c2d0666cd724b101f393a2",
        "from": "9014668846"
    },
    {
        "id": "c6c59400.222f8",
        "type": "twilio-api",
        "z": "",
        "name": "Twilio Outty",
        "sid": "AC13e0c5e580eccb9afd3cdf2ffc0d724e",
        "from": "6023130070"
    },
    {
        "id": "80891b4.dc84fe8",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#0094CE",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#0094CE",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#1bbfff",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#0094ce",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "a052fbfc.b371f8",
        "type": "sqlitedb",
        "z": "",
        "db": "/feeds/sqlite",
        "mode": "RWC"
    },
    {
        "id": "a482b27d.05186",
        "type": "mongodb3",
        "z": "",
        "uri": "mongodb://localhost:27017",
        "name": "",
        "options": "",
        "parallelism": "-1"
    },
    {
        "id": "8f55ecde.6f0a8",
        "type": "mongodb",
        "z": "",
        "hostname": "127.0.0.1",
        "port": "27017",
        "db": "carproj_db",
        "name": ""
    },
    {
        "id": "95df2d03.4714a",
        "type": "websocket-listener",
        "z": "",
        "path": "/ws/stripe",
        "wholemsg": "true"
    },
    {
        "id": "d7fbbc8b.32c8b",
        "type": "inject",
        "z": "6432b979.125f98",
        "name": "<---- CLICK TO BACKUP ALL FLOWS",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 210,
        "y": 100,
        "wires": [
            [
                "a5f1082c.cab708"
            ]
        ]
    },
    {
        "id": "a5f1082c.cab708",
        "type": "file in",
        "z": "6432b979.125f98",
        "name": "",
        "filename": "/home/ubuntu/.node-red/flows.json",
        "format": "",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 198,
        "y": 136,
        "wires": [
            [
                "41027947.716df8"
            ]
        ]
    },
    {
        "id": "41027947.716df8",
        "type": "function",
        "z": "6432b979.125f98",
        "name": "Email Subject (For Email Filter Sorting)",
        "func": "msg.topic=\"Node-red Auto-Flow-Backup *CARPROJ* \" + Date().toLocaleString().replace(' (Coordinated Universal Time)','');\nmsg.filename = \"/home/ubuntu/.node-red/flows_ip-172-31-33-105.json\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 291,
        "y": 181,
        "wires": [
            [
                "8a2f4464.7d9a08",
                "47aa386b.f9c188"
            ]
        ]
    },
    {
        "id": "47aa386b.f9c188",
        "type": "e-mail",
        "z": "6432b979.125f98",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "g2foob@gmail.com",
        "dname": "",
        "x": 590,
        "y": 180,
        "wires": []
    },
    {
        "id": "5ffe0752.614d68",
        "type": "comment",
        "z": "6432b979.125f98",
        "name": "This flow backs up all flows on this node-red instance via e-mailing the flows file.",
        "info": "",
        "x": 323,
        "y": 68,
        "wires": []
    },
    {
        "id": "13f069dd.c8ed86",
        "type": "comment",
        "z": "b11a3e12.64964",
        "name": "Double Click Tab to See: INFO",
        "info": "This tab provides functional information and reminders about in project events.  This tab should have no functional flows pertaining to the overall project, but only as a documentive source.\n\nAll inner development notation should be removed prior to product release to public.",
        "x": 160,
        "y": 40,
        "wires": []
    },
    {
        "id": "1c65a20b.eca82e",
        "type": "comment",
        "z": "b11a3e12.64964",
        "name": "REMINDERS AND TODO's",
        "info": "",
        "x": 150,
        "y": 120,
        "wires": []
    },
    {
        "id": "c9c2fa96.7c8378",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "SMS",
        "func": "\n    flow.set('smsOnOff', msg.payload);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 370,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "c6fed23e.16a51",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "SMS ON",
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 196.00000762939453,
        "y": 216.71428728103638,
        "wires": [
            [
                "c9c2fa96.7c8378"
            ]
        ]
    },
    {
        "id": "4d6a0685.5ee8f8",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "SMS OFF",
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 197,
        "y": 248,
        "wires": [
            [
                "c9c2fa96.7c8378"
            ]
        ]
    },
    {
        "id": "f0664db0.e3779",
        "type": "function",
        "z": "aa217fe3.6dd8e",
        "name": "to Storage &|| Push Destination",
        "func": "msg.payload = msg.article;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 210,
        "y": 180,
        "wires": [
            [
                "c2331801.a5bb98"
            ]
        ]
    },
    {
        "id": "a67a1c96.f4cb3",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "EMAIL",
        "func": "\n   flow.set('emailOnOff', msg.payload);\n   // flow.set('emailOnOff', 'on');\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 370,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "920cd852.bc2bf8",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "Email ON",
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 200.7856674194336,
        "y": 288.428569316864,
        "wires": [
            [
                "a67a1c96.f4cb3"
            ]
        ]
    },
    {
        "id": "dadf4ddd.7846b",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "Email OFF",
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 201.78567504882812,
        "y": 319.71428537368774,
        "wires": [
            [
                "a67a1c96.f4cb3"
            ]
        ]
    },
    {
        "id": "c448e319.725cb",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Flow Settings / Set these defaults",
        "func": "//default settings\n\n//This is how you set flow scope variables:\nflow.set('emailOnOff', 'on'); //Send Email?\nflow.set('smsOnOff', 'off');  //Send SMS? Defaults OFF\nflow.set('outboundPhone', '9014668846'); //Twilio Phone Number\nflow.set('recipientPhone', '4087170357'); //Recipient Phone Number\n//flow.set('recipientPhone', '7024663310'); //Recipient Phone Number\nflow.set('tech-contact-phone','7024663310');\n\nflow.set('recipientEmail', 'g2foob@gmail.com');\n\n// this is how you get them back: \n\n// var newVar = flow.get('emailOnOff');\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 400,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "c32c93bb.b3377",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "init",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "x": 179.99999891008656,
        "y": 120.0000008174352,
        "wires": [
            [
                "c448e319.725cb"
            ]
        ]
    },
    {
        "id": "dc8e49b7.f7e6d8",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "startup actions:",
        "info": "",
        "x": 200,
        "y": 80,
        "wires": []
    },
    {
        "id": "cb4ac319.0c655",
        "type": "file",
        "z": "aa217fe3.6dd8e",
        "name": "",
        "filename": "/home/ubuntu/feeds/current.feed",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1100,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "98bcbe5e.e9ea3",
        "type": "comment",
        "z": "aa217fe3.6dd8e",
        "name": "Make Persistant / Storage",
        "info": "",
        "x": 190,
        "y": 140,
        "wires": []
    },
    {
        "id": "c2331801.a5bb98",
        "type": "function",
        "z": "aa217fe3.6dd8e",
        "name": "format html line",
        "func": "msg.tofile = `\\n\n    <div class=\"entry col-12 animated fadeIn\" style=\"margin:5px;\">\\n\n        <details>\\n\n            <summary>\\n\n                <div class=\"activity\">Activity: `+ msg.subject + ` </div>\\n\n                <div class=\"title\">Title:  <a href=` + msg.shorturl + ` target=\"_blank\"> ` + msg.article.title + `</a></div>\\n\n                <div class=\"pubdate\"> Date Published: ` + msg.article.pubdate + `</div>\\n\n                <div class=\"summary\">Summary: ` + msg.article.summary + `</div>\\n\n            </summary>\\n\n            <div class=\"desciption\"> Description: ` + msg.article.description + `</div>\\n\n            <div class=\"author\"> Author: ` + msg.article.author +`</div>\\n\n        </details>\\n\n    </div>\\n\n`\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 180,
        "wires": [
            [
                "6ab55c9c.66be74"
            ]
        ]
    },
    {
        "id": "a85b9942.b370d8",
        "type": "debug",
        "z": 0,
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1210,
        "y": 860,
        "wires": []
    },
    {
        "id": "df6fbe54.437fa",
        "type": "http request",
        "z": 0,
        "name": "Get RSS Feed",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "https://www.google.com/alerts/feeds/17754263364051502122/2754496621275726113",
        "tls": "",
        "proxy": "",
        "authType": "",
        "x": 200,
        "y": 219.9999999999999,
        "wires": [
            [
                "9d66131b.d17ac"
            ]
        ]
    },
    {
        "id": "7cf45418.039cfc",
        "type": "html",
        "z": 0,
        "name": "Parse entry",
        "property": "payload",
        "outproperty": "payload",
        "tag": "feed entry",
        "ret": "html",
        "as": "multi",
        "x": 650,
        "y": 460,
        "wires": [
            [
                "8de2ea5d.64c0a8"
            ]
        ]
    },
    {
        "id": "8de2ea5d.64c0a8",
        "type": "function",
        "z": 0,
        "name": "preserves original html of <entry> element",
        "func": "msg.html = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 740,
        "y": 500,
        "wires": [
            [
                "4a6beef1.74449"
            ]
        ]
    },
    {
        "id": "4a6beef1.74449",
        "type": "html",
        "z": 0,
        "name": "Parse Title",
        "property": "payload",
        "outproperty": "payload",
        "tag": "title",
        "ret": "text",
        "as": "single",
        "x": 650,
        "y": 540,
        "wires": [
            [
                "b9ec59b8.6bf068"
            ]
        ]
    },
    {
        "id": "b9ec59b8.6bf068",
        "type": "function",
        "z": 0,
        "name": "<title> to msg.title ",
        "func": "msg.title = msg.payload[0];\nmsg.payload = msg.html;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 580,
        "wires": [
            [
                "89545af6.1dd448"
            ]
        ]
    },
    {
        "id": "89545af6.1dd448",
        "type": "html",
        "z": 0,
        "name": "Parse content",
        "property": "payload",
        "outproperty": "payload",
        "tag": "content",
        "ret": "text",
        "as": "single",
        "x": 660,
        "y": 620,
        "wires": [
            [
                "6616a6ad.f76488"
            ]
        ]
    },
    {
        "id": "6616a6ad.f76488",
        "type": "function",
        "z": 0,
        "name": "<content> to msg.title ",
        "func": "msg.content = msg.payload[0];\nmsg.payload = msg.html;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 660,
        "wires": [
            [
                "95d88ef5.9e319"
            ]
        ]
    },
    {
        "id": "95d88ef5.9e319",
        "type": "html",
        "z": 0,
        "name": "Parse href",
        "property": "payload",
        "outproperty": "payload",
        "tag": "link",
        "ret": "attr",
        "as": "single",
        "x": 650,
        "y": 700,
        "wires": [
            [
                "d2b19e43.2cee1",
                "a85b9942.b370d8"
            ]
        ]
    },
    {
        "id": "d2b19e43.2cee1",
        "type": "function",
        "z": 0,
        "name": "grab href to resource ",
        "func": "msg.href = msg.payload[0].href;\nmsg.payload= msg.html;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 740,
        "wires": [
            [
                "ca40e11c.d5ded"
            ]
        ]
    },
    {
        "id": "a197c7ce.5c5228",
        "type": "http response",
        "z": 0,
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1210,
        "y": 900,
        "wires": []
    },
    {
        "id": "e442efb.b65961",
        "type": "comment",
        "z": 0,
        "name": "VISIT:   https://carproj.us.to:18800/check-feed",
        "info": "",
        "x": 270,
        "y": 140,
        "wires": []
    },
    {
        "id": "9a6e366b.e0a328",
        "type": "function",
        "z": 0,
        "name": "Stores the Entries",
        "func": "var entries = new flow.get('entries') || [];\n\nentries.push(msg);\n\nflow.set('entries', entries);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 670,
        "y": 860,
        "wires": [
            [
                "d0395e2.70289a"
            ]
        ]
    },
    {
        "id": "de7efa94.cad168",
        "type": "template",
        "z": 0,
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/css/mdb.min.css\"> \n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/js/mdb.min.js\"></script>\n\n<style>\n\n    body {\n        background-color: black;\n    }\n    .entry{\n      -webkit-box-sizing: content-box;\n      -moz-box-sizing: content-box;\n      box-sizing: content-box;\n      border: 3px solid rgba(0,150,255,0.91);\n      -webkit-border-radius: 5px;\n      border-radius: 5px;\n      font: normal 16px/1 \"Times New Roman\", Times, serif;\n      color: rgba(255,255,255,1);\n      text-align: center;\n      -o-text-overflow: ellipsis;\n      text-overflow: ellipsis;\n      -webkit-box-shadow: 3px 3px 4px 0 rgba(0,0,0,0.4) ;\n      box-shadow: 3px 3px 4px 0 rgba(0,0,0,0.4) ;\n      -webkit-transform: rotateX(-2.8647889756541165deg) rotateY(-4.010704565915763deg)   ;\n      transform: rotateX(-2.8647889756541165deg) rotateY(-4.010704565915763deg)   ;\n      margin-bottom: 5px;\n        \n    }\n</style>\n\nID:{{feed.id}}\nTitle:{{feed.title}}\nUpdated: {{feed.updated}}\n{{msg}}\n\n    <div class=\"entry col-12 animated fadeIn\">\n        Activity: <a href=\"{{href}}\"> {{title}}</a>\n        Updated: {{published}}\n    </div>\n\n{{/payload}}",
        "output": "str",
        "x": 960,
        "y": 900,
        "wires": [
            [
                "a197c7ce.5c5228"
            ]
        ]
    },
    {
        "id": "ca40e11c.d5ded",
        "type": "html",
        "z": 0,
        "name": "Parse date updated",
        "property": "payload",
        "outproperty": "payload",
        "tag": "published",
        "ret": "html",
        "as": "single",
        "x": 670,
        "y": 780,
        "wires": [
            [
                "90170308.c20e5"
            ]
        ]
    },
    {
        "id": "90170308.c20e5",
        "type": "function",
        "z": 0,
        "name": "grab href to resource ",
        "func": "msg.published = msg.payload[0].toLocaleString();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 680,
        "y": 820,
        "wires": [
            [
                "9a6e366b.e0a328"
            ]
        ]
    },
    {
        "id": "3df8b4d0.20feec",
        "type": "function",
        "z": 0,
        "name": "resets the 'entries' Global Variable",
        "func": "flow.set('entries', []);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 260,
        "y": 180,
        "wires": [
            [
                "df6fbe54.437fa"
            ]
        ]
    },
    {
        "id": "32519140.4a8e6e",
        "type": "html",
        "z": 0,
        "name": "Parse Feed info: id",
        "property": "payload",
        "outproperty": "payload",
        "tag": "feed id",
        "ret": "text",
        "as": "single",
        "x": 670,
        "y": 220,
        "wires": [
            [
                "e6f991d2.ba6e6"
            ]
        ]
    },
    {
        "id": "e6f991d2.ba6e6",
        "type": "function",
        "z": 0,
        "name": "save feed info to msg.feed",
        "func": "msg.feed = {\n    id: null,\n    title: null,\n    updated: null\n};\n\nmsg.feed.id = msg.payload[0] ;\nmsg.payload = msg.original;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 260,
        "wires": [
            [
                "7e413b56.546264"
            ]
        ]
    },
    {
        "id": "7e413b56.546264",
        "type": "html",
        "z": 0,
        "name": "Parse Feed info : title",
        "property": "payload",
        "outproperty": "payload",
        "tag": "feed title",
        "ret": "text",
        "as": "single",
        "x": 680,
        "y": 300,
        "wires": [
            [
                "ca3192a5.48b73"
            ]
        ]
    },
    {
        "id": "ca3192a5.48b73",
        "type": "function",
        "z": 0,
        "name": "save feed info to msg.feed",
        "func": "msg.feed.title = msg.payload[0];\nmsg.payload = msg.original;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 340,
        "wires": [
            [
                "ff825a97.e5d078"
            ]
        ]
    },
    {
        "id": "ff825a97.e5d078",
        "type": "html",
        "z": 0,
        "name": "Parse Feed info : updated (Date)",
        "property": "payload",
        "outproperty": "payload",
        "tag": "feed updated",
        "ret": "html",
        "as": "single",
        "x": 710,
        "y": 380,
        "wires": [
            [
                "ef5331b5.d2739"
            ]
        ]
    },
    {
        "id": "ef5331b5.d2739",
        "type": "function",
        "z": 0,
        "name": "save feed info to msg.feed",
        "func": "msg.feed.updated = msg.payload[0];\nmsg.payload = msg.original;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 420,
        "wires": [
            [
                "7cf45418.039cfc"
            ]
        ]
    },
    {
        "id": "9d66131b.d17ac",
        "type": "function",
        "z": 0,
        "name": "preserve original msg",
        "func": "msg.original = msg.payload;  // keeps the original message in tact\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 455.55554090227406,
        "y": 219.9999607631138,
        "wires": [
            [
                "32519140.4a8e6e"
            ]
        ]
    },
    {
        "id": "60db6e26.7c0ff",
        "type": "comment",
        "z": 0,
        "name": "<--- Now do each entry!",
        "info": "",
        "x": 870,
        "y": 460,
        "wires": []
    },
    {
        "id": "d0395e2.70289a",
        "type": "function",
        "z": 0,
        "name": "",
        "func": "var tmp = flow.get('entries');\nmsg.payload = tmp;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 650,
        "y": 900,
        "wires": [
            [
                "de7efa94.cad168"
            ]
        ]
    },
    {
        "id": "6ab55c9c.66be74",
        "type": "file in",
        "z": "aa217fe3.6dd8e",
        "name": "",
        "filename": "/home/ubuntu/feeds/current.feed",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 720,
        "y": 180,
        "wires": [
            [
                "113587c7.acf4a8"
            ]
        ]
    },
    {
        "id": "113587c7.acf4a8",
        "type": "function",
        "z": "aa217fe3.6dd8e",
        "name": "Prepend to File",
        "func": "msg.file = msg.payload;\nmsg.output = msg.tofile + \"\\n\" + msg.file;\nmsg.payload = msg.output;\n\nif(msg.intesting){\n    return [null,msg];\n}else{\n    return [msg,null];   \n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 960,
        "y": 180,
        "wires": [
            [
                "cb4ac319.0c655"
            ],
            []
        ]
    },
    {
        "id": "c6339bd2.63b408",
        "type": "comment",
        "z": 0,
        "name": "THIS FLOW IS NOT USED BUT MIGHT COME IN HANDY LATER",
        "info": "",
        "x": 410,
        "y": 60,
        "wires": []
    },
    {
        "id": "6f46d0ac.36568",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "PSEUDO CONTROLS",
        "info": "",
        "x": 200,
        "y": 180,
        "wires": []
    },
    {
        "id": "ecd35315.d970b",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Rate Limit (Click me)",
        "info": "Rate limit with drop messages is so you don't get flooded with messages all at once when you input a new RSS feed. Sometimes there are multiple elements in the RSS that can do a flooding effect on the outgoind SMS or Emails. The File Write is not flooded and should catch all activity that was parsed.  ",
        "x": 4530,
        "y": 2180,
        "wires": []
    },
    {
        "id": "53dfcf2a.35eae",
        "type": "Drives",
        "z": "aa217fe3.6dd8e",
        "name": "",
        "x": 570,
        "y": 340,
        "wires": [
            [
                "21b6cb35.9f41b4"
            ]
        ]
    },
    {
        "id": "21b6cb35.9f41b4",
        "type": "function",
        "z": "aa217fe3.6dd8e",
        "name": "CHECK / Enough Disk Space?",
        "func": "msg.freespace = msg.payload[2].available;\n\n\n// diskspace threshold 10GB\nif(msg.freespace > 10000000){\n    //1st output has enough disk space\n    msg.payload = msg.output;\n    return [msg,null];\n}else{\n    //2nd input is low disk space\n    return [null,msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 790,
        "y": 340,
        "wires": [
            [
                "cb4ac319.0c655"
            ],
            []
        ]
    },
    {
        "id": "16d42559.3e19cb",
        "type": "comment",
        "z": "aa217fe3.6dd8e",
        "name": "Needs at least 10GB Limit on Disk",
        "info": "This will hopefully avoid any disk overages on any free tier services.",
        "x": 700,
        "y": 300,
        "wires": []
    },
    {
        "id": "fb2c4f36.601a9",
        "type": "link in",
        "z": "d04ea5a4.8bc1e8",
        "name": "IN Feed",
        "links": [
            "243c9bdd.d1c354",
            "8b045758.b0f628",
            "91b00d7d.9ee86"
        ],
        "x": 635,
        "y": 1820,
        "wires": [
            [
                "d738cfb.ae3353"
            ]
        ]
    },
    {
        "id": "ef4cf552.8cc518",
        "type": "link in",
        "z": "d04ea5a4.8bc1e8",
        "name": "sms in",
        "links": [
            "cebc7b2d.38ecc8",
            "e13e7769.da0358"
        ],
        "x": 335,
        "y": 200,
        "wires": [
            [
                "c9c2fa96.7c8378"
            ]
        ]
    },
    {
        "id": "5f51d991.a9c618",
        "type": "link in",
        "z": "d04ea5a4.8bc1e8",
        "name": "email in",
        "links": [
            "36a6d66c.75e86a",
            "39217682.97d16a"
        ],
        "x": 335,
        "y": 280,
        "wires": [
            [
                "a67a1c96.f4cb3"
            ]
        ]
    },
    {
        "id": "8a2f4464.7d9a08",
        "type": "e-mail",
        "z": "6432b979.125f98",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "sidthetech@gmail.com",
        "dname": "",
        "x": 600,
        "y": 220,
        "wires": []
    },
    {
        "id": "53dc50d0.b6647",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Parsy McFunTime - Channel General Info",
        "info": "",
        "x": 1000,
        "y": 660,
        "wires": []
    },
    {
        "id": "7c7bdab7.8d21a4",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Parsy McFunTime - Article Items General Info",
        "info": "",
        "x": 2150,
        "y": 760,
        "wires": []
    },
    {
        "id": "17c89f43.f0b6c1",
        "type": "e-mail",
        "z": "d04ea5a4.8bc1e8",
        "server": "smtp.gmail.com",
        "port": "465",
        "secure": true,
        "tls": true,
        "name": "",
        "dname": "",
        "x": 4670,
        "y": 2220,
        "wires": []
    },
    {
        "id": "e102f71.63be408",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Format For EMAIL",
        "func": "\n\nmsg.payload = msg.article.title.replace(\"<b>\",\"\").replace(\"</b>\",\"\").replace(\"&#39\", \"'\") +\"\\n\\nKeyword: [\" + msg.kwset.keyword + \"]\\nSource: \"  + msg.shorturl + \"\\n\\n\" + \"View: \" + \"https://radar-blip.com/my-blips\";\nmsg.topic = \"RadarBlip: [\" + msg.kwset.keyword + \"] : \" + msg.article.title.replace(\"<b>\",\"\").replace(\"</b>\",\"\").replace(\"&#39\", \"'\");\n\nmsg.to = msg.email_out;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 4330,
        "y": 2220,
        "wires": [
            [
                "b0a0c38d.64483"
            ]
        ]
    },
    {
        "id": "b0a0c38d.64483",
        "type": "delay",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 4520,
        "y": 2220,
        "wires": [
            [
                "17c89f43.f0b6c1"
            ]
        ]
    },
    {
        "id": "72eab791.3ac648",
        "type": "comment",
        "z": "aa217fe3.6dd8e",
        "name": "THIS SUBFLOW WILL BE DEPRICATED WHEN IMPLEMENTING DB",
        "info": "",
        "x": 400,
        "y": 80,
        "wires": []
    },
    {
        "id": "9ae7559a.c625e8",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Storage OutBound - FEEDS",
        "info": "",
        "x": 3780,
        "y": 1700,
        "wires": []
    },
    {
        "id": "8893efc4.c3532",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Prep Payload and ID",
        "func": "//ALL CODE BELOW IS NO LONGER NEEDED WITH \n//THE USE OF THE MORE FLEXIBLE MONGODB NODE:\n// node-red-node-mongodb\n\n//msg.db_url=\"mongodb://localhost:27017/\";\n//msg.db_name=\"carproj_db\";\n//msg.db_collection=\"feeds\";\n\n\n//converts elements from the msg object to the\n// msg.payload for delivery to the DB.\n// msg.oldpayload = msg.payload;\n// msg.payload = {};\n// msg.payload.subject = msg.subject;\n// msg.payload.sourcey = msg.sourcey;\n// msg.payload.longurl =msg.longurl;\n// msg.payload.article = msg.article;\n// msg.payload.shorturl = msg.shorturl;\n// msg.payload.topic = msg.topic;\n// msg.payload.date = Date();\n\nmsg.logged_date = Date.now();\n\nmsg.userid = msg.original.userid;\n\nmsg.collection = \"USER_FEEDS_\" + msg.userid;\n\nmsg.payload = {\n    _id : msg._id,\n    article :msg.article,\n    logged_date: Date.now(),\n    feed_url: msg.topic,\n    userid : msg.original.userid,\n    shorturl : msg.shorturl,\n    feedinfo: msg.feedinfo,\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 3740,
        "y": 1740,
        "wires": [
            [
                "90f1cb2.dcd4338"
            ]
        ]
    },
    {
        "id": "feee12a2.d567a",
        "type": "switch",
        "z": "35be5ce0.5455b4",
        "name": "SecureWorks', 'techcrunch', 'gartner', 'forrester', 'herjavec group'",
        "property": "checkjson",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "secureworks",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "techcrunch",
                "vt": "str"
            },
            {
                "t": "regex",
                "v": "gartner",
                "vt": "str",
                "case": true
            },
            {
                "t": "cont",
                "v": "forrester",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "herjavec group",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 760,
        "y": 540,
        "wires": [
            [
                "d540b3d9.368e1"
            ],
            [
                "be05892b.9875d8"
            ],
            [
                "c521bb5d.044688"
            ],
            [
                "761ac41b.077ccc"
            ],
            [
                "b3767000.e7371"
            ],
            []
        ]
    },
    {
        "id": "d540b3d9.368e1",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "setSubject SecureWorks",
        "func": "msg.subject = 'SecureWorks';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1190,
        "y": 460,
        "wires": [
            [
                "3ea4a5f6.0ea4ba"
            ]
        ]
    },
    {
        "id": "be05892b.9875d8",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "setSubject TechCrunch",
        "func": "msg.subject = 'TechCrunch';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1190,
        "y": 500,
        "wires": [
            [
                "3ea4a5f6.0ea4ba"
            ]
        ]
    },
    {
        "id": "c521bb5d.044688",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "setSubject Gartner",
        "func": "msg.subject = 'Gartner';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 540,
        "wires": [
            [
                "3ea4a5f6.0ea4ba"
            ]
        ]
    },
    {
        "id": "761ac41b.077ccc",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "setSubject Forrester",
        "func": "msg.subject = 'Forrester';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1180,
        "y": 580,
        "wires": [
            [
                "3ea4a5f6.0ea4ba"
            ]
        ]
    },
    {
        "id": "b3767000.e7371",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "setSubject Herjavec Group",
        "func": "msg.subject = 'Herjavec Group';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1200,
        "y": 620,
        "wires": [
            [
                "3ea4a5f6.0ea4ba"
            ]
        ]
    },
    {
        "id": "b3a259d.a2ac0a8",
        "type": "comment",
        "z": "35be5ce0.5455b4",
        "name": "Your Key Words Go HERE",
        "info": "",
        "x": 670,
        "y": 500,
        "wires": []
    },
    {
        "id": "cf3846ef.196658",
        "type": "catch",
        "z": "35be5ce0.5455b4",
        "name": "",
        "scope": [
            "93330db9.50d52"
        ],
        "uncaught": false,
        "x": 1410,
        "y": 420,
        "wires": [
            [
                "f658827.c46fe8"
            ]
        ]
    },
    {
        "id": "3ea4a5f6.0ea4ba",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "longurl to payload",
        "func": "msg.payload = msg.topic;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1530,
        "y": 540,
        "wires": [
            [
                "79c71045.8c7f9"
            ]
        ]
    },
    {
        "id": "fa231217.84f08",
        "type": "comment",
        "z": "35be5ce0.5455b4",
        "name": "these are for keyword labels later",
        "info": "",
        "x": 1190,
        "y": 420,
        "wires": []
    },
    {
        "id": "7c2e7d71.d72354",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "set RSS Topic to msg.subject",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 180,
        "wires": [
            [
                "feee12a2.d567a"
            ]
        ]
    },
    {
        "id": "9621d1f.d500a3",
        "type": "inject",
        "z": "35be5ce0.5455b4",
        "name": "PSEUDO FEED",
        "topic": "",
        "payload": "{\"topic\":\"https://www.secureworks.com/research/threat-group-4127-targets-google-accounts\",\"payload\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.secureworks.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.secureworks.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the Secureworks CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\"article\":{\"title\":\"Threat Group-4127 Targets Google Accounts\",\"description\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.secureworks.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.secureworks.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the Secureworks CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\"summary\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.secureworks.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.secureworks.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the Secureworks CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\"date\":\"2016-06-26T00:00:00.000Z\",\"pubdate\":\"2016-06-26T00:00:00.000Z\",\"pubDate\":\"2016-06-26T00:00:00.000Z\",\"link\":\"https://www.secureworks.com/research/threat-group-4127-targets-google-accounts\",\"guid\":\"https://www.secureworks.com/research/threat-group-4127-targets-google-accounts\",\"author\":\"Secureworks Counter Threat Unit™ Threat Intelligence\",\"comments\":null,\"origlink\":null,\"image\":{},\"source\":{},\"categories\":[\"Threat Analysis\"],\"enclosures\":[],\"rss:@\":{},\"permalink\":\"https://www.secureworks.com/research/threat-group-4127-targets-google-accounts\",\"rss:guid\":{\"@\":{\"ispermalink\":\"true\"},\"#\":\"https://www.secureworks.com/research/threat-group-4127-targets-google-accounts\"},\"rss:link\":{\"@\":{},\"#\":\"https://www.secureworks.com/research/threat-group-4127-targets-google-accounts\"},\"a10:author\":{\"@\":{},\"a10:name\":{\"@\":{},\"#\":\"Secureworks Counter Threat Unit™ Threat Intelligence\"}},\"rss:category\":{\"@\":{},\"#\":\"Threat Analysis\"},\"rss:title\":{\"@\":{},\"#\":\"Threat Group-4127 Targets Google Accounts\"},\"rss:description\":{\"@\":{},\"#\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.secureworks.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.secureworks.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the Secureworks CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\"},\"rss:pubdate\":{\"@\":{},\"#\":\"Sun, 26 Jun 2016 00:00:00 Z\"},\"dc:creator\":{\"@\":{},\"#\":\"Secureworks Counter Threat Unit™ Threat Intelligence\"},\"meta\":{\"#ns\":[{\"xmlns:a10\":\"http://www.w3.org/2005/Atom\"},{\"xmlns:dc\":\"http://purl.org/dc/elements/1.1/\"}],\"@\":[{\"xmlns:a10\":\"http://www.w3.org/2005/Atom\"}],\"#xml\":{},\"#type\":\"rss\",\"#version\":\"2.0\",\"title\":\"Secureworks Counter Threat Unit (CTU) Research\",\"description\":\"The latest publications from our Counter Threat Unit including Threat Analyses and Threat Advisories\",\"date\":null,\"pubdate\":null,\"pubDate\":null,\"link\":\"https://www.secureworks.com/research\",\"xmlurl\":null,\"xmlUrl\":null,\"author\":null,\"language\":null,\"favicon\":null,\"copyright\":null,\"generator\":null,\"cloud\":{},\"image\":{},\"categories\":[],\"rss:@\":{\"xmlns:dc\":\"http://purl.org/dc/elements/1.1/\"},\"rss:title\":{\"@\":{},\"#\":\"Secureworks Counter Threat Unit (CTU) Research\"},\"rss:link\":{\"@\":{},\"#\":\"https://www.secureworks.com/research\"},\"rss:description\":{\"@\":{},\"#\":\"The latest publications from our Counter Threat Unit including Threat Analyses and Threat Advisories\"}}},\"_msgid\":\"977aac68.9d573\",\"subject\":\"SecureWorks\",\"sourcey\":\"SecureWorks RSS: Research\"}",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 280,
        "y": 60,
        "wires": [
            [
                "79f1b21a.01dfec"
            ]
        ]
    },
    {
        "id": "79f1b21a.01dfec",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "",
        "func": "msg.checkjson = msg.payload + msg.article.title + \" \" + msg.article.description + \" \" + msg.summary;\nmsg.checkjson = msg.checkjson.toLowerCase();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 290,
        "y": 180,
        "wires": [
            [
                "22b5aca5.29c234"
            ]
        ]
    },
    {
        "id": "22b5aca5.29c234",
        "type": "subflow:744b7dea.ce4b94",
        "z": "35be5ce0.5455b4",
        "name": "LinkStripper via msg.payload",
        "env": [],
        "x": 520,
        "y": 180,
        "wires": [
            [
                "7c2e7d71.d72354"
            ]
        ]
    },
    {
        "id": "79c71045.8c7f9",
        "type": "debug",
        "z": "35be5ce0.5455b4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1440,
        "y": 720,
        "wires": []
    },
    {
        "id": "611c3a75.7c3a24",
        "type": "inject",
        "z": "35be5ce0.5455b4",
        "name": "PSEUDO FEED",
        "topic": "",
        "payload": "{\"topic\":\"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\"payload\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\"article\":{\"title\":\"Threat Group-4127 Targets Google Accountsgartner\",\"description\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\"summary\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\"date\":\"2016-06-26T00:00:00.000Z\",\"pubdate\":\"2016-06-26T00:00:00.000Z\",\"pubDate\":\"2016-06-26T00:00:00.000Z\",\"link\":\"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\"guid\":\"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\"author\":\"'' Counter Threat Unit™ Threat Intelligence\",\"comments\":null,\"origlink\":null,\"image\":{},\"source\":{},\"categories\":[\"Threat Analysis\"],\"enclosures\":[],\"rss:@\":{},\"permalink\":\"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\"rss:guid\":{\"@\":{\"ispermalink\":\"true\"},\"#\":\"https://www.''.com/research/threat-group-4127-targets-google-accounts\"},\"rss:link\":{\"@\":{},\"#\":\"https://www.''.com/research/threat-group-4127-targets-google-accounts\"},\"a10:author\":{\"@\":{},\"a10:name\":{\"@\":{},\"#\":\"'' Counter Threat Unit™ Threat Intelligence\"}},\"rss:category\":{\"@\":{},\"#\":\"Threat Analysis\"},\"rss:title\":{\"@\":{},\"#\":\"Threat Group-4127 Targets Google Accounts\"},\"rss:description\":{\"@\":{},\"#\":\"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\"},\"rss:pubdate\":{\"@\":{},\"#\":\"Sun, 26 Jun 2016 00:00:00 Z\"},\"dc:creator\":{\"@\":{},\"#\":\"'' Counter Threat Unit™ Threat Intelligence\"},\"meta\":{\"#ns\":[{\"xmlns:a10\":\"http://www.w3.org/2005/Atom\"},{\"xmlns:dc\":\"http://purl.org/dc/elements/1.1/\"}],\"@\":[{\"xmlns:a10\":\"http://www.w3.org/2005/Atom\"}],\"#xml\":{},\"#type\":\"rss\",\"#version\":\"2.0\",\"title\":\"'' Counter Threat Unit (CTU) Research\",\"description\":\"The latest publications from our Counter Threat Unit including Threat Analyses and Threat Advisories\",\"date\":null,\"pubdate\":null,\"pubDate\":null,\"link\":\"https://www.''.com/research\",\"xmlurl\":null,\"xmlUrl\":null,\"author\":null,\"language\":null,\"favicon\":null,\"copyright\":null,\"generator\":null,\"cloud\":{},\"image\":{},\"categories\":[],\"rss:@\":{\"xmlns:dc\":\"http://purl.org/dc/elements/1.1/\"},\"rss:title\":{\"@\":{},\"#\":\"'' Counter Threat Unit (CTU) Research\"},\"rss:link\":{\"@\":{},\"#\":\"https://www.''.com/research\"},\"rss:description\":{\"@\":{},\"#\":\"The latest publications from our Counter Threat Unit including Threat Analyses and Threat Advisories\"}}},\"_msgid\":\"977aac68.9d573\",\"subject\":\"''\",\"sourcey\":\"'' RSS: Research\"}",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 320,
        "y": 640,
        "wires": [
            [
                "2c63786a.4458d8"
            ]
        ]
    },
    {
        "id": "2c63786a.4458d8",
        "type": "function",
        "z": "35be5ce0.5455b4",
        "name": "fake msg",
        "func": "msg = {\n    \"topic\": \"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\n    \"payload\": \"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google forresterAccounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\n    \"article\": {\n        \"title\": \"Threat Group-4127 techcRunchHeaveCgartTargets Google Accounts\",\n        \"description\": \"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\n        \"summary\": \"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\",\n        \"date\": \"2016-06-26T00:00:00.000Z\",\n        \"pubdate\": \"2016-06-26T00:00:00.000Z\",\n        \"pubDate\": \"2016-06-26T00:00:00.000Z\",\n        \"link\": \"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\n        \"guid\": \"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\n        \"author\": \"'' Counter Threat Unit™ Threat Intelligence\",\n        \"comments\": null,\n        \"origlink\": null,\n        \"image\": {},\n        \"source\": {},\n        \"categories\": [\n            \"Threat Analysis\"\n        ],\n        \"enclosures\": [],\n        \"rss:@\": {},\n        \"permalink\": \"https://www.''.com/research/threat-group-4127-targets-google-accounts\",\n        \"rss:guid\": {\n            \"@\": {\n                \"ispermalink\": \"true\"\n            },\n            \"#\": \"https://www.''.com/research/threat-group-4127-targets-google-accounts\"\n        },\n        \"rss:link\": {\n            \"@\": {},\n            \"#\": \"https://www.''.com/research/threat-group-4127-targets-google-accounts\"\n        },\n        \"a10:author\": {\n            \"@\": {},\n            \"a10:name\": {\n                \"@\": {},\n                \"#\": \"'' Counter Threat Unit™ Threat Intelligence\"\n            }\n        },\n        \"rss:category\": {\n            \"@\": {},\n            \"#\": \"Threat Analysis\"\n        },\n        \"rss:title\": {\n            \"@\": {},\n            \"#\": \"Threat Group-4127 Targets Google Accounts\"\n        },\n        \"rss:description\": {\n            \"@\": {},\n            \"#\": \"Type: Threat Analysis</br><h2>Threat Group-4127 Targets Google Accounts</h2><a href='https://www.''.com/research/threat-group-4127-targets-google-accounts'><img src='https://www.''.com//pcdnscwx001.azureedge.net/~/media/Images/Insights/Abstracts/0043 molecule structure/abstracts_0043_molecule-structure_360x190.ashx?modified=20160413134806' /></a><br/><br/>Read the '' CTU threat analysis of Threat Group-4127, which traditionally targets governments, military,international non-governmental organizations (NGOs), and most recently, Hillary Clinton's email.\"\n        },\n        \"rss:pubdate\": {\n            \"@\": {},\n            \"#\": \"Sun, 26 Jun 2016 00:00:00 Z\"\n        },\n        \"dc:creator\": {\n            \"@\": {},\n            \"#\": \"'' Counter Threat Unit™ Threat Intelligence\"\n        },\n        \"meta\": {\n            \"#ns\": [\n                {\n                    \"xmlns:a10\": \"http://www.w3.org/2005/Atom\"\n                },\n                {\n                    \"xmlns:dc\": \"http://purl.org/dc/elements/1.1/\"\n                }\n            ],\n            \"@\": [\n                {\n                    \"xmlns:a10\": \"http://www.w3.org/2005/Atom\"\n                }\n            ],\n            \"#xml\": {},\n            \"#type\": \"rss\",\n            \"#version\": \"2.0\",\n            \"title\": \"'' Counter Threat Unit (CTU) Research\",\n            \"description\": \"The latest publications from our Counter Threat Unit including Threat Analyses and Threat Advisories\",\n            \"date\": null,\n            \"pubdate\": null,\n            \"pubDate\": null,\n            \"link\": \"https://www.''.com/research\",\n            \"xmlurl\": null,\n            \"xmlUrl\": null,\n            \"author\": null,\n            \"language\": null,\n            \"favicon\": null,\n            \"copyright\": null,\n            \"generator\": null,\n            \"cloud\": {},\n            \"image\": {},\n            \"categories\": [],\n            \"rss:@\": {\n                \"xmlns:dc\": \"http://purl.org/dc/elements/1.1/\"\n            },\n            \"rss:title\": {\n                \"@\": {},\n                \"#\": \"'' Counter Threat Unit (CTU) Research\"\n            },\n            \"rss:link\": {\n                \"@\": {},\n                \"#\": \"https://www.''.com/research\"\n            },\n            \"rss:description\": {\n                \"@\": {},\n                \"#\": \"The latest publications from our Counter Threat Unit including Threat Analyses and Threat Advisories\"\n            }\n        }\n    },\n    \"_msgid\": \"977aac68.9d573\",\n    \"subject\": \"''\",\n    \"sourcey\": \"'' RSS: Research\"\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 300,
        "y": 580,
        "wires": [
            [
                "79f1b21a.01dfec"
            ]
        ]
    },
    {
        "id": "306f14fa.f0718c",
        "type": "shorten",
        "z": "35be5ce0.5455b4",
        "name": "Shorten URL",
        "longurl": "",
        "shorturl": "",
        "x": 1850,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "f658827.c46fe8",
        "type": "debug",
        "z": "35be5ce0.5455b4",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1610,
        "y": 420,
        "wires": []
    },
    {
        "id": "521f35d5.3b8a7c",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Strip Links from HTML",
        "func": "\n    \n    //remove all anchor tags:\n     msg.tocheck = msg.tocheck.replace(/<a.*>.*?<\\/a>/ig,'');\n     msg.tocheck = msg.tocheck.replace(/<form .*>.*?<\\/form>/ig,'');\n     msg.tocheck = msg.tocheck.replace(/<head .*>.*?<\\/head>/ig,'');\n     msg.tocheck = msg.tocheck.replace(/<link .*>.*?<\\/link>/ig,'');\n     msg.tocheck = msg.tocheck.replace(/<img .*>.*?>/ig,'');\n     msg.tocheck = msg.tocheck.replace(/<script .*>.*?>/ig,'');\n    //SOME HTML TAGS ARE LEAKING KEYWORDS... TRYING ABOVE METHODS\n    msg.tocheck = JSON.stringify(msg.tocheck).replace(/(?:https?|ftp):\\/\\/[\\n\\S]+/g, \"\");\n    \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1000,
        "y": 1820,
        "wires": [
            [
                "31180bc7.d911a4"
            ]
        ]
    },
    {
        "id": "f90fc689.529638",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "Erase ALL THE DB",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 210,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "b5a79965.2835e8",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "ERASE ALL DATA IN DB!!",
        "func": "msg.db_url=\"mongodb://localhost:27017/\";\nmsg.db_name=\"carproj_db\";\nmsg.db_collection=\"feeds\";\nmsg.payload={};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 450,
        "y": 420,
        "wires": [
            [
                "b1399a91.d09338"
            ]
        ]
    },
    {
        "id": "f57f8d75.deddc",
        "type": "shorten",
        "z": 0,
        "name": "Shorten URL",
        "longurl": "",
        "shorturl": "",
        "x": 1770,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "c1ebcc74.d3133",
        "type": "comment",
        "z": 0,
        "name": "RSS OUTPUTS GO HERE",
        "info": "",
        "x": 510,
        "y": 1520,
        "wires": []
    },
    {
        "id": "baabad1c.c5411",
        "type": "switch",
        "z": 0,
        "name": "SecureWorks', 'techcrunch', 'gartner', 'forrester', 'herjavec group'",
        "property": "checkjson",
        "propertyType": "msg",
        "rules": [
            {
                "t": "regex",
                "v": "secureworks",
                "vt": "str",
                "case": true
            },
            {
                "t": "regex",
                "v": "techcrunch",
                "vt": "str",
                "case": true
            },
            {
                "t": "regex",
                "v": "gartner",
                "vt": "str",
                "case": true
            },
            {
                "t": "regex",
                "v": "forrester",
                "vt": "str",
                "case": true
            },
            {
                "t": "regex",
                "v": "herjavec",
                "vt": "str",
                "case": true
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 6,
        "x": 1000,
        "y": 1560,
        "wires": [
            [
                "e617993a.c97418"
            ],
            [
                "197a8a8c.73a705"
            ],
            [
                "e57b6834.468cf8"
            ],
            [
                "85f444f4.65bc98"
            ],
            [
                "79aae032.d24e4"
            ],
            []
        ]
    },
    {
        "id": "e617993a.c97418",
        "type": "function",
        "z": 0,
        "name": "setSubject SecureWorks",
        "func": "msg.subject = 'SecureWorks';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1410,
        "y": 1460,
        "wires": [
            [
                "de1be5fe.70aa68"
            ]
        ]
    },
    {
        "id": "197a8a8c.73a705",
        "type": "function",
        "z": 0,
        "name": "setSubject TechCrunch",
        "func": "msg.subject = 'TechCrunch';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1410,
        "y": 1500,
        "wires": [
            [
                "de1be5fe.70aa68"
            ]
        ]
    },
    {
        "id": "e57b6834.468cf8",
        "type": "function",
        "z": 0,
        "name": "setSubject Gartner",
        "func": "msg.subject = 'Gartner';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1390,
        "y": 1540,
        "wires": [
            [
                "de1be5fe.70aa68"
            ]
        ]
    },
    {
        "id": "85f444f4.65bc98",
        "type": "function",
        "z": 0,
        "name": "setSubject Forrester",
        "func": "msg.subject = 'Forrester';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1400,
        "y": 1580,
        "wires": [
            [
                "de1be5fe.70aa68"
            ]
        ]
    },
    {
        "id": "79aae032.d24e4",
        "type": "function",
        "z": 0,
        "name": "setSubject Herjavec Group",
        "func": "msg.subject = 'Herjavec Group';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1420,
        "y": 1620,
        "wires": [
            [
                "de1be5fe.70aa68"
            ]
        ]
    },
    {
        "id": "e08a1e39.c8ff7",
        "type": "function",
        "z": 0,
        "name": "set feed source name",
        "func": "     \n     msg.longurl = msg.article.link;\n     msg.feed = msg.payload;\n     //msg.json = JSON.stringify(msg.original);\n     //msg.checkjson = JSON.stringify(msg.payload).replace(/(?:https?|ftp):\\/\\/[\\n\\S]+/g, '');\n     //msg.checkjson = JSON.stringify(msg.checkjson).replace(/(?:https?|ftp):\\/\\/[\\n\\S]+/g, '');\n    msg.checkjson = msg.article.title + \" \" + msg.article.description + \" \" + msg.article.summary;\n    \n    if(typeof(msg.sourcy === undefined)){\n        msg.sourcy = \"\";\n    }\n \n     return msg;\n    \n\n\n",
        "outputs": 2,
        "noerr": 0,
        "x": 560,
        "y": 1560,
        "wires": [
            [
                "baabad1c.c5411",
                "3e87936a.75807c"
            ],
            []
        ]
    },
    {
        "id": "757aa1d9.3eac5",
        "type": "comment",
        "z": 0,
        "name": "Your Key Words Go HERE",
        "info": "",
        "x": 890,
        "y": 1520,
        "wires": []
    },
    {
        "id": "54463784.193ec8",
        "type": "comment",
        "z": 0,
        "name": "these are for keyword labels later",
        "info": "",
        "x": 1410,
        "y": 1420,
        "wires": []
    },
    {
        "id": "de1be5fe.70aa68",
        "type": "function",
        "z": 0,
        "name": "longurl to payload",
        "func": "msg.payload = msg.longurl;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1650,
        "y": 1540,
        "wires": [
            [
                "f57f8d75.deddc"
            ]
        ]
    },
    {
        "id": "3e87936a.75807c",
        "type": "debug",
        "z": 0,
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1100,
        "y": 1820,
        "wires": []
    },
    {
        "id": "e7aca60e.799508",
        "type": "xml",
        "z": 0,
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 550,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "44a51b3b.d7e0c4",
        "type": "comment",
        "z": 0,
        "name": "THIS GLOB IS THE OLD FILTER FLOW",
        "info": "",
        "x": 310,
        "y": 1600,
        "wires": []
    },
    {
        "id": "e2ad52f2.e11a3",
        "type": "http response",
        "z": 0,
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1070,
        "y": 1100,
        "wires": []
    },
    {
        "id": "88780c2d.c8606",
        "type": "template",
        "z": 0,
        "name": "html template",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/css/mdb.min.css\"> \n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/js/mdb.min.js\"></script>\n\n<style>\nbody {\n    background-image: url(https://res.cloudinary.com/sidtech/image/upload/v1583688433/digitalbg_lj3zae.jpg);\n    background-repeat: no-repeat;\n    background-attachment: fixed;\nbackground: rgb(0,0,0);\nbackground: linear-gradient(319deg, rgba(0,0,0,1) 34%, rgba(0,7,37,1) 60%, rgba(0,0,0,1) 71%);\n    \n    \n}\ndiv.sticky.ui {\n    background: rgb(0,0,0);\nbackground: radial-gradient(circle, rgba(0,0,0,1) 0%, rgba(0,10,54,1) 47%, rgba(0,0,0,1) 100%);\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  background-color:black;\n  border-color:blue;\n  border-width:2px;\n  border-radius: 8px;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n  border-top-width:0;\n  border-style:solid;\n  padding: 10px;\n  padding-top:15px;\n  top: -5px;\n  margin-top:-8px;\n}\nsummary{\n    margin-bottom: 10px;\n  outline:none;\n}\n\npath {\n    height: 150px;\n    width: auto;\n    \n}\n\n    b {\n        background-color: lightgrey;\n        text-shadow: 1px 1px black;\n      \n    }\n    \n    details {\n        padding :10px;\n        background: rgb(2,0,36);\n        background: linear-gradient(90deg, rgba(2,0,36,1) 16%, rgba(9,9,121,1) 47%, rgba(7,57,153,1) 99%, rgba(0,212,255,1) 100%); \n    }\n    summary {\n        background: rgb(2,0,36);\n        background: linear-gradient(90deg, rgba(2,0,36,1) 16%, rgba(9,9,121,1) 47%, rgba(7,57,153,1) 99%, rgba(0,212,255,1) 100%);\n        \n    }\n    body {\n        background-color: black;\n        font: white;\n    }\n    .entry{\n      -webkit-box-sizing: content-box;\n      -moz-box-sizing: content-box;\n      box-sizing: content-box;\n      border: 1px solid rgba(0,150,255,0.71);\n      -webkit-border-radius: 5px;\n      border-radius: 2px;\n      font: normal 16px/1 \"Times New Roman\", Times, serif;\n      color: rgba(255,255,255,1);\n      \n      -o-text-overflow: ellipsis;\n      text-overflow: ellipsis;\n      -webkit-box-shadow: 3px 3px 4px 0 rgba(0,0,0,0.4) ;\n      box-shadow: 3px 3px 4px 0 rgba(0,0,0,0.4) ;\n      -webkit-transform: rotateX(-2.8647889756541165deg) rotateY(-4.010704565915763deg)   ;\n      transform: rotateX(-2.8647889756541165deg) rotateY(-4.010704565915763deg)   ;\n      margin-bottom: 7px;\n        \n    }\n .onoffswitch {\n    position: relative; width: 55px;\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\n}\n.onoffswitch-checkbox {\n    display: none;\n}\n.onoffswitch-label {\n    display: block; overflow: hidden; cursor: pointer;\n    height: 20px; padding: 0; line-height: 20px;\n    border: 0px solid #FFFFFF; border-radius: 24px;\n    background-color: #9E9E9E;\n}\n.onoffswitch-label:before {\n    content: \"\";\n    display: block; width: 24px; margin: -2px;\n    background: #FFFFFF;\n    position: absolute; top: 0; bottom: 0;\n    right: 31px;\n    border-radius: 24px;\n    box-shadow: 0 6px 12px 0px #757575;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label {\n    background-color: #42A5F5;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label, .onoffswitch-checkbox:checked + .onoffswitch-label:before {\n   border-color: #42A5F5;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\n    margin-left: 0;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label:before {\n    right: 0px; \n    background-color: #23F5DC; \n    box-shadow: 3px 6px 18px 0px rgba(0, 0, 0, 0.2);\n}\n</style>\n\n<div class=\"notify sticky ui animated slideInDown\" style=\"color: white;  height: auto;\">\n   <form action=\"\" method=\"\">    \n     <div>Notifications:</div>\n     \n     SMS:\n     <div class=\"onoffswitch\" style=\"margin-bottom:5px;   display: inline-block;\">\n         <input onclick=\"\" type=\"checkbox\" class=\"sms onoffswitch-checkbox\" id=\"sms\" name=\"sms\" {{#notify.sms}}checked{{/notify.sms}}>\n         <label class=\"onoffswitch-label\" for=\"sms\"></label>\n     </div>\n     \n     Email:\n     <div class=\"onoffswitch\" style=\"margin-bottom:5px;   display: inline-block;\">\n        <input onclick=\"\" type=\"checkbox\" class=\"email onoffswitch-checkbox\" name=\"email\" id=\"email\" {{#notify.email}}checked{{/notify.email}}> \n       <label class=\"onoffswitch-label\" for=\"email\"></label>\n     </div>\n     <div class=\"float-right\" style=\"display:inline-block;\">\n          <a class=\"btn btn-md btn-success\" href= \"/archive\" style=\"\">Archives</a>\n     </div>\n     \n   </form>\n  \n</div>\n\n<div class=\"spacer\" style=\"margin-bottom:40px;\"></div>\n\n<div class=\"feeds\" id=\"feeds\">\n    {{{payload}}}\n</div>\n    \n    \n<script>\n\nfunction clickedNotify() {\n     \n    const data = {\n        sms: document.getElementById(\"sms\").checked,\n        email: document.getElementById(\"email\").checked\n    }\n    \n    \n     fetch('/setNotifications', {\n         method: 'POST',\n         headers: {\n             'Content-Type': 'application/json',\n         },\n         body: JSON.stringify(data),\n         })\n        .then((response) => {\n             //alert(response);\n         })\n         .then((data) => {\n              //alert('Success:');\n         });\n    //     .catch((error) => {\n    //         alert('Error:');\n    //     });\n    // });\n    \n // alert(data.sms);\n  \n}\n\n\ndocument.getElementById(\"sms\").addEventListener(\"input\", function () {clickedNotify()});\ndocument.getElementById(\"email\").addEventListener(\"input\", function() {clickedNotify()});\n\n       \n</script>\n",
        "output": "str",
        "x": 900,
        "y": 1100,
        "wires": [
            [
                "e2ad52f2.e11a3"
            ]
        ]
    },
    {
        "id": "7ae54020.e5722",
        "type": "http in",
        "z": 0,
        "name": "",
        "url": "/check-feed",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 1100,
        "wires": [
            [
                "393c8d98.0a3502"
            ]
        ]
    },
    {
        "id": "393c8d98.0a3502",
        "type": "file in",
        "z": 0,
        "name": "",
        "filename": "/home/ubuntu/feeds/current.feed",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 440,
        "y": 1100,
        "wires": [
            [
                "d5bf8bf1.8a7da8"
            ]
        ]
    },
    {
        "id": "bda17bfd.338dd8",
        "type": "comment",
        "z": 0,
        "name": "https://carproj.us.to:18800/check-feed",
        "info": "",
        "x": 270,
        "y": 1060,
        "wires": []
    },
    {
        "id": "cfcfb696.d43578",
        "type": "comment",
        "z": 0,
        "name": "opens file",
        "info": "",
        "x": 500,
        "y": 1060,
        "wires": []
    },
    {
        "id": "6d134c3f.8e5d54",
        "type": "comment",
        "z": 0,
        "name": "Generates your HTML",
        "info": "",
        "x": 860,
        "y": 1060,
        "wires": []
    },
    {
        "id": "401ccfc6.40ab6",
        "type": "comment",
        "z": 0,
        "name": "Sends out HTML",
        "info": "",
        "x": 1100,
        "y": 1060,
        "wires": []
    },
    {
        "id": "d5bf8bf1.8a7da8",
        "type": "function",
        "z": 0,
        "name": "adjust for output",
        "func": "const notify = {\n    sms : flow.get('smsOnOff'),\n    email: flow.get('emailOnOff')\n}\n\nif(notify.sms == \"off\"){\n    notify.sms = null;\n}\nif(notify.email == \"off\"){\n    notify.email = null;\n}\n\nmsg.notify = notify;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 1100,
        "wires": [
            [
                "88780c2d.c8606"
            ]
        ]
    },
    {
        "id": "132b12a.224d3ed",
        "type": "link in",
        "z": 0,
        "name": "",
        "links": [],
        "x": 595,
        "y": 1060,
        "wires": [
            [
                "d5bf8bf1.8a7da8"
            ]
        ]
    },
    {
        "id": "aae92e88.90e7f",
        "type": "comment",
        "z": 0,
        "name": "DEPRECATED",
        "info": "No longer writing to html file... Now using a database. (Mongodb)",
        "x": 210,
        "y": 1020,
        "wires": []
    },
    {
        "id": "90f1cb2.dcd4338",
        "type": "mongodb out",
        "z": "d04ea5a4.8bc1e8",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "",
        "payonly": true,
        "upsert": true,
        "multi": false,
        "operation": "store",
        "x": 4000,
        "y": 1740,
        "wires": []
    },
    {
        "id": "5916de92.be462",
        "type": "link in",
        "z": "d04ea5a4.8bc1e8",
        "name": "VIVA DB",
        "links": [],
        "x": 3915,
        "y": 1700,
        "wires": [
            [
                "90f1cb2.dcd4338"
            ]
        ]
    },
    {
        "id": "cd237576.125d68",
        "type": "inject",
        "z": 0,
        "name": "ERASE FILE",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 230,
        "y": 2240,
        "wires": [
            [
                "343c2dfa.8f62c2"
            ]
        ]
    },
    {
        "id": "889814f2.3382a8",
        "type": "file",
        "z": 0,
        "name": "",
        "filename": "/home/ubuntu/feeds/current.feed",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1400,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "4045920c.bd5d4c",
        "type": "function",
        "z": 0,
        "name": "nullify payload to overwrite to file",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1100,
        "y": 2240,
        "wires": [
            [
                "889814f2.3382a8"
            ]
        ]
    },
    {
        "id": "343c2dfa.8f62c2",
        "type": "file in",
        "z": 0,
        "name": "",
        "filename": "/home/ubuntu/feeds/current.feed",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 460,
        "y": 2240,
        "wires": [
            [
                "80038b0e.499278"
            ]
        ]
    },
    {
        "id": "32db6e8e.12fb22",
        "type": "file",
        "z": 0,
        "name": "",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 890,
        "y": 2240,
        "wires": [
            [
                "4045920c.bd5d4c"
            ]
        ]
    },
    {
        "id": "80038b0e.499278",
        "type": "function",
        "z": 0,
        "name": "get date for filename",
        "func": "var d = new Date();\nvar n = d.getTime();\nmsg.filename = \"/home/ubuntu/feeds/archived/archive-\" + n + \".feed\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 720,
        "y": 2240,
        "wires": [
            [
                "32db6e8e.12fb22"
            ]
        ]
    },
    {
        "id": "da425ed1.5b81d",
        "type": "comment",
        "z": 0,
        "name": "DEPRICATED STORAGE flow",
        "info": "",
        "x": 240,
        "y": 2200,
        "wires": []
    },
    {
        "id": "b1399a91.d09338",
        "type": "mongodb out",
        "z": "d04ea5a4.8bc1e8",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "feeds",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 740,
        "y": 420,
        "wires": []
    },
    {
        "id": "46d8a857.2a0078",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "begin - User Controls / Interface --->",
        "info": "",
        "x": 240,
        "y": 20,
        "wires": []
    },
    {
        "id": "821ad27b.db0c7",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "<-----   The Sieve.  ----->",
        "info": "",
        "x": 1000,
        "y": 1780,
        "wires": []
    },
    {
        "id": "a0703c92.27e0b",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Erase - WARNING KEEP DISCONNECTED TO AVOID ACCIDENTAL DB DELETION!!!",
        "info": "",
        "x": 410,
        "y": 380,
        "wires": []
    },
    {
        "id": "b50c06dd.1ddcc8",
        "type": "switch",
        "z": 0,
        "name": "SecureWorks', 'techcrunch', 'gartner', 'forrester', 'herjavec group'",
        "property": "checkjson",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "secureworks",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "techcrunch",
                "vt": "str"
            },
            {
                "t": "regex",
                "v": "gartner",
                "vt": "str",
                "case": true
            },
            {
                "t": "cont",
                "v": "forrester",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "herjavec group",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 400,
        "y": 2620,
        "wires": [
            [
                "aa35bba6.51c918"
            ],
            [
                "acaa7d67.7af4d"
            ],
            [
                "a083d34c.97aa"
            ],
            [
                "6f4d4ec7.5a805"
            ],
            [
                "cefbfe02.9b0ce"
            ],
            []
        ]
    },
    {
        "id": "aa35bba6.51c918",
        "type": "function",
        "z": 0,
        "name": "setSubject SecureWorks",
        "func": "msg.subject = 'SecureWorks';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 770,
        "y": 2560,
        "wires": [
            []
        ]
    },
    {
        "id": "acaa7d67.7af4d",
        "type": "function",
        "z": 0,
        "name": "setSubject TechCrunch",
        "func": "msg.subject = 'TechCrunch';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 770,
        "y": 2600,
        "wires": [
            []
        ]
    },
    {
        "id": "a083d34c.97aa",
        "type": "function",
        "z": 0,
        "name": "setSubject Gartner",
        "func": "msg.subject = 'Gartner';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 750,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "6f4d4ec7.5a805",
        "type": "function",
        "z": 0,
        "name": "setSubject Forrester",
        "func": "msg.subject = 'Forrester';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 760,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "cefbfe02.9b0ce",
        "type": "function",
        "z": 0,
        "name": "setSubject Herjavec Group",
        "func": "msg.subject = 'Herjavec Group';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 780,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "74f83ea7.73606",
        "type": "comment",
        "z": 0,
        "name": "these are for keyword labels later",
        "info": "",
        "x": 770,
        "y": 2520,
        "wires": []
    },
    {
        "id": "5fb2226b.87af9c",
        "type": "comment",
        "z": 0,
        "name": "THIS LOBE IS READY FOR BONEYARD",
        "info": "",
        "x": 310,
        "y": 2560,
        "wires": []
    },
    {
        "id": "d738cfb.ae3353",
        "type": "delay",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 790,
        "y": 1820,
        "wires": [
            [
                "521f35d5.3b8a7c"
            ]
        ]
    },
    {
        "id": "b9ff5dbc.79263",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "SQEZ.IT URL SHORTENER",
        "info": "",
        "x": 1720,
        "y": 1800,
        "wires": []
    },
    {
        "id": "ef59c49d.1a7e58",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "save short url and restore msg",
        "func": "msg.shorturl = JSON.parse(msg.payload).shorturl;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2330,
        "y": 1780,
        "wires": [
            [
                "94a715eb.8979a8"
            ]
        ]
    },
    {
        "id": "31180bc7.d911a4",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Extract KEYWORDS",
        "func": "///KEYWORDS\n//THESE WILL NEED TO GRAB THE ATTACHED KEYWORDS ARRAY FROM THE MSG, For unique users\n//with unique keywords.\n\n\n//There are manual entry for now\n//msg.keywords = [\"secureworks\",\"gartner\",\"herjavec group\",\"forrester\",\"techcrunch\"];\nmsg.keywords = msg.original.keywords;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1220,
        "y": 1820,
        "wires": [
            [
                "eb09f688.2fe2f8"
            ]
        ]
    },
    {
        "id": "6db738d.92685c8",
        "type": "function",
        "z": 0,
        "name": "Filter 3.0 ",
        "func": "//future filter words will be set by users\n//picked keywords, attached to user object \n//that will be passed into this function to\n//then check the keywords and package the \n// 'Alerts'\n\n//output 1 match\n\n//output 2 no match\n\n\n//incoming payload \n//this payload will have user.keywords[] array of keywords\n\n/** Function that count occurrences of a substring in a string;\n * @param {String} string               The string\n * @param {String} subString            The sub string to search for\n * @param {Boolean} [allowOverlapping]  Optional. (Default:false)\n *\n * @author Vitim.us https://gist.github.com/victornpb/7736865\n * @see Unit Test https://jsfiddle.net/Victornpb/5axuh96u/\n * @see http://stackoverflow.com/questions/4009756/how-to-count-string-occurrence-in-string/7924240#7924240\n */\nfunction occurrences(string, subString, allowOverlapping) {\n\n    string += \"\";\n    subString += \"\";\n    if (subString.length <= 0) return (string.length + 1);\n\n    var n = 0,\n        pos = 0,\n        step = allowOverlapping ? 1 : subString.length;\n\n    while (true) {\n        pos = string.indexOf(subString, pos);\n        if (pos >= 0) {\n            ++n;\n            pos += step;\n        } else break;\n    }\n    return n;\n}\n\n\n //msg.payload = occurrences('msg.checkjson', \"threat\", false);\n// return msg\n\n\n\n\n\n//THESE WILL NEED TO GRAB THE ATTACHED KEYWORDS ARRAY FROM THE MSG, For unique users\n//with unique keywords.\nconst keywords = [\"secureworks\",\"gartner\",\"herjavec group\",\"forrester\",\"techcrunch\"];\n\nmsg.feedinfo = {\n    \"matched_keywords\" : [],\n    \"matched_count\":0,\n}\n\nkeywords.forEach(kw => {\n    var count = occurrences(msg.checkjson,kw, false);\n    if(count > 0){\n        msg.feedinfo.matched_keywords.push({\"name\": kw, \"counts\": count });\n    }\n});\n\nmsg.subject = msg.feedinfo.matched_keywords;\nmsg.feedinfo.matched_count= msg.feedinfo.matched_keywords.length;\n\nif(msg.feedinfo.matched_keywords.length > 0){\n    return [msg,null];\n} else {\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 260,
        "y": 3060,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "b382030a.371b2",
        "type": "comment",
        "z": 0,
        "name": "Old Filter",
        "info": "",
        "x": 260,
        "y": 3020,
        "wires": []
    },
    {
        "id": "2496489.48e40b8",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1010,
        "y": 200,
        "wires": []
    },
    {
        "id": "200fcf8e.18406",
        "type": "catch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 760,
        "y": 200,
        "wires": [
            [
                "2496489.48e40b8"
            ]
        ]
    },
    {
        "id": "5bdf36f3.d73a78",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "CATCH ALL ERRORS DEBUGGING",
        "info": "",
        "x": 980,
        "y": 160,
        "wires": []
    },
    {
        "id": "d10a40aa.3fe1d",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "SecureWorks",
        "info": "",
        "x": 250,
        "y": 200,
        "wires": []
    },
    {
        "id": "5b567762.f7bc48",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "set RSS Topic to msg.subject",
        "func": "//Modify these lines to make a label for your RSS feeds.\nmsg.subject = \"SecureWorks RSS\";\nmsg.sourcey = \"Advisories\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 530,
        "y": 300,
        "wires": [
            [
                "be4e05d3.d5b088"
            ]
        ]
    },
    {
        "id": "266dbf59.3d2d9",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "set RSS Topic to msg.subject",
        "func": "//Modify these lines to make a label for your RSS feeds.\nmsg.subject = \"SecureWorks\";\nmsg.sourcey = \"SecureWorks RSS: Threat Analysis\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 260,
        "wires": [
            [
                "be4e05d3.d5b088"
            ]
        ]
    },
    {
        "id": "71ea6e1a.3146f",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "set RSS Topic to msg.subject",
        "func": "//Modify these lines to make a label for your RSS feeds.\nmsg.subject = \"SecureWorks\";\nmsg.sourcey = \"SecureWorks RSS: Research\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 220,
        "wires": [
            [
                "be4e05d3.d5b088"
            ]
        ]
    },
    {
        "id": "be4e05d3.d5b088",
        "type": "link out",
        "z": "e5b2e67a.fda9d8",
        "name": "SecureWorks",
        "links": [
            "81efd8fc.04a6c8",
            "a833b358.8f9ef"
        ],
        "x": 1075,
        "y": 280,
        "wires": []
    },
    {
        "id": "80f6a69f.245ea8",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "set RSS Topic to msg.subject",
        "func": "//Modify these lines to make a label for your RSS feeds.\nmsg.subject = \"SecureWorks\";\nmsg.sourcey = \"News Releases\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 340,
        "wires": [
            [
                "be4e05d3.d5b088"
            ]
        ]
    },
    {
        "id": "97317153.7c695",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "SecureWorks - Advisories",
        "url": "https://www.secureworks.com/rss?feed=research&category=advisories",
        "interval": "15",
        "x": 198,
        "y": 344,
        "wires": [
            [
                "5b567762.f7bc48"
            ]
        ]
    },
    {
        "id": "900d1710.0588e8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "secureworks.com/rss/news-releases: RSS",
        "url": "https://investors.secureworks.com/rss/news-releases.xml",
        "interval": "15",
        "x": 248,
        "y": 384,
        "wires": [
            [
                "80f6a69f.245ea8"
            ]
        ]
    },
    {
        "id": "614a78cd.8aefd8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "SecureWorks - Threat Analysis",
        "url": "https://www.secureworks.com/rss?feed=research&category=threat-analysis",
        "interval": "15",
        "x": 218,
        "y": 304,
        "wires": [
            [
                "266dbf59.3d2d9"
            ]
        ]
    },
    {
        "id": "c2e51067.81292",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "SecureWorks - Research",
        "url": "https://www.secureworks.com/rss?feed=research",
        "interval": "15",
        "x": 198,
        "y": 264,
        "wires": [
            [
                "71ea6e1a.3146f"
            ]
        ]
    },
    {
        "id": "88f8d257.26dd6",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "newswire : RSS",
        "url": "https://www.newswire.com/newsroom/rss/all",
        "interval": "15",
        "x": 1380,
        "y": 220,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "47cb161c.6616e8",
        "type": "link out",
        "z": "e5b2e67a.fda9d8",
        "name": "Various Misc Feeds",
        "links": [
            "81efd8fc.04a6c8",
            "a833b358.8f9ef"
        ],
        "x": 1715,
        "y": 180,
        "wires": []
    },
    {
        "id": "e66f6a52.d323b8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "pr : RSS",
        "url": "https://www.pr.com/rss/press-releases.xml",
        "interval": "15",
        "x": 1360,
        "y": 260,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "4e7591e0.55056",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "feedburner : RSS",
        "url": "http://feeds.feedburner.com/openpr/pNuc",
        "interval": "15",
        "x": 1380,
        "y": 300,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "73510db7.23f334",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "1888pressrelease.com : RSS",
        "url": "https://www.1888pressrelease.com/rss/today-press-release.xml",
        "interval": "15",
        "x": 1420,
        "y": 340,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "cd8245e1.800bb8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "webwire : RSS",
        "url": "http://rssfeeds.webwire.com/webwire-recentheadlines",
        "interval": "15",
        "x": 1380,
        "y": 380,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "51b179df.732c28",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "feedburner issuewire MRHR : RSS",
        "url": "http://feeds.feedburner.com/issuewire/MRHR",
        "interval": "15",
        "x": 1320,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "eb3f8086.9c5d",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prunderground.com/feed/ : RSS",
        "url": "https://www.prunderground.com/feed/",
        "interval": "15",
        "x": 1430,
        "y": 460,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "64886fab.09893",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "webwire : RSS",
        "url": "http://rssfeeds.webwire.com/webwire-recentheadlines",
        "interval": "15",
        "x": 1380,
        "y": 500,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "8b67d80a.1579e8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "emailwire.com : RSS",
        "url": "http://emailwire.com/feeds/pr_feeds.php?protocol=rss",
        "interval": "15",
        "x": 1390,
        "y": 540,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "90ee1efe.72cef",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "acnnewswire.com/rss : RSS",
        "url": "http://en.acnnewswire.com/rss/rss_eng.asp",
        "interval": "15",
        "x": 1420,
        "y": 580,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "a7d8a378.faf83",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "/express-press-release.net : RSS",
        "url": "https://express-press-release.net/news/feed",
        "interval": "15",
        "x": 1430,
        "y": 620,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "e9a0c9bd.433e48",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "pressat.co.uk/rss/ : RSS",
        "url": "https://pressat.co.uk/rss",
        "interval": "15",
        "x": 1890,
        "y": 380,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "bf2ae3e2.e6316",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "/express-press-release.net : RSS",
        "url": "https://prmac.com/rss",
        "interval": "15",
        "x": 1910,
        "y": 340,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "8e5311b2.23cdf",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "pr-inside.com/rss/ : RSS",
        "url": "https://www.pr-inside.com/rss/",
        "interval": "15",
        "x": 1890,
        "y": 300,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "90484542.d316c8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": ".feedburner.com/prurgent : RSS",
        "url": "http://feeds.feedburner.com/prurgent/AJQE",
        "interval": "15",
        "x": 1910,
        "y": 260,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "6fa85ae3.f65a14",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "marketpressrelease : RSS",
        "url": "https://www.marketpressrelease.com/rss2",
        "interval": "15",
        "x": 1890,
        "y": 220,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "74dad717.0093d8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "eprnews.com : RSS",
        "url": "https://eprnews.com/feed/",
        "interval": "15",
        "x": 1390,
        "y": 660,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "5cc87890.192938",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "enewswire.co.uk/feed/ : RSS",
        "url": "https://www.enewswire.co.uk/feed/",
        "interval": "15",
        "x": 1900,
        "y": 420,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "4fe71ad0.9b5b74",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "feedburner/HNyGg : RSS",
        "url": "http://feeds.feedburner.com/feedburner/HNyGg",
        "interval": "15",
        "x": 1890,
        "y": 460,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "ca06040.11779",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "Google Alert Feeds: RSS",
        "url": "https://www.google.com/alerts/feeds/17754263364051502122/503428130534514948",
        "interval": "15",
        "x": 1870,
        "y": 500,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "bf3629f9.23af28",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "Google Alert Feeds: RSS",
        "url": "https://www.google.com/alerts/feeds/17754263364051502122/2754496621275726113",
        "interval": "15",
        "x": 1890,
        "y": 540,
        "wires": [
            [
                "47cb161c.6616e8"
            ]
        ]
    },
    {
        "id": "f306e481.2ee258",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "Virtual Wire to the Feeds Inlet",
        "info": "",
        "x": 1040,
        "y": 780,
        "wires": []
    },
    {
        "id": "5b732f53.3a357",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire news-releases-list RSS",
        "url": "https://www.prnewswire.com/rss/news-releases-list.rss",
        "interval": "1",
        "x": 200,
        "y": 560,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "16ef269a.2f9599",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire : latest news : RSS",
        "url": "https://www.prnewswire.com/rss/automotive-transportation-latest-news.rss",
        "interval": "15",
        "x": 230,
        "y": 600,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "b1c69df9.039f5",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire : latest news list : RSS",
        "url": "https://www.prnewswire.com/rss/business-technology-latest-news/business-technology-latest-news-list.rss",
        "interval": "15",
        "x": 240,
        "y": 640,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "7628bda2.8c8234",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire product retail list RSS",
        "url": "https://www.prnewswire.com/rss/consumer-products-retail-latest-news/consumer-products-retail-latest-news-list.rss",
        "interval": "15",
        "x": 240,
        "y": 680,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "7981f81.e520408",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire : consumer tech : RSS",
        "url": "https://www.prnewswire.com/rss/entertainment-media-latest-news/entertainment-media-latest-news-list.rss",
        "interval": "15",
        "x": 240,
        "y": 720,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "3973ee92.4d74e2",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire financial-services-latest-news: RSS",
        "url": " https://www.prnewswire.com/rss/financial-services-latest-news.rss",
        "interval": "15",
        "x": 280,
        "y": 760,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "97b92153.0de55",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "PRNewsWire",
        "info": "",
        "x": 170,
        "y": 520,
        "wires": []
    },
    {
        "id": "235c671c.0aa2c8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire environment-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/environment-latest-news/environment-latest-news-list.rss",
        "interval": "15",
        "x": 280,
        "y": 800,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "f6f72c84.2d6a3",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire general-business-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/general-business-latest-news/general-business-latest-news-list.rss",
        "interval": "15",
        "x": 290,
        "y": 840,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "d54a1601.ed24c8",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire heavy-industry-manufacturing-latest-news/heavy-industry-manufacturing-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/heavy-industry-manufacturing-latest-news/heavy-industry-manufacturing-latest-news-list.rss",
        "interval": "15",
        "x": 470,
        "y": 880,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "d01ff5e7.759d18",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire https://www.prnewswire.com/rss/health-latest-news/health-latest-news-list: RSS",
        "url": "https://www.prnewswire.com/rss/health-latest-news/health-latest-news-list.rss",
        "interval": "15",
        "x": 420,
        "y": 920,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "16caa828.27c808",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire health-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/health-latest-news/health-latest-news-list.rss",
        "interval": "15",
        "x": 260,
        "y": 960,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "12c297a9.1c8f68",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire general-business-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/general-business-latest-news/general-business-latest-news-list.rss",
        "interval": "15",
        "x": 290,
        "y": 1000,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "62baacce.0267d4",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire multicultural-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/multicultural-latest-news/multicultural-latest-news-list.rss",
        "interval": "15",
        "x": 280,
        "y": 1040,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "2223ee5.b259012",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire policy-public-interest-latest-news-list. : RSS",
        "url": "https://www.prnewswire.com/rss/policy-public-interest-latest-news/policy-public-interest-latest-news-list.rss",
        "interval": "15",
        "x": 310,
        "y": 1080,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "6e8ed01c.be562",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire sports-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/sports-latest-news/sports-latest-news-list.rss",
        "interval": "15",
        "x": 260,
        "y": 1120,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "73112040.08dff",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire telecommunications-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/telecommunications-latest-news/telecommunications-latest-news-list.rss",
        "interval": "15",
        "x": 300,
        "y": 1160,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "125eac20.704724",
        "type": "feedparse",
        "z": "e5b2e67a.fda9d8",
        "name": "prnewswire  travel-latest-news-list : RSS",
        "url": "https://www.prnewswire.com/rss/travel-latest-news/travel-latest-news-list.rss",
        "interval": "15",
        "x": 250,
        "y": 1200,
        "wires": [
            [
                "a599238a.07a4f"
            ]
        ]
    },
    {
        "id": "a599238a.07a4f",
        "type": "link out",
        "z": "e5b2e67a.fda9d8",
        "name": "PR News Wire",
        "links": [
            "81efd8fc.04a6c8",
            "a833b358.8f9ef"
        ],
        "x": 1015,
        "y": 880,
        "wires": []
    },
    {
        "id": "d6086977.f833d8",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "THESE WERE THE BETA TESTING FEEDS",
        "info": "",
        "x": 260,
        "y": 80,
        "wires": []
    },
    {
        "id": "db2788db.59fb78",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "topic": "",
        "payload": "test",
        "payloadType": "str",
        "repeat": "300",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 170,
        "y": 600,
        "wires": [
            [
                "b735f972.da7008"
            ]
        ]
    },
    {
        "id": "7b281ec3.c76e",
        "type": "mongodb in",
        "z": "d04ea5a4.8bc1e8",
        "mongodb": "8f55ecde.6f0a8",
        "name": "Get All Subscriptions from DB",
        "collection": "subscriptions",
        "operation": "find",
        "x": 230,
        "y": 680,
        "wires": [
            [
                "7b5f6307.6df49c"
            ]
        ]
    },
    {
        "id": "b735f972.da7008",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Get All Subscriptions (DB Query)",
        "func": "msg.payload = {};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 240,
        "y": 640,
        "wires": [
            [
                "7b281ec3.c76e"
            ]
        ]
    },
    {
        "id": "7b5f6307.6df49c",
        "type": "split",
        "z": "d04ea5a4.8bc1e8",
        "name": "split each Subscription in db",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "payload",
        "x": 220,
        "y": 720,
        "wires": [
            [
                "ebdc864d.817248"
            ]
        ]
    },
    {
        "id": "7e2c446a.edf0ec",
        "type": "split",
        "z": "d04ea5a4.8bc1e8",
        "name": "Split all the kwset URLS.",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 210,
        "y": 800,
        "wires": [
            [
                "2de34ad2.763066"
            ]
        ]
    },
    {
        "id": "ebdc864d.817248",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "preserve original",
        "func": "msg.original = msg.payload;\nmsg.payload = msg.payload.kwset;\n//msg.keywords = msg.payload.keywords;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 180,
        "y": 760,
        "wires": [
            [
                "7e2c446a.edf0ec"
            ]
        ]
    },
    {
        "id": "2de34ad2.763066",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "RSS feed link to topic",
        "func": "msg.kwset = msg.payload;\nmsg.payload = msg.payload.feed;\nmsg.url = msg.kwset.feed;\nmsg.userid = msg.original.userid;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 840,
        "wires": [
            [
                "71266db2.33c304"
            ]
        ]
    },
    {
        "id": "f3b9a104.e03fc",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Subscriptions feed checker",
        "info": "",
        "x": 200,
        "y": 460,
        "wires": []
    },
    {
        "id": "8705414c.127a1",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "for labelling",
        "func": "\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2350,
        "y": 1100,
        "wires": [
            [
                "243c9bdd.d1c354"
            ]
        ]
    },
    {
        "id": "39d3ce2.fcc2532",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "article.title",
        "func": "msg.article = {}; //init article\nmsg.article.title = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1550,
        "y": 740,
        "wires": [
            [
                "c552b7b8.cfb088"
            ]
        ]
    },
    {
        "id": "24dbcfa6.98ead",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "title",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 1330,
        "y": 740,
        "wires": [
            [
                "39d3ce2.fcc2532"
            ]
        ]
    },
    {
        "id": "5b5e2ef8.d63df",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "init article",
        "info": "",
        "x": 2000,
        "y": 900,
        "wires": []
    },
    {
        "id": "4246147c.454fcc",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "article.description",
        "func": " //init article\nmsg.article.content = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1550,
        "y": 780,
        "wires": [
            [
                "a0354ce5.cebaa",
                "6194103e.3a0c"
            ]
        ]
    },
    {
        "id": "c552b7b8.cfb088",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "content",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 1380,
        "y": 780,
        "wires": [
            [
                "4246147c.454fcc"
            ]
        ]
    },
    {
        "id": "6c8b23d7.d2fc2c",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "orig item preserve",
        "func": "msg.originalitem = msg.payload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1330,
        "y": 700,
        "wires": [
            [
                "24dbcfa6.98ead"
            ]
        ]
    },
    {
        "id": "d1ce00f0.5db2d",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "article.link",
        "func": " //init article\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1620,
        "y": 820,
        "wires": [
            [
                "6bae82c0.bbae4c",
                "6194103e.3a0c"
            ]
        ]
    },
    {
        "id": "cc232b5e.c56d28",
        "type": "http request",
        "z": "d04ea5a4.8bc1e8",
        "name": "Get Source Data",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 1930,
        "y": 1100,
        "wires": [
            [
                "96887fba.73817"
            ]
        ]
    },
    {
        "id": "17432010.c88bb",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "check the link provided",
        "info": "",
        "x": 1920,
        "y": 1060,
        "wires": []
    },
    {
        "id": "5cce7e9a.27ace",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "make msg.url = article.link",
        "func": "msg.url = msg.article.link;\n\n// if(typeof(msg.article.link)!== undefined ){\n//     msg.url = msg.article.link;\n//   return [ msg,null]; \n// }else {\n//     return [null,msg];\n// }\n\n\nmsg.headers = {\n    \"connection\":\"keep-alive\",\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1700,
        "y": 980,
        "wires": [
            [
                "cc232b5e.c56d28"
            ]
        ]
    },
    {
        "id": "96887fba.73817",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "strip the html of all urls",
        "func": "msg.tocheck = msg.payload;\nmsg.tocheck.replace(/(?:https?|ftp):\\/\\/[\\n\\S]+/g, '');\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2140,
        "y": 1100,
        "wires": [
            [
                "8705414c.127a1"
            ]
        ]
    },
    {
        "id": "243c9bdd.d1c354",
        "type": "link out",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "links": [
            "fb2c4f36.601a9"
        ],
        "x": 2475,
        "y": 1080,
        "wires": []
    },
    {
        "id": "541f57b5.f0c018",
        "type": "delay",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "3",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1930,
        "y": 940,
        "wires": [
            [
                "5cce7e9a.27ace"
            ]
        ]
    },
    {
        "id": "a0354ce5.cebaa",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Get <link> URL ***",
        "func": "msg.payload =  msg.payload.substring( msg.payload.indexOf('<link href=\"'), msg.payload.indexOf('\"/>'));\nmsg.substringLink = msg.payload;\n\nmsg.payload = msg.payload.substring(msg.payload.indexOf('url=') +  4, msg.payload.length );\nmsg.substringParse1 = msg.payload;\n\nmsg.payload = msg.payload.substring(0, msg.payload.indexOf('&amp'));\nmsg.substringParse2 = msg.payload;\n\n\nmsg.sourceurl = msg.payload\nmsg.article.link = msg.sourceurl;\nmsg.payload = msg.originalitem;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1450,
        "y": 820,
        "wires": [
            [
                "d1ce00f0.5db2d"
            ]
        ]
    },
    {
        "id": "ade0f889.de0488",
        "type": "inject",
        "z": 0,
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1920,
        "y": 460,
        "wires": [
            [
                "dfef8272.fe3ca"
            ]
        ]
    },
    {
        "id": "dfef8272.fe3ca",
        "type": "function",
        "z": 0,
        "name": "Bank of Array XML Feeds",
        "func": "const thearray = ['https://www.prweb.com/xml/aecountrymusic.xml','https://www.prweb.com/xml/9910celebrities.xml','https://www.prweb.com/xml/artbooks.xml','https://www.prweb.com/xml/entertainment.xml','https://www.prweb.com/xml/9912dance.xml','https://www.prweb.com/xml/fineart.xml','https://www.prweb.com/xml/aemagazines.xml','https://www.prweb.com/xml/aemovies.xml','https://www.prweb.com/xml/aemuseums.xml','https://www.prweb.com/xml/music.xml','https://www.prweb.com/xml/ipodmp3.xml','https://www.prweb.com/xml/aenewstalk.xml','https://www.prweb.com/xml/aeperforming.xml','https://www.prweb.com/xml/9914photography.xml','https://www.prweb.com/xml/television.xml','https://www.prweb.com/xml/aevideogames.xml','https://www.prweb.com/xml/aewebsites.xml','https://www.prweb.com/xml/automotive.xml','https://www.prweb.com/xml/autoaftermkt.xml','https://www.prweb.com/xml/autoclassic.xml','https://www.prweb.com/xml/autoconsumerpubs.xml','https://www.prweb.com/xml/autobike.xml','https://www.prweb.com/xml/autoracing.xml','https://www.prweb.com/xml/autorv.xml','https://www.prweb.com/xml/autorepair.xml','https://www.prweb.com/xml/autotrades.xml','https://www.prweb.com/xml/business.xml','https://www.prweb.com/xml/advertising.xml','https://www.prweb.com/xml/bizbooks.xml','https://www.prweb.com/xml/9916consumerresearch.xml','https://www.prweb.com/xml/bizcorp.xml','https://www.prweb.com/xml/9918directmarketing.xml','https://www.prweb.com/xml/bizecomm.xml','https://www.prweb.com/xml/economy.xml','https://www.prweb.com/xml/employmentcareers.xml','https://www.prweb.com/xml/9920entrepreneurs.xml','https://www.prweb.com/xml/nbizexecs.xml','https://www.prweb.com/xml/finance.xml','https://www.prweb.com/xml/franchise.xml','https://www.prweb.com/xml/bizhr.xml','https://www.prweb.com/xml/bizinsurance.xml','https://www.prweb.com/xml/investment.xml','https://www.prweb.com/xml/9920bizmanagement.xml','https://www.prweb.com/xml/markets.xml','https://www.prweb.com/xml/nbizacquire.xml','https://www.prweb.com/xml/mlm.xml','https://www.prweb.com/xml/nbizequity.xml','https://www.prweb.com/xml/biz_pubcom.xml','https://www.prweb.com/xml/bizpubs.xml','https://www.prweb.com/xml/realestate.xml','https://www.prweb.com/xml/retail.xml','https://www.prweb.com/xml/smallbiz.xml','https://www.prweb.com/xml/bizstartup.xml','https://www.prweb.com/xml/stocks.xml','https://www.prweb.com/xml/supermarkets.xml','https://www.prweb.com/xml/trade.xml','https://www.prweb.com/xml/businesstravel.xml','https://www.prweb.com/xml/consumerwww.xml','https://www.prweb.com/xml/9924bizwomen.xml','https://www.prweb.com/xml/communiques.xml','https://www.prweb.com/xml/computers.xml','https://www.prweb.com/xml/computermacintosh.xml','https://www.prweb.com/xml/computerdatabases.xml','https://www.prweb.com/xml/computergames.xml','https://www.prweb.com/xml/computerinstruction.xml','https://www.prweb.com/xml/opensource.xml','https://www.prweb.com/xml/computermicrosotwindowspc.xml','https://www.prweb.com/xml/computeros.xml','https://www.prweb.com/xml/computerprogram.xml','https://www.prweb.com/xml/computersecurity.xml','https://www.prweb.com/xml/software.xml','https://www.prweb.com/xml/computerutilities.xml','https://www.prweb.com/xml/education.xml','https://www.prweb.com/xml/educollege.xml','https://www.prweb.com/xml/homeschooling.xml','https://www.prweb.com/xml/eduk12.xml','https://www.prweb.com/xml/edupostgrad.xml','https://www.prweb.com/xml/edutech.xml','https://www.prweb.com/xml/environment.xml','https://www.prweb.com/xml/eventstradeshows.xml','https://www.prweb.com/xml/government.xml','https://www.prweb.com/xml/govedu.xml','https://www.prweb.com/xml/elections.xml','https://www.prweb.com/xml/enviroregs.xml','https://www.prweb.com/xml/govbudget.xml','https://www.prweb.com/xml/foreignconflict.xml','https://www.prweb.com/xml/foriengpolicy.xml','https://www.prweb.com/xml/9940governmentjudicial.xml','https://www.prweb.com/xml/govlaw.xml','https://www.prweb.com/xml/govlaw.xml','https://www.prweb.com/xml/govlegislative.xml','https://www.prweb.com/xml/govlocal.xml','https://www.prweb.com/xml/9962military.xml','https://www.prweb.com/xml/govnational.xml','https://www.prweb.com/xml/politics.xml','https://www.prweb.com/xml/govpublicsvc.xml','https://www.prweb.com/xml/9942govsecurity.xml','https://www.prweb.com/xml/govstate.xml','https://www.prweb.com/xml/govtransport.xml','https://www.prweb.com/xml/medical.xml','https://www.prweb.com/xml/medicalabortion.xml','https://www.prweb.com/xml/9954addiction.xml','https://www.prweb.com/xml/9956allergies.xml','https://www.prweb.com/xml/medaltmed.xml','https://www.prweb.com/xml/medasthma.xml','https://www.prweb.com/xml/medcancer.xml','https://www.prweb.com/xml/medcardiology.xml','https://www.prweb.com/xml/medchiropractic.xml','https://www.prweb.com/xml/meddental.xml','https://www.prweb.com/xml/meddermatology.xml','https://www.prweb.com/xml/meddiabetes.xml','https://www.prweb.com/xml/med911.xml','https://www.prweb.com/xml/medfamily.xml','https://www.prweb.com/xml/medgeneral.xml','https://www.prweb.com/xml/medgeriatrics.xml','https://www.prweb.com/xml/medhospitals.xml','https://www.prweb.com/xml/meddisease.xml','https://www.prweb.com/xml/medim.xml','https://www.prweb.com/xml/medhmo.xml','https://www.prweb.com/xml/medproducts.xml','https://www.prweb.com/xml/medmentalhealth.xml','https://www.prweb.com/xml/medneurology.xml','https://www.prweb.com/xml/mednursing.xml','https://www.prweb.com/xml/mednutrition.xml','https://www.prweb.com/xml/medobgyn.xml','https://www.prweb.com/xml/9966occupationalsafety.xml','https://www.prweb.com/xml/medpediatrics.xml','https://www.prweb.com/xml/pharmaceuticals.xml','https://www.prweb.com/xml/medpt.xml','http://prweb.com/xml/9958plasticsurgery.xml','https://www.prweb.com/xml/9970psychology.xml','https://www.prweb.com/xml/medimaging.xml','https://www.prweb.com/xml/medresearch.xml','https://www.prweb.com/xml/9960sportsmedicine.xml','https://www.prweb.com/xml/medsurgery.xml','https://www.prweb.com/xml/veterinary.xml','https://www.prweb.com/xml/medvision.xml','https://www.prweb.com/xml/home.xml','https://www.prweb.com/xml/homefinance.xml','https://www.prweb.com/xml/9978loss.xml','https://www.prweb.com/xml/homeinteriors.xml','https://www.prweb.com/xml/landscapinggardening.xml','https://www.prweb.com/xml/9944marriage.xml','https://www.prweb.com/xml/9964money.xml','https://www.prweb.com/xml/homeparenting.xml','https://www.prweb.com/xml/9968pets.xml','https://www.prweb.com/xml/9946taxes.xml','https://www.prweb.com/xml/weddingbridal.xml','https://www.prweb.com/xml/industry.xml','https://www.prweb.com/xml/aerospacedefense.xml','https://www.prweb.com/xml/agriculture.xml','https://www.prweb.com/xml/enviroalt.xml','https://www.prweb.com/xml/appareltextiles.xml','https://www.prweb.com/xml/architectural.xml','https://www.prweb.com/xml/construction.xml','https://www.prweb.com/xml/indelectrical.xml','https://www.prweb.com/xml/enviroenergy.xml','https://www.prweb.com/xml/9936engineering.xml','https://www.prweb.com/xml/indfood.xml','https://www.prweb.com/xml/foodsafety.xml','https://www.prweb.com/xml/9938fraud.xml','https://www.prweb.com/xml/indfuneral.xml','https://www.prweb.com/xml/gaming.xml','https://www.prweb.com/xml/healthcare.xml','https://www.prweb.com/xml/insurance.xml','https://www.prweb.com/xml/leisurehospitality.xml','https://www.prweb.com/xml/indlogistics.xml','https://www.prweb.com/xml/machinery.xml','https://www.prweb.com/xml/manucacturing.xml','https://www.prweb.com/xml/maritime.xml','https://www.prweb.com/xml/miningmetals.xml','https://www.prweb.com/xml/nonprofit.xml','https://www.prweb.com/xml/oilenergy.xml','https://www.prweb.com/xml/paperforestproducts.xml','https://www.prweb.com/xml/indphvac.xml','https://www.prweb.com/xml/utilities.xml','https://www.prweb.com/xml/restaurants.xml','https://www.prweb.com/xml/telecom.xml','https://www.prweb.com/xml/tobacco.xml','https://www.prweb.com/xml/indtoy.xml','https://www.prweb.com/xml/transportation.xml','https://www.prweb.com/xml/ireacharchive.xml','https://www.prweb.com/xml/legal.xml','https://www.prweb.com/xml/law_attorneys.xml','https://www.prweb.com/xml/law_cr.xml','https://www.prweb.com/xml/law_gl.xml','https://www.prweb.com/xml/law_ip.xml','https://www.prweb.com/xml/law_firms.xml','https://www.prweb.com/xml/law_pi.xml','https://www.prweb.com/xml/law_re.xml','https://www.prweb.com/xml/lifestyle.xml','https://www.prweb.com/xml/lsbeauty.xml','https://www.prweb.com/xml/9926coaching.xml','https://www.prweb.com/xml/consumer.xml','https://www.prweb.com/xml/9950datingsingles.xml','https://www.prweb.com/xml/9952diet.xml','https://www.prweb.com/xml/lsfashion.xml','https://www.prweb.com/xml/foodbeverage.xml','https://www.prweb.com/xml/lshealthfitness.xml','https://www.prweb.com/xml/consumerhobbies.xml','https://www.prweb.com/xml/hotelresorts.xml','https://www.prweb.com/xml/lspastimes.xml','https://www.prweb.com/xml/lsrestaurants.xml','https://www.prweb.com/xml/lsretire.xml','https://www.prweb.com/xml/9972personalgrowth.xml','https://www.prweb.com/xml/travel.xml','https://www.prweb.com/xml/media.xml','https://www.prweb.com/xml/blogging.xml','https://www.prweb.com/xml/indbroadcast.xml','https://www.prweb.com/xml/9928design.xml','https://www.prweb.com/xml/9930graphicdesign.xml','https://www.prweb.com/xml/9932industrialdesign.xml','https://www.prweb.com/xml/9976seo.xml','https://www.prweb.com/xml/podcasting.xml','https://www.prweb.com/xml/9948printingindustry.xml','https://www.prweb.com/xml/printmedia.xml','https://www.prweb.com/xml/bizpr.xml','https://www.prweb.com/xml/publishing.xml','https://www.prweb.com/xml/radio.xml','https://www.prweb.com/xml/rsscontentsyndication.xml','https://www.prweb.com/xml/9934webdesign.xml','https://www.prweb.com/xml/miscellaneous.xml','https://www.prweb.com/xml/opinion.xml','https://www.prweb.com/xml/podcastingannounce.xml','https://www.prweb.com/xml/podcastingtools.xml','https://www.prweb.com/xml/religionother.xml','https://www.prweb.com/xml/scienceresearch.xml','https://www.prweb.com/xml/sciastr.xml','https://www.prweb.com/xml/scibi.xml','https://www.prweb.com/xml/biotechnology.xml','https://www.prweb.com/xml/chemical.xml','https://www.prweb.com/xml/nanotechnology.xml','https://www.prweb.com/xml/sciphys.xml','https://www.prweb.com/xml/weather.xml','https://www.prweb.com/xml/society.xml','https://www.prweb.com/xml/societyaffirm.xml','https://www.prweb.com/xml/socafricanamerican.xml','https://www.prweb.com/xml/americapost911.xml','https://www.prweb.com/xml/enviroanimal.xml','https://www.prweb.com/xml/socasian.xml','https://www.prweb.com/xml/societychildren.xml','https://www.prweb.com/xml/religionchristian.xml','https://www.prweb.com/xml/civilrights.xml','https://www.prweb.com/xml/societycrime.xml','https://www.prweb.com/xml/deathpenalty.xml','https://www.prweb.com/xml/9980disabled.xml','https://www.prweb.com/xml/socgay.xml','https://www.prweb.com/xml/envirowarm.xml','https://www.prweb.com/xml/societygun.xml','https://www.prweb.com/xml/sochispanic.xml','https://www.prweb.com/xml/humanrights.xml','https://www.prweb.com/xml/religionislam.xml','https://www.prweb.com/xml/religionjewish.xml','https://www.prweb.com/xml/socmen.xml','https://www.prweb.com/xml/societynativeamerican.xml','https://www.prweb.com/xml/enivroresource.xml','https://www.prweb.com/xml/10254socpeople.xml','https://www.prweb.com/xml/religion.xml','https://www.prweb.com/xml/socseniors.xml','https://www.prweb.com/xml/societyss.xml','https://www.prweb.com/xml/religion_spirituality.xml','https://www.prweb.com/xml/socteen.xml','https://www.prweb.com/xml/volunteer.xml','https://www.prweb.com/xml/societywomen.xml','https://www.prweb.com/xml/sports.xml','https://www.prweb.com/xml/sportsbaseball.xml','https://www.prweb.com/xml/sportsbasketball.xml','https://www.prweb.com/xml/sportsbike.xml','https://www.prweb.com/xml/sportsboat.xml','https://www.prweb.com/xml/sportsbowling.xml','https://www.prweb.com/xml/sportsboxing.xml','https://www.prweb.com/xml/sportfootball.xml','https://www.prweb.com/xml/sportsgolf.xml','https://www.prweb.com/xml/sportshockey.xml','https://www.prweb.com/xml/sportshunting.xml','https://www.prweb.com/xml/sportsmartialarts.xml','https://www.prweb.com/xml/sportsolympics.xml','https://www.prweb.com/xml/sportsoutdoors.xml','https://www.prweb.com/xml/sportsrugby.xml','https://www.prweb.com/xml/sportssoccer.xml','https://www.prweb.com/xml/sportswater.xml','https://www.prweb.com/xml/sportswinter.xml','https://www.prweb.com/xml/technology.xml','https://www.prweb.com/xml/techcomputer.xml','https://www.prweb.com/xml/electronics.xml','https://www.prweb.com/xml/techentsoftware.xml','https://www.prweb.com/xml/techgames.xml','https://www.prweb.com/xml/techprinting.xml','https://www.prweb.com/xml/techhardware.xml','https://www.prweb.com/xml/techindustrial.xml','https://www.prweb.com/xml/9974techinfo.xml','https://www.prweb.com/xml/internet.xml','https://www.prweb.com/xml/techmobile.xml','https://www.prweb.com/xml/techmultimedia.xml','https://www.prweb.com/xml/technano.xml','https://www.prweb.com/xml/technetworking.xml','https://www.prweb.com/xml/techgaming.xml','https://www.prweb.com/xml/techgov.xml','https://www.prweb.com/xml/techrobotics.xml','https://www.prweb.com/xml/electronicssemicond.xml','https://www.prweb.com/xml/techsoftware.xml','https://www.prweb.com/xml/techtelecom.xml','https://www.prweb.com/xml/webmasters.xml'];\nmsg.payload = thearray;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2050,
        "y": 460,
        "wires": [
            [
                "b990e597.85bbc8"
            ]
        ]
    },
    {
        "id": "b990e597.85bbc8",
        "type": "splitter",
        "z": 0,
        "name": "",
        "property": "payload",
        "x": 2190,
        "y": 520,
        "wires": [
            [
                "25343a9d.e392e6"
            ]
        ]
    },
    {
        "id": "e563c506.53c018",
        "type": "comment",
        "z": 0,
        "name": "prweb",
        "info": "",
        "x": 1870,
        "y": 420,
        "wires": []
    },
    {
        "id": "8851f5a9.bda4f8",
        "type": "inject",
        "z": 0,
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1920,
        "y": 580,
        "wires": [
            [
                "f5a2d731.2bff68"
            ]
        ]
    },
    {
        "id": "f5a2d731.2bff68",
        "type": "function",
        "z": 0,
        "name": "Bank of Array XML Feeds",
        "func": "const thearray = ['https://www.prweb.com/xml/aecountrymusic.xml'];\nmsg.payload = thearray;\nmsg.url=msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2070,
        "y": 580,
        "wires": [
            [
                "b990e597.85bbc8"
            ]
        ]
    },
    {
        "id": "9e12bbc8.253c78",
        "type": "comment",
        "z": 0,
        "name": "prweb short tester",
        "info": "",
        "x": 1970,
        "y": 540,
        "wires": []
    },
    {
        "id": "25343a9d.e392e6",
        "type": "debug",
        "z": 0,
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 2450,
        "y": 300,
        "wires": []
    },
    {
        "id": "681f2fa7.0bc79",
        "type": "comment",
        "z": 0,
        "name": "Non Essential Lobe (was for testing)",
        "info": "",
        "x": 1960,
        "y": 380,
        "wires": []
    },
    {
        "id": "c255c962.d2af78",
        "type": "inject",
        "z": 0,
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 480,
        "y": 1300,
        "wires": [
            [
                "7c9a0ace.33d5c4"
            ]
        ]
    },
    {
        "id": "7c9a0ace.33d5c4",
        "type": "function",
        "z": 0,
        "name": "Destroy old dupes in db collection",
        "func": "msg.collection  = \"feeds\"; //sets db collection to use\nmsg.payload = {} ;  // query to get all from db\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 720,
        "y": 1300,
        "wires": [
            [
                "271ddd34.7d65e2"
            ]
        ]
    },
    {
        "id": "271ddd34.7d65e2",
        "type": "mongodb in",
        "z": 0,
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "feeds",
        "operation": "find",
        "x": 1020,
        "y": 1300,
        "wires": [
            [
                "38596d64.0ead32"
            ]
        ]
    },
    {
        "id": "1383fa90.f47d45",
        "type": "debug",
        "z": 0,
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1390,
        "y": 1300,
        "wires": []
    },
    {
        "id": "c3c139ee.fa46c8",
        "type": "http in",
        "z": 0,
        "name": "",
        "url": "/check-feed-test",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 240,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "4a3b9335.a8351c",
        "type": "comment",
        "z": 0,
        "name": "in testing:",
        "info": "",
        "x": 200,
        "y": 1280,
        "wires": []
    },
    {
        "id": "38596d64.0ead32",
        "type": "splitter",
        "z": 0,
        "name": "",
        "property": "payload",
        "x": 1230,
        "y": 1300,
        "wires": [
            [
                "1383fa90.f47d45"
            ]
        ]
    },
    {
        "id": "af4ebd9c.1f381",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "article.published date",
        "func": " //init article\nmsg.article.published = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1640,
        "y": 860,
        "wires": [
            [
                "2093a3e2.46d28c"
            ]
        ]
    },
    {
        "id": "6bae82c0.bbae4c",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "published",
        "ret": "text",
        "as": "multi",
        "map": [
            {
                "search": "",
                "ret": "text",
                "replace": "",
                "attr": ""
            }
        ],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 1460,
        "y": 860,
        "wires": [
            [
                "af4ebd9c.1f381"
            ]
        ]
    },
    {
        "id": "d8546aae.adbd48",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "article.updated date",
        "func": " //init article\nmsg.article.updated = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1700,
        "y": 900,
        "wires": [
            [
                "8434c839.59c558"
            ]
        ]
    },
    {
        "id": "2093a3e2.46d28c",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "updated",
        "ret": "text",
        "as": "multi",
        "map": [
            {
                "search": "",
                "ret": "text",
                "replace": "",
                "attr": ""
            }
        ],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 1520,
        "y": 900,
        "wires": [
            [
                "d8546aae.adbd48"
            ]
        ]
    },
    {
        "id": "548a2773.a48758",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "article.description",
        "func": " //init article\nmsg.article.id = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1750,
        "y": 940,
        "wires": [
            [
                "541f57b5.f0c018"
            ]
        ]
    },
    {
        "id": "8434c839.59c558",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "id",
        "ret": "text",
        "as": "multi",
        "map": [
            {
                "search": "",
                "ret": "text",
                "replace": "",
                "attr": ""
            }
        ],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 1590,
        "y": 940,
        "wires": [
            [
                "548a2773.a48758"
            ]
        ]
    },
    {
        "id": "6a08414b.7582b",
        "type": "link in",
        "z": "d04ea5a4.8bc1e8",
        "name": "CHECK FEEDS in ALL SUBSCRIPTIONS",
        "links": [
            "314cdf0c.2e617",
            "2d675fe4.846e",
            "5cd2bd0.868e344",
            "3d440286.dc365e"
        ],
        "x": 55,
        "y": 620,
        "wires": [
            [
                "b735f972.da7008"
            ]
        ]
    },
    {
        "id": "b5a3d919.0028c8",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1550,
        "y": 400,
        "wires": []
    },
    {
        "id": "85d531e.e9fe4d",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "set queries",
        "func": "   msg.userid = msg.payload.userid;\n   //msg.payload = {\"trashed\": {$exists: false}, \"userid\":msg.payload.userid};\n    \n    msg.payload = {};\n   // msg.sort = {\"_id\": -1};\n    msg.feedsview = true;\n    return msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 300,
        "wires": [
            [
                "377c0b15.ce43c4"
            ]
        ]
    },
    {
        "id": "377c0b15.ce43c4",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "Set DB Settings",
        "func": "msg.db_url=\"mongodb://localhost:27017/\";\nmsg.db_name=\"carproj_db\";\nmsg.collection= \"USER_FEEDS_\" + msg.userid;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 500,
        "y": 300,
        "wires": [
            [
                "9ad57b5b.6d7cc8"
            ]
        ]
    },
    {
        "id": "eb3ed1a8.53eda",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Feed Checker db to client webpage",
        "info": "",
        "x": 200,
        "y": 260,
        "wires": []
    },
    {
        "id": "a83dcee9.56b6c",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/del",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 600,
        "wires": [
            [
                "8eaa955b.660d38"
            ]
        ]
    },
    {
        "id": "8bed1192.5071e",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 750,
        "y": 620,
        "wires": []
    },
    {
        "id": "8eaa955b.660d38",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "confirm del",
        "func": "msg.userid = msg.payload.userid;\nmsg.theid = msg.payload.del;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 270,
        "y": 600,
        "wires": [
            [
                "b802435e.a1ec5"
            ]
        ]
    },
    {
        "id": "5486b2a4.2de31c",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<div>deleted</div>",
        "output": "str",
        "x": 560,
        "y": 620,
        "wires": [
            [
                "8bed1192.5071e"
            ]
        ]
    },
    {
        "id": "43a80d33.c4e784",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "adjust for output",
        "func": "const notify = {\n    sms : flow.get('smsOnOff'),\n    email: flow.get('emailOnOff')\n}\n\nif(notify.sms == \"off\"){\n    notify.sms = null;\n}\nif(notify.email == \"off\"){\n    notify.email = null;\n}\n\nmsg.notify = notify;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1040,
        "y": 400,
        "wires": [
            [
                "38e6eb69.a2e5a4"
            ]
        ]
    },
    {
        "id": "b802435e.a1ec5",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "remove id",
        "func": "//msg.payload = {\"_id\": msg.theid};\nmsg.query = {\"_id\": msg.theid};\nmsg.payload = {$set:{ \"trashed\": true  } };\nmsg.collection = \"USER_FEEDS_\" + msg.userid;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 420,
        "y": 600,
        "wires": [
            [
                "5486b2a4.2de31c",
                "8c602ef0.07dac"
            ]
        ]
    },
    {
        "id": "8c602ef0.07dac",
        "type": "mongodb out",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "",
        "payonly": false,
        "upsert": true,
        "multi": true,
        "operation": "update",
        "x": 620,
        "y": 560,
        "wires": []
    },
    {
        "id": "6ef270b5.b11bb",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/trash",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 440,
        "wires": [
            [
                "59a33977.0889b8"
            ]
        ]
    },
    {
        "id": "59a33977.0889b8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "remove id",
        "func": "\nmsg.userid = msg.payload.userid;\nmsg.payload = {\"trashed\": true, \"userid\": msg.userid}\nmsg.sort= {\"article.published\":-1}\nmsg.trashview = true;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 300,
        "y": 440,
        "wires": [
            [
                "44b8038b.8c970c"
            ]
        ]
    },
    {
        "id": "9ad57b5b.6d7cc8",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "",
        "operation": "find",
        "x": 720,
        "y": 300,
        "wires": [
            [
                "43a80d33.c4e784"
            ]
        ]
    },
    {
        "id": "1b059fb1.cc726",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Del / Send - db doc to Trash",
        "info": "",
        "x": 180,
        "y": 560,
        "wires": []
    },
    {
        "id": "44b8038b.8c970c",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "feeds",
        "operation": "find",
        "x": 680,
        "y": 440,
        "wires": [
            [
                "43a80d33.c4e784"
            ]
        ]
    },
    {
        "id": "e20b957b.8a4178",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "The WebPage",
        "info": "",
        "x": 1350,
        "y": 340,
        "wires": []
    },
    {
        "id": "a24e120a.59612",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Views The Trash",
        "info": "",
        "x": 140,
        "y": 400,
        "wires": []
    },
    {
        "id": "4d8f0a1c.47cbb4",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/get-blips",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 780,
        "wires": [
            [
                "f4cf8c36.28f81"
            ]
        ]
    },
    {
        "id": "f4cf8c36.28f81",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "set queries",
        "func": "msg.userid = msg.payload.userid;\n    msg.payload = {\"trashed\": {$exists: false},  \"userid\": msg.payload.userid    };\n    msg.sort = {\"logged_date\": -1};\n    msg.feedsview = true;\n    return msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 780,
        "wires": [
            [
                "62fc09b8.16a9f8"
            ]
        ]
    },
    {
        "id": "62fc09b8.16a9f8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "Set DB Settings",
        "func": "msg.db_url=\"mongodb://localhost:27017/\";\nmsg.db_name=\"carproj_db\";\nmsg.collection=\"USER_FEEDS_\" + msg.userid;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 780,
        "wires": [
            [
                "99dce57a.266f18"
            ]
        ]
    },
    {
        "id": "22da5f6a.b0497",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Feed Checker db to client webpage",
        "info": "",
        "x": 200,
        "y": 740,
        "wires": []
    },
    {
        "id": "7e68e90.7a0a018",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "adjust for output",
        "func": "const notify = {\n    sms : flow.get('smsOnOff'),\n    email: flow.get('emailOnOff')\n}\n\nif(notify.sms == \"off\"){\n    notify.sms = null;\n}\nif(notify.email == \"off\"){\n    notify.email = null;\n}\n\nmsg.notify = notify;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 960,
        "y": 780,
        "wires": [
            [
                "a2755e2b.0d75f"
            ]
        ]
    },
    {
        "id": "99dce57a.266f18",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "",
        "operation": "find",
        "x": 700,
        "y": 780,
        "wires": [
            [
                "7e68e90.7a0a018"
            ]
        ]
    },
    {
        "id": "2efe1562.59653a",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1530,
        "y": 780,
        "wires": []
    },
    {
        "id": "a2755e2b.0d75f",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "THE WEBPAGE HTML",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "\n<style>\n    .entry {\n        padding:5px;\n        border-width:1px;\n        border-color:lightgrey;\n        border-style: solid;\n    }\n    \n</style>\n\n<!-- <div class=\"notify sticky ui animated slideInDown\" style=\"color: white;  height: auto;\">\n   <form action=\"\" method=\"\">    \n     \n     {{!--{{#trashview}}--}}\n        <div class=\"float-right\" style=\"display:inline-block;\">\n             <a class=\"btn btn-md btn-success\" onclick=\"alert('test');\" style=\"\">Feeds</a>\n         </div>\n     {{!--{{/trashview}}--}}\n     {{!--{{#feedsview}}--}}\n     <div class=\"float-right\" style=\"display:inline-block;\">\n          <a class=\"btn btn-md btn-success\" onclick=\"alert('test');\" style=\"\">Trash</a>\n     </div>\n     {{!--{{/feedsview}}--}}\n     \n   </form>\n  \n</div>  -->\n\n<div class=\"spacer\" style=\"margin-bottom:40px;\"></div>\n\n<div class=\"feeds\" id=\"feeds\">\n    \n    {{#payload}}\n          <div class=\"entry col-12 animated fadeIn\" style=\"margin:5px;\" id=\"{{_id}}\">\n            <div class=\"\" style=\"z-index:50; position: absolute; right:10px; top:10px; \">\n                  <a onclick=\"del('{{_id}}');\" id=\"del_{{_id}}\" class=\"btn btn-sm btn-danger\" style=\"width:15px; height:15px;\"><i class=\"fa fa-trash\"></i></a>\n             </div>\n        \n        {{!--<details>--}}\n            {{!--<summary>--}}\n\n                <div class=\"activity \">{{#subject}} {{name}} {{/subject}} </div><div>Found: {{#feedinfo.matched_keywords}}  [{{name}} x{{counts}}] {{/feedinfo.matched_keywords}} </div>\n                <div class=\"title item\"><a href=\"{{article.link}}\" target=\"_blank\"> {{{article.title}}} </a></div>\n                <a href=\"{{shorturl}}\" target=\"_blank\">{{shorturl}}</a>\n                <div class=\"pubdate item\"> Date Published: {{article.published}}</div>\n                {{#article.title}}<div class=\"summary item\">Article Title: {{{article.title}}}</div>{{/article.title}}\n            {{!--</summary>--}}\n\n            {{#article.content}}<div class=\"desciption item\"> Description: {{{article.content}}}</div>{{/article.content}}\n            {{#article.author}}<div class=\"author item\"> Author:{{article.author}}</div>{{/article.author}}\n        {{!--</details>--}}\n    </div>\n        \n    {{/payload}}\n    {{^payload}}\n        Waiting for keyword matches...\n    {{/payload}}\n</div>\n    \n\n\n<script>\n\nElement.prototype.remove = function() {\n    this.parentElement.removeChild(this);\n}\nNodeList.prototype.remove = HTMLCollection.prototype.remove = function() {\n    for(var i = this.length - 1; i >= 0; i--) {\n        if(this[i] && this[i].parentElement) {\n            this[i].parentElement.removeChild(this[i]);\n        }\n    }\n}\n\nfunction del(id){\n    \n     const data = {del: id};\n    \n     fetch('https://radarblip.io:18800/del', {\n         method: 'POST',\n         headers: {\n             'Content-Type': 'application/json',\n         },\n         body: JSON.stringify(data),\n         })\n        .then((response) => {\n             //alert(response);\n         })\n         .then((data) => {\n             \n               el =document.getElementById(id);\n             setTimeout(function(){  \n                 //el.style.display = \"none\"; \n                 el.remove();\n                 \n             }, 700);\n           \n\n              el.classList.add(\"animated\");\n              el.classList.add(\"slideOutLeft\");\n              el.classList.add(\"fadeOut\");\n \n         });\n             //     .catch((error) => {\n             //         alert('Error:');\n             //     });\n             // });\n    \n    \n}\n\n\nfunction clickedNotify() {\n     \n    const data = {\n        sms: document.getElementById(\"sms\").checked,\n        email: document.getElementById(\"email\").checked\n    }\n    \n     fetch('/setNotifications', {\n         method: 'POST',\n         headers: {\n             'Content-Type': 'application/json',\n         },\n         body: JSON.stringify(data),\n         })\n        .then((response) => {\n             //alert(response);\n         })\n         .then((data) => {\n              //alert('Success:');\n         });\n             //     .catch((error) => {\n             //         alert('Error:');\n             //     });\n             // });\n    \n            // alert(data.sms);\n  \n}\n\n\n// document.getElementById(\"sms\").addEventListener(\"input\", function () {clickedNotify()});\n// document.getElementById(\"email\").addEventListener(\"input\", function() {clickedNotify()});\n\n       \n</script>\n",
        "output": "str",
        "x": 1200,
        "y": 780,
        "wires": [
            [
                "2efe1562.59653a"
            ]
        ],
        "inputLabels": [
            "input"
        ]
    },
    {
        "id": "38e6eb69.a2e5a4",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "THE WEBPAGE HTML",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/css/mdb.min.css\"> \n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.3.2/js/mdb.min.js\"></script>\n<link href=\"https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" rel=\"stylesheet\" integrity=\"sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN\" crossorigin=\"anonymous\">\n\n<style>c\n\nh2 {\n    size:3pt;\n}\n\n.feeds {\n    opacity: 1;\n    -webkit-transition: opacity 1000ms linear;\n    transition: opacity 1000ms linear;\n}\n\n.item {\n    margin-bottom:5px;\n    \n}\n\nimg  {\n    float:right;\n    width:150px;\n    height:auto;\n    margin-right:15px;\n    margin-bottom:15px;\n}\n\nbody {\n     opacity: 1;\n    -webkit-transition: opacity 1000ms linear;\n    transition: opacity 1000ms linear;\n    \n    background-image: url(https://res.cloudinary.com/sidtech/image/upload/v1583688433/digitalbg_lj3zae.jpg);\n    background-repeat: no-repeat;\n    background-attachment: fixed;\n    background: rgb(0,0,0);\n    background: linear-gradient(319deg, rgba(0,0,0,1) 34%, rgba(0,7,37,1) 60%, rgba(0,0,0,1) 71%);\n}\n\ndiv.sticky.ui {\n  background: rgb(0,0,0);\n  background: radial-gradient(circle, rgba(0,0,0,1) 0%, rgba(0,10,54,1) 47%, rgba(0,0,0,1) 100%);\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  background-color:black;\n  border-color:blue;\n  border-width:2px;\n  border-radius: 8px;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n  border-top-width:0;\n  border-style:solid;\n  padding: 10px;\n  padding-top:15px;\n  top: -5px;\n  margin-top:-8px;\n}\n\npath {\n    height: 150px;\n    width: auto;\n    \n}\n\n    b {\n        background-color: lightgrey;\n        text-shadow: 1px 1px black;\n      \n    }\n    \n    details {\n        padding :5px;\n        padding-right:0px;\n        background: rgb(2,0,36);\n        background: linear-gradient(90deg, rgba(2,0,36,1) 16%, rgba(9,9,121,1) 47%, rgba(7,57,153,1) 99%, rgba(0,212,255,1) 100%); \n    }\n    summary {\n        padding: 5px;\n        background: rgb(2,0,36);\n        background: linear-gradient(90deg, rgba(2,0,36,1) 16%, rgba(9,9,121,1) 47%, rgba(7,57,153,1) 99%, rgba(0,212,255,1) 100%);\n        margin-top: 0px;\n        margin-bottom: 10px;\n        outline:none;\n}\n    \n        \n        \n    }\n    summary img{\n       align-content:right;\n        \n    }\n    \n    body {\n        background-color: black;\n        font: white;\n    }\n    .entry{\n      -webkit-box-sizing: content-box;\n      -moz-box-sizing: content-box;\n      box-sizing: content-box;\n      border: 1px solid rgba(0,150,255,0.71);\n      -webkit-border-radius: 5px;\n      border-radius: 2px;\n      font: normal 16px/1 \"Times New Roman\", Times, serif;\n      color: rgba(255,255,255,1);\n      \n      -o-text-overflow: ellipsis;\n      text-overflow: ellipsis;\n      -webkit-box-shadow: 3px 3px 4px 0 rgba(0,0,0,0.4) ;\n      box-shadow: 3px 3px 4px 0 rgba(0,0,0,0.4) ;\n      -webkit-transform: rotateX(-2.8647889756541165deg) rotateY(-4.010704565915763deg)   ;\n      transform: rotateX(-2.8647889756541165deg) rotateY(-4.010704565915763deg)   ;\n      margin-bottom: 7px;\n        \n    }\n .onoffswitch {\n    position: relative; width: 55px;\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\n}\n.onoffswitch-checkbox {\n    display: none;\n}\n.onoffswitch-label {\n    display: block; overflow: hidden; cursor: pointer;\n    height: 20px; padding: 0; line-height: 20px;\n    border: 0px solid #FFFFFF; border-radius: 24px;\n    background-color: #9E9E9E;\n}\n.onoffswitch-label:before {\n    content: \"\";\n    display: block; width: 24px; margin: -2px;\n    background: #FFFFFF;\n    position: absolute; top: 0; bottom: 0;\n    right: 31px;\n    border-radius: 24px;\n    box-shadow: 0 6px 12px 0px #757575;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label {\n    background-color: #42A5F5;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label, .onoffswitch-checkbox:checked + .onoffswitch-label:before {\n   border-color: #42A5F5;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\n    margin-left: 0;\n}\n.onoffswitch-checkbox:checked + .onoffswitch-label:before {\n    right: 0px; \n    background-color: #23F5DC; \n    box-shadow: 3px 6px 18px 0px rgba(0, 0, 0, 0.2);\n}\n</style>\n\n<div class=\"notify sticky ui animated slideInDown\" style=\"color: white;  height: auto;\">\n   <form action=\"\" method=\"\">    \n     <div>Notifications:</div>\n     \n     SMS:\n     <div class=\"onoffswitch\" style=\"margin-bottom:5px;   display: inline-block;\">\n         <input onclick=\"\" type=\"checkbox\" class=\"sms onoffswitch-checkbox\" id=\"sms\" name=\"sms\" {{#notify.sms}}checked{{/notify.sms}}>\n         <label class=\"onoffswitch-label\" for=\"sms\"></label>\n     </div>\n     \n     Email:\n     <div class=\"onoffswitch\" style=\"margin-bottom:5px;   display: inline-block;\">\n        <input onclick=\"\" type=\"checkbox\" class=\"email onoffswitch-checkbox\" name=\"email\" id=\"email\" {{#notify.email}}checked{{/notify.email}}> \n       <label class=\"onoffswitch-label\" for=\"email\"></label>\n     </div>\n     \n     {{#trashview}}\n        <div class=\"float-right\" style=\"display:inline-block;\">\n             <a class=\"btn btn-md btn-success\" href= \"/check-feed\" style=\"\">Feeds</a>\n         </div>\n     {{/trashview}}\n     {{#feedsview}}\n     <div class=\"float-right\" style=\"display:inline-block;\">\n          <a class=\"btn btn-md btn-success\" href= \"/trash\" style=\"\">Trash</a>\n     </div>\n     {{/feedsview}}\n     \n   </form>\n  \n</div>\n\n<div class=\"spacer\" style=\"margin-bottom:40px;\"></div>\n\n<div class=\"feeds\" id=\"feeds\">\n    \n    {{#payload}}\n          <div class=\"entry col-12 animated fadeIn\" style=\"margin:5px;\" id=\"{{_id}}\">\n            <div class=\"\" style=\"z-index:50; position: absolute; right:10px; top:10px; \">\n                  <a onclick=\"del('{{_id}}');\" id=\"del_{{_id}}\" class=\"btn btn-sm btn-danger\" style=\"width:15px; height:15px;\"><i class=\"fa fa-trash\"></i></a>\n             </div>\n        \n        {{!--<details>--}}\n            {{!--<summary>--}}\n\n                <div class=\"activity item\">{{#subject}} {{name}} {{/subject}} </div><div>{{#feedinfo.matched_keywords}}Keywords Matched:  {{name}}[{{counts}}] {{/feedinfo.matched_keywords}} </div>\n                <div class=\"title item\"><a href=\"{{article.link}}\" target=\"_blank\"> {{article.title}} </a></div>\n                <div class=\"pubdate item\"> Date Published: {{article.published}}</div>\n                {{#article.summary}}<div class=\"summary item\">Summary: {{{article.summary}}}</div>{{/article.summary}}\n            {{!--</summary>--}}\n\n            <div class=\"desciption item\"> Content: {{{article.content}}}</div>\n            {{#article.author}} <div class=\"author item\"> Author:{{article.author}}</div>{{/article.author}}\n        {{!--</details>--}}\n    </div>\n        \n    {{/payload}}\n    {{^payload}}\n        Waiting for keyword matches...\n    {{/payload}}\n</div>\n    \n\n\n<script>\n\nElement.prototype.remove = function() {\n    this.parentElement.removeChild(this);\n}\nNodeList.prototype.remove = HTMLCollection.prototype.remove = function() {\n    for(var i = this.length - 1; i >= 0; i--) {\n        if(this[i] && this[i].parentElement) {\n            this[i].parentElement.removeChild(this[i]);\n        }\n    }\n}\n\nfunction del(id){\n    \n     const data = {del: id};\n    \n     fetch('/del', {\n         method: 'POST',\n         headers: {\n             'Content-Type': 'application/json',\n         },\n         body: JSON.stringify(data),\n         })\n        .then((response) => {\n             //alert(response);\n         })\n         .then((data) => {\n             \n               el =document.getElementById(id);\n             setTimeout(function(){  \n                 //el.style.display = \"none\"; \n                 el.remove();\n                 \n             }, 700);\n           \n\n              el.classList.add(\"animated\");\n              el.classList.add(\"slideOutLeft\");\n              el.classList.add(\"fadeOut\");\n \n         });\n             //     .catch((error) => {\n             //         alert('Error:');\n             //     });\n             // });\n    \n    \n}\n\n\nfunction clickedNotify() {\n     \n    const data = {\n        sms: document.getElementById(\"sms\").checked,\n        email: document.getElementById(\"email\").checked\n    }\n    \n     fetch('/setNotifications', {\n         method: 'POST',\n         headers: {\n             'Content-Type': 'application/json',\n         },\n         body: JSON.stringify(data),\n         })\n        .then((response) => {\n             //alert(response);\n         })\n         .then((data) => {\n              //alert('Success:');\n         });\n             //     .catch((error) => {\n             //         alert('Error:');\n             //     });\n             // });\n    \n            // alert(data.sms);\n  \n}\n\n\ndocument.getElementById(\"sms\").addEventListener(\"input\", function () {clickedNotify()});\ndocument.getElementById(\"email\").addEventListener(\"input\", function() {clickedNotify()});\n\n       \n</script>\n",
        "output": "str",
        "x": 1300,
        "y": 400,
        "wires": [
            [
                "b5a3d919.0028c8"
            ]
        ]
    },
    {
        "id": "d354a121.edbc3",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/my-subs",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 940,
        "wires": [
            [
                "2c51c1b6.5d450e"
            ]
        ]
    },
    {
        "id": "2c51c1b6.5d450e",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "sets the query for the user",
        "func": "//get the passed parameters into the payload\nmsg.userid = msg.payload.userid;\nmsg.payload = { \"trashed\":{$exists: false} , \"userid\": msg.payload.userid };\nmsg.sort = {\"_id\": -1};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 360,
        "y": 940,
        "wires": [
            [
                "51e4a35e.7193dc"
            ]
        ]
    },
    {
        "id": "51e4a35e.7193dc",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 680,
        "y": 940,
        "wires": [
            [
                "3b956d54.1b3272",
                "a06df93f.6df888"
            ]
        ]
    },
    {
        "id": "33b916fa.95107a",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1150,
        "y": 940,
        "wires": []
    },
    {
        "id": "666eb697.761188",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/keywords-set",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1080,
        "wires": [
            [
                "ac049ff3.fa263"
            ]
        ]
    },
    {
        "id": "ac049ff3.fa263",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "",
        "func": "//get the passed parameters into the payload\nmsg.payload = msg.query;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 1080,
        "wires": [
            [
                "c6f29419.6abe28"
            ]
        ]
    },
    {
        "id": "c6f29419.6abe28",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 560,
        "y": 1080,
        "wires": [
            [
                "fbb28922.8dbc78"
            ]
        ]
    },
    {
        "id": "fbb28922.8dbc78",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "\n\n<div class=\"container\">\n<h2>My Subscriptions</h2>\n\n\n{{#payload}}\n\n\n<div class=\"\" style=\"border-style:solid;border-width:1px;border-color:blue; background-color:darkblue; padding:5px;\">\n    {{!--<div>id: {{_id}} - {{project_id}}</div>--}}\n    <div>{{tier}}</div>\n    <div class=\"\">\n    Keywords assigned: \n    <b>\n    {{#keyword}}\n        <div class=\"\" style=\"background-color:yellow; margin:3px;\">{{.}}</div> <i id=\"{{_id}}_sms\" class=\"fas fa-sms\"></i><i id=\"{{_id}}_email\" class=\"fas fa-envelope\"></i>\n        <br>\n        <script>\n            var ev = document.getElementById('')\n        </script>\n    {{/keyword}}\n    </b>\n    </div>\n    {{!--<div> email: {{email}}</div>--}}\n\n    <div>Start date: {{start_date}}</div>\n    {{!--<div>Expires: {{expires}}</div>--}}\n<br>\n\n    <div>{{#active}}Active{{/active}}</div>\n\n</div>\n\n{{/payload}}\n\n</div>\n\n\n\n<script>\n\n\n\n\n</script>\n\n\n\n\n\n",
        "output": "str",
        "x": 800,
        "y": 1080,
        "wires": [
            [
                "13ede39f.6c33bc"
            ]
        ]
    },
    {
        "id": "13ede39f.6c33bc",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 930,
        "y": 1080,
        "wires": []
    },
    {
        "id": "76f50b36.839844",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/setNotifications",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 180,
        "y": 160,
        "wires": [
            [
                "98f74446.945ff8",
                "cd14b911.94f308"
            ]
        ]
    },
    {
        "id": "cd14b911.94f308",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "convert value \"on\" or \"off\"",
        "func": "if(msg.payload.sms === true){\n    msg.payload = \"on\";\n} else {\n    msg.payload = \"off\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 140,
        "wires": [
            [
                "e13e7769.da0358"
            ]
        ]
    },
    {
        "id": "98f74446.945ff8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "convert value \"on\" or \"off\"",
        "func": "if(msg.payload.email === true){\n    msg.payload = \"on\";\n} \n\nif(msg.payload.email === false){\n    msg.payload = \"off\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 200,
        "wires": [
            [
                "39217682.97d16a"
            ]
        ]
    },
    {
        "id": "e13e7769.da0358",
        "type": "link out",
        "z": "e521bf7.1bc084",
        "name": "",
        "links": [
            "ef4cf552.8cc518"
        ],
        "x": 635,
        "y": 140,
        "wires": []
    },
    {
        "id": "39217682.97d16a",
        "type": "link out",
        "z": "e521bf7.1bc084",
        "name": "",
        "links": [
            "5f51d991.a9c618"
        ],
        "x": 635,
        "y": 200,
        "wires": []
    },
    {
        "id": "36bc3a7f.c4ef86",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Begin - HTTP ENDPOINTS / API --->",
        "info": "",
        "x": 180,
        "y": 40,
        "wires": []
    },
    {
        "id": "7cefe614.f24108",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Sets Notification Settings",
        "info": "",
        "x": 170,
        "y": 120,
        "wires": []
    },
    {
        "id": "e4cc2985.c96808",
        "type": "readdir",
        "z": 0,
        "name": "",
        "dir": "/home/ubuntu/feeds/archived",
        "as": "single",
        "recursive": false,
        "outproperty": "payload",
        "x": 2040,
        "y": 820,
        "wires": [
            [
                "da9ae27d.4fd8b"
            ]
        ]
    },
    {
        "id": "c38032.3aba7fd",
        "type": "http in",
        "z": 0,
        "name": "",
        "url": "/archive",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 1730,
        "y": 840,
        "wires": [
            [
                "7b9afd0d.72f244"
            ]
        ]
    },
    {
        "id": "da9ae27d.4fd8b",
        "type": "template",
        "z": 0,
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{#payload}}\n\n<a href=\"/archive?archive={{.}}\">{{.}}</a><br>\n\n{{/payload}}\n\n\n",
        "output": "str",
        "x": 2220,
        "y": 840,
        "wires": [
            [
                "f7cac05b.2fd35"
            ]
        ]
    },
    {
        "id": "f7cac05b.2fd35",
        "type": "http response",
        "z": 0,
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2370,
        "y": 880,
        "wires": []
    },
    {
        "id": "6c0ab683.48f9a8",
        "type": "file in",
        "z": 0,
        "name": "",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 2030,
        "y": 880,
        "wires": [
            [
                "ad3aa86e.47ebe8"
            ]
        ]
    },
    {
        "id": "ad3aa86e.47ebe8",
        "type": "link out",
        "z": 0,
        "name": "",
        "links": [],
        "x": 2135,
        "y": 880,
        "wires": []
    },
    {
        "id": "50d76d24.7d4f84",
        "type": "comment",
        "z": 0,
        "name": "Archive Access",
        "info": "",
        "x": 1720,
        "y": 800,
        "wires": []
    },
    {
        "id": "7b9afd0d.72f244",
        "type": "function",
        "z": 0,
        "name": "",
        "func": "if(msg.req.query.archive){\n    msg.file =  msg.req.query.archive.replace(\"/home/ubuntu/feeds/archived/\", \"\");    \n    msg.link = \"/archive?archive=\" + msg.file;\n    msg.filename = \"/home/ubuntu/feeds/archived/\" + msg.file;\n    return [null,msg];\n}else {\n    return [msg,null];\n}\n\n\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1870,
        "y": 840,
        "wires": [
            [
                "e4cc2985.c96808"
            ],
            [
                "6c0ab683.48f9a8"
            ]
        ]
    },
    {
        "id": "2f67b073.8462f",
        "type": "mongodb out",
        "z": "dbfc8b70.04c788",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 2740,
        "y": 160,
        "wires": []
    },
    {
        "id": "a9685a05.524898",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "AFTER CONFIRMATION : LOAD DATABASE WITH ACTIVE SUBSCRIPTION DATA",
        "func": "//payload will be a subscriber active object // with a timestamp to measure a duration\n\nlet out = {};\n\n\nout = {\n    \"keywords\" : msg.keywords,\n    \"feeds\" : [],\n    \"userid\" : msg.meta.userid,\n  // \"receipt_url\" : msg.payload.data.object.receipt_url,\n   \"start_date\" : new Date(),\n    //\"expires\" : Date() ,\n  //  \"active\" : true,\n  // \"keywords_are_set\" : true,\n  \n};\nmsg.output = out;\n\n// //Keyword Assignment to payload.\n\n\nmsg.payload = out;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 220,
        "wires": [
            [
                "a8c7dd36.9107d"
            ]
        ]
    },
    {
        "id": "66e209c2.745f28",
        "type": "http response",
        "z": "dbfc8b70.04c788",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 690,
        "y": 140,
        "wires": []
    },
    {
        "id": "1cee8ba7.ac90e4",
        "type": "template",
        "z": "dbfc8b70.04c788",
        "name": "Reply back to Stripe Webhook",
        "field": "outbound",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "OK",
        "output": "str",
        "x": 490,
        "y": 140,
        "wires": [
            [
                "66e209c2.745f28"
            ]
        ]
    },
    {
        "id": "2f35a8ab.42f9e8",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "STRIPE WEB-HOOK",
        "info": "Checks if payment was successfull,  assigns a \n\"tier\" and adds the \"subscription\" instance to \nthe database , \"subscriptions\" colleciton specifically,\n\nThe subscriptions will be used to store all \ninstances even if customer has multiple instances of say 10 keywords etc.",
        "x": 190,
        "y": 240,
        "wires": []
    },
    {
        "id": "a8c7dd36.9107d",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "Set Target DB",
        "func": "\nmsg.collection=\"subscriptions\";\n\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1540,
        "y": 260,
        "wires": [
            [
                "d6391963.9a6d88"
            ]
        ]
    },
    {
        "id": "976c6e21.a5446",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "attache msg.meta data",
        "func": "msg.meta = RED.util.cloneMessage(msg.payload.data.object.metadata);\n//msg.meta = JSON.parse(JSON.stringify(msg.payload.data.object.metadata));\n//msg.stripe_obj = JSON.parse(JSON.stringify(msg.payload.data.object));\nmsg.keywords = [];\n\n\n\n//Grab any keywords and jam em into the msg.keywords array\nif(msg.meta.keyword1){msg.keywords.push(msg.meta.keyword1);}\nif(msg.meta.keyword2){msg.keywords.push(msg.meta.keyword2);}\nif(msg.meta.keyword3){msg.keywords.push(msg.meta.keyword3);}\nif(msg.meta.keyword4){msg.keywords.push(msg.meta.keyword4);}\nif(msg.meta.keyword5){msg.keywords.push(msg.meta.keyword5);}\nif(msg.meta.keyword6){msg.keywords.push(msg.meta.keyword6);}\nif(msg.meta.keyword7){msg.keywords.push(msg.meta.keyword7);}\nif(msg.meta.keyword8){msg.keywords.push(msg.meta.keyword8);}\nif(msg.meta.keyword9){msg.keywords.push(msg.meta.keyword9);}\nif(msg.meta.keyword10){msg.keywords.push(msg.meta.keyword10);}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 470,
        "y": 260,
        "wires": [
            [
                "96792754.0e9e38",
                "c06d87a.5cc6778"
            ]
        ]
    },
    {
        "id": "96792754.0e9e38",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "CHECK FOR APPROVAL",
        "func": "//IF\n//Pass along the msg Only If Stripe tells us the payment is successful:\n//Else msg goes to the 2nd output of this function.\nif(msg.payload.type == \"checkout.session.completed\") {\n    return [msg,null];\n}else{\n    return [null, msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 730,
        "y": 260,
        "wires": [
            [
                "a9685a05.524898"
            ],
            []
        ]
    },
    {
        "id": "c3e6c986.2319e8",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "GOOGLE ALERT RSS MAKER",
        "info": "We need to manually import google-alert-api module into\nnode-red via the ~/.node-red/settings.js file.\n\n",
        "x": 1920,
        "y": 400,
        "wires": []
    },
    {
        "id": "42fdca4.5c01334",
        "type": "exec",
        "z": "dbfc8b70.04c788",
        "command": "node /home/ubuntu/ga-gen/rss ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "FEED MEE SEED-MORE!",
        "x": 1930,
        "y": 480,
        "wires": [
            [
                "b1b111f0.cac2c",
                "c8989b78.d58918"
            ],
            [
                "c8989b78.d58918"
            ],
            [
                "c8989b78.d58918"
            ]
        ]
    },
    {
        "id": "63aea549.6bf86c",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "FEED THIS A KEYWORD via msg.payload",
        "info": "Feed this a string value keyword via msg.payload\n, it will call a custom made node that creates\nan RSS feed.\n\nIf keyword exists, it will return the existing \nRSS feed url.",
        "x": 1920,
        "y": 440,
        "wires": []
    },
    {
        "id": "d6391963.9a6d88",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "split & nod",
        "func": "msg.payload= msg.output.keywords;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1710,
        "y": 260,
        "wires": [
            [
                "d7c80b3a.ab46c8"
            ]
        ]
    },
    {
        "id": "9cb0b052.b1fc5",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "Iterate Keywords",
        "info": "",
        "x": 1700,
        "y": 220,
        "wires": []
    },
    {
        "id": "d7c80b3a.ab46c8",
        "type": "split",
        "z": "dbfc8b70.04c788",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "payload",
        "x": 1710,
        "y": 300,
        "wires": [
            [
                "5645ef11.c037e"
            ]
        ]
    },
    {
        "id": "519f3636.7db268",
        "type": "debug",
        "z": "dbfc8b70.04c788",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 2650,
        "y": 420,
        "wires": []
    },
    {
        "id": "31a4fb70.b565b4",
        "type": "http in",
        "z": "dbfc8b70.04c788",
        "name": "",
        "url": "/stripe-webhook",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 200,
        "y": 280,
        "wires": [
            [
                "976c6e21.a5446",
                "1cee8ba7.ac90e4"
            ]
        ]
    },
    {
        "id": "c1045d42.be3bb",
        "type": "inject",
        "z": "dbfc8b70.04c788",
        "name": "Simulator",
        "topic": "",
        "payload": "{\"id\":\"evt_1GQSITBBHTJgZ6Vay7oHhlOC\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1585116061,\"data\":{\"object\":{\"id\":\"cs_test_9r5fRay9gbCv25u5emgQ540DlrWxwY4vAlgUT1sDI17zEmnLMz4r6Hj4\",\"object\":\"checkout.session\",\"billing_address_collection\":\"auto\",\"cancel_url\":\"https://radar-blip.com/subscribe/10-keyword-monitoring\",\"client_reference_id\":\"106\",\"customer\":\"cus_GyP6xZY8tDGjSf\",\"customer_email\":\"admin@radar-blip.com\",\"display_items\":[{\"amount\":2999,\"currency\":\"usd\",\"plan\":{\"id\":\"wpf_4080_recurring_payment_item_2999_month_0_USD\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":2999,\"amount_decimal\":\"2999\",\"billing_scheme\":\"per_unit\",\"created\":1584849052,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{\"form_id\":\"4080\",\"element_id\":\"recurring_payment_item\",\"wp_plugin\":\"wppayform\"},\"nickname\":null,\"product\":\"wpf_4080_recurring_payment_item_2999_month_0_USD\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":1,\"type\":\"plan\"}],\"livemode\":false,\"locale\":\"auto\",\"metadata\":{\"Submission ID\":\"106\",\"Form ID\":\"4080\",\"customer_email\":\"admin@radar-blip.com\",\"customer_name\":\"admin\",\"keyword1\":\"computers\",\"keyword2\":\"satellites\",\"keyword3\":\"space\",\"keyword4\":\"cosmos\",\"keyword5\":\"coffee\",\"keyword6\":\"sailing\",\"keyword7\":\"mars\",\"keyword8\":\"jupiter\",\"keyword9\":\"neptune\",\"keyword10\":\"pluto\",\"tier\":\"10\",\"userid\":\"1\"},\"mode\":\"subscription\",\"payment_intent\":null,\"payment_method_types\":[\"card\"],\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":\"sub_GyP6w3FqhOHTvl\",\"success_url\":\"https://radar-blip.com/?wpf_page=frameless&wpf_action=stripe_hosted_success&wpf_hash=wpf_15851160485e7af390d9d96704\"}},\"livemode\":false,\"pending_webhooks\":4,\"request\":{\"id\":\"req_qUi7HrueGMwJzt\",\"idempotency_key\":null},\"type\":\"checkout.session.completed\"}",
        "payloadType": "json",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 200,
        "y": 160,
        "wires": [
            [
                "1cee8ba7.ac90e4",
                "976c6e21.a5446"
            ]
        ]
    },
    {
        "id": "1fcae3df.b4b03c",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "push to feeds",
        "func": "//msg.payload.feeds.push(msg.rss);\nvar kwset=[];\n\nfor (let step = 0; step < msg.payload.length; step++) {\n    kwset.push(\n        {\n            \"_id\" : step,\n            \"keyword\":msg.keywords[step],\n            \"feed\" : msg.payload[step],\n            \"sms\": false,\n            \"email\": false,\n        }\n\n        )\n}\n\n\nmsg.kwset = kwset;\nmsg.output.kwset = kwset;\nmsg.output.feeds = msg.payload;\nmsg.output.active = true;\nmsg.payload=msg.output;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2360,
        "y": 320,
        "wires": [
            [
                "2f67b073.8462f",
                "519f3636.7db268"
            ]
        ]
    },
    {
        "id": "5645ef11.c037e",
        "type": "delay",
        "z": "dbfc8b70.04c788",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1710,
        "y": 340,
        "wires": [
            [
                "b0725da.dc4aaa"
            ]
        ]
    },
    {
        "id": "b1b111f0.cac2c",
        "type": "join",
        "z": "dbfc8b70.04c788",
        "name": "",
        "mode": "auto",
        "build": "string",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 2110,
        "y": 340,
        "wires": [
            [
                "1fcae3df.b4b03c"
            ]
        ]
    },
    {
        "id": "b0725da.dc4aaa",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "",
        "func": "msg.payload = \"'\" + msg.payload + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1710,
        "y": 380,
        "wires": [
            [
                "42fdca4.5c01334"
            ]
        ]
    },
    {
        "id": "d35b00d4.07784",
        "type": "inject",
        "z": "dbfc8b70.04c788",
        "name": "",
        "topic": "",
        "payload": "keepalive1234567890",
        "payloadType": "str",
        "repeat": "18000",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150,
        "y": 620,
        "wires": [
            [
                "e276ec74.72d3d"
            ]
        ]
    },
    {
        "id": "e276ec74.72d3d",
        "type": "exec",
        "z": "dbfc8b70.04c788",
        "command": "node /home/ubuntu/ga-gen/rss ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "RSS KEEP ALIVE  /  DOWN NOTIFICATION",
        "x": 440,
        "y": 620,
        "wires": [
            [
                "217e099.da819f6",
                "882cd8ed.0c67a8"
            ],
            [],
            []
        ]
    },
    {
        "id": "ac0f673a.9916f8",
        "type": "twilio out",
        "z": "dbfc8b70.04c788",
        "twilio": "a3cb5458.4c20e8",
        "twilioType": "sms",
        "url": "",
        "number": "",
        "name": "",
        "x": 1470,
        "y": 900,
        "wires": []
    },
    {
        "id": "217e099.da819f6",
        "type": "switch",
        "z": "dbfc8b70.04c788",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "https",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 710,
        "y": 680,
        "wires": [
            [],
            [
                "c77718d3.1819d8"
            ]
        ]
    },
    {
        "id": "c77718d3.1819d8",
        "type": "function",
        "z": "dbfc8b70.04c788",
        "name": "Report to TECH",
        "func": "msg.payload = \"WARNING!   The Node-red RSS Feeder is not producing a URL.  Please check this!   /home/ubuntu/ga-gen/rss.js \"\n\nmsg.to = \"7024663310\";\nmsg.topic = \"7024663310\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 840,
        "y": 760,
        "wires": [
            [
                "d2c565ef.f67508"
            ]
        ]
    },
    {
        "id": "1288f89.8f01f07",
        "type": "inject",
        "z": "dbfc8b70.04c788",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 500,
        "y": 760,
        "wires": [
            [
                "c77718d3.1819d8"
            ]
        ]
    },
    {
        "id": "240965c5.8919fa",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "CHECKS RSS FEED GENERATOR AND REPORTS WHEN NOT WORKING",
        "info": "",
        "x": 320,
        "y": 580,
        "wires": []
    },
    {
        "id": "d2c565ef.f67508",
        "type": "delay",
        "z": "dbfc8b70.04c788",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "15",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1020,
        "y": 760,
        "wires": [
            [
                "ac0f673a.9916f8"
            ]
        ]
    },
    {
        "id": "6c774536.0a054c",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "Rate Limit the SMS notifications",
        "info": "",
        "x": 1010,
        "y": 720,
        "wires": []
    },
    {
        "id": "73bb2d1b.fb4694",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/subs",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 1440,
        "wires": [
            [
                "db18ebb5.201e28"
            ]
        ]
    },
    {
        "id": "db18ebb5.201e28",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "",
        "func": "\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 1440,
        "wires": [
            [
                "80d1d513.0ee778"
            ]
        ]
    },
    {
        "id": "d28ee6f4.885988",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "\n<div id=\"debug\">\n    \n</div>\n\n{{#payload}}\n\n\n<div id=\"{{_id}}\" class=\"sub-block\" style=\"padding:3px;margin-bottom:10px; border-style:solid; border-width:1px; border-color:black;\">\n    id: {{_id}}<br>\n    userid: {{userid}}<br>\n    Started: {{start_date}}<br>\n    Keywords: {{#keywords}}{{.}} {{/keywords}}\n    <br>\n    \n    Feeds:<br>\n    {{#feeds}}\n        {{.}}<br>\n    {{/feeds}}\n<br>\n        Insert RSS:\n        <input type=\"text\" name=\"rssurl\" id=\"rss{{_id}}\">\n        <button type=\"submit\" id=\"sub{{_id}}\">Insert</button>\n\n        <script>\n        document.getElementById('sub{{_id}}').addEventListener('click', function (cb){\n            \n            var rss = document.getElementById(\"rss{{_id}}\").value;\n            var theid = \"{{_id}}\";\n            \n            \n            var data = {\n                \"_id\" : theid,\n                \"rssfeed\" : rss\n            }\n        \n            \n            fetch(\"https://radarblip.io:18800/addfeed_url\", {\n                 method: 'post',\n                 body : JSON.stringify(data),\n                 method: 'POST', // *GET, POST, PUT, DELETE, etc.\n                 mode: 'cors', // no-cors, *cors, same-origin\n                 cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                 credentials: 'same-origin', // include, *same-origin, omit\n                 headers: {\n                    'Content-Type': 'application/json'\n                        // 'Content-Type': 'application/x-www-form-urlencoded',\n                }\n                //redirect: 'follow', // manual, *follow, error\n                //referrerPolicy: 'no-referrer', // no-referrer, *client\n            })\n            .then(){\n                alert(this.responseText);\n            });\n            \n        });\n        \n    \n        \n    \n        </script>\n\n        \n        \n\n    \n    \n</div>\n\n\n{{/payload}}\n\n\n",
        "output": "str",
        "x": 840,
        "y": 1440,
        "wires": [
            [
                "12efb282.4e611d"
            ]
        ]
    },
    {
        "id": "80d1d513.0ee778",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 560,
        "y": 1440,
        "wires": [
            [
                "d28ee6f4.885988"
            ]
        ]
    },
    {
        "id": "12efb282.4e611d",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1620,
        "y": 1440,
        "wires": []
    },
    {
        "id": "94830e0d.e5bdf",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/addfeed_url",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1280,
        "wires": [
            [
                "37007163.a21d7e"
            ]
        ]
    },
    {
        "id": "37007163.a21d7e",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "retain payload data to msg",
        "func": "\n//retains ID and feed for when payload changes;\nmsg.rssfeed = msg.payload.rssfeed;\nmsg._id = msg.payload._id;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 400,
        "y": 1280,
        "wires": [
            [
                "2fdf595f.8cdaa6"
            ]
        ]
    },
    {
        "id": "a684260a.678d28",
        "type": "mongodb out",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "payonly": true,
        "upsert": true,
        "multi": false,
        "operation": "store",
        "x": 1420,
        "y": 1200,
        "wires": []
    },
    {
        "id": "75933dc8.b8b154",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 2510,
        "y": 1260,
        "wires": []
    },
    {
        "id": "cb0baa30.6ea518",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 2000,
        "y": 1260,
        "wires": [
            [
                "f9e27497.5868a8"
            ]
        ]
    },
    {
        "id": "9f21a643.d3bbd8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "set query for the _id",
        "func": "msg.payload = {\"_id\": msg._id };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1720,
        "y": 1260,
        "wires": [
            [
                "cb0baa30.6ea518"
            ]
        ]
    },
    {
        "id": "7252744d.7e519c",
        "type": "delay",
        "z": "e521bf7.1bc084",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1580,
        "y": 1300,
        "wires": [
            [
                "9f21a643.d3bbd8"
            ]
        ]
    },
    {
        "id": "c0197c5b.15986",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "\n{{!--{{#payload}}--}}\n\n{{!--<div id=\"{{_id}}\" class=\"sub-block\">--}}\n{{!--    id: {{_id}}<br>--}}\n{{!--    userid: {{userid}}<br>--}}\n{{!--    Started: {{start_date}}<br>--}}\n{{!--    Feeds:<br>--}}\n{{!--    {{#feeds}}--}}\n{{!--        {{.}}--}}\n{{!--    {{/feeds}}--}}\n\n{{!--        Insert RSS:--}}\n{{!--        <input type=\"text\" name=\"rssurl\" id=\"rss{{_id}}\">--}}\n{{!--        <button type=\"submit\" id=\"sub{{_id}}\">Insert</button>--}}\n\n{{!--        <script>--}}\n{{!--        document.getElementById('sub{{_id}}').addEventListener('click', function (cb){--}}\n            \n{{!--            var rss = document.getElementById(\"rss{{_id}}\").value;--}}\n{{!--            var theid = \"{{_id}}\";--}}\n            \n            \n{{!--            var data = {--}}\n{{!--                \"_id\" : theid,--}}\n{{!--                \"rssfeed\" : rss--}}\n{{!--            }--}}\n        \n            \n{{!--            fetch(\"https://radarblip.io:18800/addfeed_url\", {--}}\n{{!--                 method: 'post',--}}\n{{!--                 body : JSON.stringify(data),--}}\n                 method: 'POST', // *GET, POST, PUT, DELETE, etc.\n                 mode: 'cors', // no-cors, *cors, same-origin\n                 cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                 credentials: 'same-origin', // include, *same-origin, omit\n{{!--                 headers: {--}}\n{{!--                    'Content-Type': 'application/json'--}}\n                        // 'Content-Type': 'application/x-www-form-urlencoded',\n{{!--                }--}}\n                //redirect: 'follow', // manual, *follow, error\n                //referrerPolicy: 'no-referrer', // no-referrer, *client\n{{!--            })--}}\n{{!--            .then(function (e){--}}\n{{!--                document.getElementById(\"{{_id}}\").innerHTML = e;--}}\n{{!--            });--}}\n            \n{{!--        });--}}\n    \n{{!--        </script>--}}\n    \n{{!--</div>--}}\n\n\n{{!--{{/payload}}--}}",
        "output": "str",
        "x": 2360,
        "y": 1260,
        "wires": [
            [
                "75933dc8.b8b154"
            ]
        ]
    },
    {
        "id": "f9e27497.5868a8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "",
        "func": "\nmsg.payload = msg.payload[0];\nmsg.payload = JSON.stringify(msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2230,
        "y": 1260,
        "wires": [
            [
                "c0197c5b.15986"
            ]
        ]
    },
    {
        "id": "b7ce466.0463eb8",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 940,
        "y": 1300,
        "wires": [
            [
                "b6cc440a.4e0678"
            ]
        ]
    },
    {
        "id": "b6cc440a.4e0678",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "push rss",
        "func": "\nmsg.payload = msg.payload[0]; // make singular\n\nif(typeof(msg.payload.feeds)==\"undefined\"){\n    msg.payload.feeds =[];\n}\n\nmsg.payload.feeds.push(msg.rssfeed);\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1180,
        "y": 1300,
        "wires": [
            [
                "a684260a.678d28",
                "f760a5ce.78c8c8"
            ]
        ]
    },
    {
        "id": "2fdf595f.8cdaa6",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "query DB with _id",
        "func": "\n//setup query\nmsg.payload = {\"_id\": msg._id};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 1280,
        "wires": [
            [
                "b383b25.4b9da5"
            ]
        ]
    },
    {
        "id": "b383b25.4b9da5",
        "type": "objectid",
        "z": "e521bf7.1bc084",
        "name": "",
        "property": "payload._id",
        "propertyType": "msg",
        "x": 850,
        "y": 1240,
        "wires": [
            [
                "b7ce466.0463eb8"
            ]
        ]
    },
    {
        "id": "1b60827f.f4845e",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "addfeed_url. : Adds a URL manually to Feeds (Beta!)",
        "info": "You can add feeds to an active subscription.\n\nThis goes into the feed array, which then will\nget fed into the feed checker.\n\n\n\n\n/addfeed_url?_id=<_id>&rssfeed=\"URLToRSS\"\n\n\n\n\n\n",
        "x": 250,
        "y": 1240,
        "wires": []
    },
    {
        "id": "f760a5ce.78c8c8",
        "type": "objectid",
        "z": "e521bf7.1bc084",
        "name": "",
        "property": "_id",
        "propertyType": "msg",
        "x": 1390,
        "y": 1300,
        "wires": [
            [
                "7252744d.7e519c"
            ]
        ]
    },
    {
        "id": "5ab2afa0.fc4cf",
        "type": "function",
        "z": 0,
        "name": "check and save",
        "func": "// BYPASS THIS FUNCTION NODE BECAUSE MEMORY\n// LIMITATIONS\nif (typeof(flow.get(msg.url)) === undefined){\n    flow.set(msg.url, msg.payload);\n    return [msg,null];\n}else{ \n    if(flow.get(msg.url) == msg.payload ){\n        //is duplicate so then bypass\n        return [null,msg];\n    }   else {\n        flow.set(msg.url, msg.payload);\n        return [msg,null];\n    }\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 1340,
        "y": 140,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ca73f8b4.b411b8",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Google Alerts Path",
        "info": "",
        "x": 1290,
        "y": 660,
        "wires": []
    },
    {
        "id": "70d79cb4.37d264",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "the API url",
        "func": "\nmsg.url = \"https://sqez.it/yourls-api.php?action=shorturl&signature=413dbb6f57&url=\" + encodeURI(msg.article.link) + \"&format=json\";\nmsg.headers = {\n    \n\"connection\" : \"keep-alive\"\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1690,
        "y": 1820,
        "wires": [
            [
                "99048f90.f96ac"
            ]
        ]
    },
    {
        "id": "eb09f688.2fe2f8",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Filter 3.1 & Count Occurences",
        "func": "\nmsg.feedinfo = {\n    \"matched_keywords\" : [],\n    \"matched_count\":0,\n}\n \n  \nfunction occurrences(string, subString, allowOverlapping) {\n\n    string += \"\";\n    subString += \"\";\n    if (subString.length <= 0) return (string.length + 1);\n\n    var n = 0,\n        pos = 0,\n        step = allowOverlapping ? 1 : subString.length;\n\n    while (true) {\n        pos = string.indexOf(subString, pos);\n        if (pos >= 0) {\n            ++n;\n            pos += step;\n        } else break;\n    }\n    return n;\n}\n\n\nmsg.keywords.forEach(kw =>{\n    \n    var count = occurrences(msg.tocheck.toLowerCase(), kw.toLowerCase(), false);\n    if(count > 0){\n        msg.feedinfo.matched_keywords.push({\"name\": kw, \"counts\": count});\n    }\n});\n\nif(msg.feedinfo.matched_keywords.length <= 0) {\n     msg.feedinfo.matched_keywords.push({\"name\": msg.kwset.keyword, \"counts\":\"1\"});\n}\n\n\n// var count = occurrences(msg.tocheck, msg.kwset.keyword, false);\n\n// msg.feedinfo.matched_keywords.push\n\n\n//     msg.keywords.forEach(kw => {\n//         var count = occurrences(msg.tocheck,kw, true);\n//         if(count > 0){\n//             msg.feedinfo.matched_keywords.push({\"name\": kw, \"counts\": count });\n//         }\n//     });\n    \n\n    return [msg,null];\n\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1470,
        "y": 1820,
        "wires": [
            [
                "70d79cb4.37d264"
            ]
        ]
    },
    {
        "id": "ea9b3fa9.7bc78",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/check-feed",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 300,
        "wires": [
            [
                "85d531e.e9fe4d"
            ]
        ]
    },
    {
        "id": "5cd2bd0.868e344",
        "type": "link out",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "links": [
            "6a08414b.7582b"
        ],
        "x": 4055,
        "y": 1840,
        "wires": []
    },
    {
        "id": "eb332a9a.59c258",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "SUBSC PROC TRIGGER",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 4070,
        "y": 1900,
        "wires": [
            [
                "5cd2bd0.868e344"
            ]
        ]
    },
    {
        "id": "df5b5289.45357",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "entry",
        "ret": "html",
        "as": "multi",
        "map": [],
        "xmlMode": false,
        "decodeEntities": false,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": false,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 810,
        "y": 760,
        "wires": [
            [
                "6c8b23d7.d2fc2c"
            ]
        ]
    },
    {
        "id": "bef9a206.5f78e",
        "type": "http request",
        "z": "d04ea5a4.8bc1e8",
        "name": "Get RSS Feed",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 640,
        "y": 760,
        "wires": [
            [
                "df5b5289.45357"
            ]
        ]
    },
    {
        "id": "9bf0f211.76a0d",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "The WebPage",
        "info": "",
        "x": 1210,
        "y": 740,
        "wires": []
    },
    {
        "id": "8aeb0436.4f5c58",
        "type": "debug",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1710,
        "y": 1100,
        "wires": []
    },
    {
        "id": "2bd853c.c78e0ac",
        "type": "inject",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1240,
        "y": 1120,
        "wires": [
            [
                "73f5bbe9.d4e914"
            ]
        ]
    },
    {
        "id": "73f5bbe9.d4e914",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "func": "msg.getFeed= \"https://www.google.com/alerts/feeds/00647955663943906813/13772849398684667035\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1370,
        "y": 1120,
        "wires": [
            [
                "b27bb19a.65e0c"
            ]
        ]
    },
    {
        "id": "b27bb19a.65e0c",
        "type": "feedparse2",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "url": "",
        "x": 1510,
        "y": 1120,
        "wires": [
            [
                "8aeb0436.4f5c58"
            ]
        ]
    },
    {
        "id": "4cc5a153.ff7e3",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "Error: socket hang up",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 2110,
        "y": 1780,
        "wires": [
            [],
            [
                "ef59c49d.1a7e58"
            ]
        ]
    },
    {
        "id": "cea957a1.49a488",
        "type": "twilio out",
        "z": "d04ea5a4.8bc1e8",
        "twilio": "a3cb5458.4c20e8",
        "twilioType": "sms",
        "url": "",
        "number": "",
        "name": "",
        "x": 4470,
        "y": 2100,
        "wires": []
    },
    {
        "id": "85fcd010.04916",
        "type": "mongodb in",
        "z": "d04ea5a4.8bc1e8",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "",
        "operation": "find",
        "x": 2820,
        "y": 1780,
        "wires": [
            [
                "dbe534ae.9cf138"
            ]
        ]
    },
    {
        "id": "dbe534ae.9cf138",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "func": "if(msg.payload.length > 0){\n    return [msg,null];\n}else\n{\n    return [null, msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 3070,
        "y": 1780,
        "wires": [
            [],
            [
                "16b4caf0.0df575",
                "8893efc4.c3532"
            ]
        ]
    },
    {
        "id": "c723627a.8235",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "Check if Exists",
        "info": "",
        "x": 3140,
        "y": 1740,
        "wires": []
    },
    {
        "id": "7851c77c.3d0d98",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "FIX FOR DUPLICATE NOTIFICATIONS",
        "info": "",
        "x": 2810,
        "y": 1700,
        "wires": []
    },
    {
        "id": "a4aeed00.6583f",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "BETA TESTING PATH FOR PER USER / PER KEYWORD ALERTS",
        "info": "",
        "x": 3710,
        "y": 2040,
        "wires": []
    },
    {
        "id": "16b4caf0.0df575",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Prep Check and Query user settings to get phone and email",
        "func": "msg.payload = {\"userid\": msg.userid };\nmsg.collection = \"user_settings\";\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 3740,
        "y": 2080,
        "wires": [
            [
                "89c048cc.9e47b8"
            ]
        ]
    },
    {
        "id": "89c048cc.9e47b8",
        "type": "mongodb in",
        "z": "d04ea5a4.8bc1e8",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "user_settings",
        "operation": "find",
        "x": 3920,
        "y": 2120,
        "wires": [
            [
                "d51dba42.37ccc8"
            ]
        ]
    },
    {
        "id": "d51dba42.37ccc8",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "tac user-prefs to msg obj",
        "func": "msg.topic = msg.payload[0].phone;\nmsg.email_out = msg.payload[0].email;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 4010,
        "y": 2160,
        "wires": [
            [
                "f10aea7a.8adb18",
                "49f9ded8.78481"
            ]
        ]
    },
    {
        "id": "3b956d54.1b3272",
        "type": "handlebars",
        "z": "e521bf7.1bc084",
        "name": "",
        "sourceProperty": "payload",
        "targetProperty": "msg.payload",
        "query": "<head>\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\n</head>\n\n\n<div class=\"container\">\nMy Subscriptions.. \n\n\n{{#each this}}\n\n<div class=\"row\" style=\"border-style:solid;border-width:1px;border-color:blue; background-color:lightgrey; padding:5px;\">\n    <!--<div>id: {{_id}} - {{project_id}}</div>-->\n    <!--<div>{{tier}}</div>-->\n    <div class=\"col\">\n    Keywords assigned: \n    <br>\n    <b>\n    {{#each kwset}}\n        \n          \n        <div class=\"\" style=\"background-color:lightblue; margin:3px;\">\n            <div class=\"\" style=\"width:auto;\">\n                {{keyword}}\n            </div>\n            <div class=\"\" style=\"\">\n                <div class=\"onoffswitch\" style=\"display:inline-block;\">\n                    {{#if sms}}\n                        <input type=\"checkbox\" name=\"{{../_id}}_{{_id}}_sms\" class=\"onoffswitch-checkbox\" id=\"{{../_id}}_{{_id}}_sms\" checked>\n                    {{else}}\n                        <input type=\"checkbox\" name=\"{{../_id}}_{{_id}}_sms\" class=\"onoffswitch-checkbox\" id=\"{{../_id}}_{{_id}}_sms\" >\n                    {{/if}}\n                        <label class=\"onoffswitch-label\" for=\"myonoffswitch\">SMS</label>\n                </div>\n                <div class=\"onoffswitch\" style=\"display:inline-block;\">\n                    {{#if email}}\n                        <input type=\"checkbox\" name=\"{{../_id}}_{{_id}}_email\" class=\"onoffswitch-checkbox\" id=\"{{../_id}}_{{_id}}_email\" checked>\n                   {{else}}\n                        <input type=\"checkbox\" name=\"{{../_id}}_{{_id}}_email\" class=\"onoffswitch-checkbox\" id=\"{{../_id}}_{{_id}}_email\">\n                   {{/if}}\n                        <label class=\"onoffswitch-label\" for=\"myonoffswitch\">Email</label>\n        \n                </div>\n            </div>\n        </div> \n        \n        <script>\n        \n        \n        document.getElementById('{{../_id}}_{{_id}}_sms').addEventListener('change',  function(){\n           //alert(\"{{../_id}}_{{_id}}_sms\");\n            \n            const data = { \n                \"sub_id\" : \"{{../_id}}\",\n                \"index\" : \"{{_id}}\",\n                \"payload\" : \"{{../_id}}_{{_id}}_sms\",\n                \"sms\" : document.getElementById('{{../_id}}_{{_id}}_sms').checked,\n            };\n\n            fetch('https://radarblip.io:18800/setKW', {\n            method: 'POST', // or 'PUT'\n            headers: {\n                 'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                alert(data);\n                console.log('Success:', data);\n            })\n            .catch((error) => {\n                 console.error('Error:', error);\n            }); \n            \n        });\n         \n         document.getElementById('{{../_id}}_{{_id}}_email').addEventListener('change',  function(){\n           //alert(\"{{../_id}}_{{_id}}_sms\");\n            \n            const data = { \n                \"sub_id\" : \"{{../_id}}\",\n                \"index\" : \"{{_id}}\",\n                \"payload\" : \"{{../_id}}_{{_id}}_sms\",\n                \"email\": document.getElementById('{{../_id}}_{{_id}}_email').checked\n            };\n\n            fetch('https://radarblip.io:18800/setKW', {\n            method: 'POST', // or 'PUT'\n            headers: {\n                 'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                alert(data);\n                console.log('Success:', data);\n            })\n            .catch((error) => {\n                 console.error('Error:', error);\n            }); \n            \n        });\n        \n        \n\n\n        </script>\n        \n        \n    {{/each}}\n    </b>\n    </div>\n    <div> email: {{email}}</div>\n\n    <div>Start date: {{start_date}}</div>\n    <div>Expires: {{expires}}</div>\n    <br>\n\n    <div>{{#if active}}Active{{/if}}</div>\n\n</div>\n\n{{/each}}\n\n<center><a href=\"https://radar-blip.com/my-blips?userid={{userid}}\">GO BACK</a></center>\n</div>\n\n",
        "x": 1010,
        "y": 940,
        "wires": [
            [
                "33b916fa.95107a"
            ]
        ]
    },
    {
        "id": "a06df93f.6df888",
        "type": "debug",
        "z": "e521bf7.1bc084",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1010,
        "y": 900,
        "wires": []
    },
    {
        "id": "c06d87a.5cc6778",
        "type": "debug",
        "z": "dbfc8b70.04c788",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 800,
        "y": 380,
        "wires": []
    },
    {
        "id": "c8989b78.d58918",
        "type": "debug",
        "z": "dbfc8b70.04c788",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 2470,
        "y": 600,
        "wires": []
    },
    {
        "id": "75c0ae.f10d7f54",
        "type": "inject",
        "z": "dbfc8b70.04c788",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1620,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "b7742569.1fc3a8",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/setKW",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 1640,
        "wires": [
            [
                "8a0ffe7b.c4c03"
            ]
        ]
    },
    {
        "id": "c57ee6b7.68d6c8",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1210,
        "y": 1680,
        "wires": []
    },
    {
        "id": "11ec9cb5.3877d3",
        "type": "template",
        "z": "e521bf7.1bc084",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "ok",
        "output": "str",
        "x": 1000,
        "y": 1680,
        "wires": [
            [
                "c57ee6b7.68d6c8"
            ]
        ]
    },
    {
        "id": "73b6c6cc.2f0618",
        "type": "mongodb out",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "store",
        "x": 1100,
        "y": 1640,
        "wires": []
    },
    {
        "id": "d6cbc65.155f038",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "toggler",
        "func": "\nvar el = msg.payload[0];\nvar i = msg.params.index;\n\n\nif(typeof(msg.params.sms)=== \"undefined\" ){\n}else{\n   el.kwset[i].sms = msg.params.sms;\n}\n\n\nif(typeof(msg.params.email)=== \"undefined\" ){\n}else{\n   el.kwset[i].email = msg.params.email;\n}\n\n\nmsg.payload = el;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 740,
        "y": 1640,
        "wires": [
            [
                "11ec9cb5.3877d3",
                "73b6c6cc.2f0618"
            ]
        ]
    },
    {
        "id": "8de5532a.86575",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 660,
        "y": 1600,
        "wires": [
            [
                "d6cbc65.155f038"
            ]
        ]
    },
    {
        "id": "b7837660.ab2a18",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "",
        "func": "msg.params = msg.payload;\nmsg.payload = { \"_id\": msg.payload.sub_id   };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1640,
        "wires": [
            [
                "8de5532a.86575"
            ]
        ]
    },
    {
        "id": "8a0ffe7b.c4c03",
        "type": "objectid",
        "z": "e521bf7.1bc084",
        "name": "",
        "property": "payload.sub_id",
        "propertyType": "msg",
        "x": 370,
        "y": 1640,
        "wires": [
            [
                "b7837660.ab2a18"
            ]
        ]
    },
    {
        "id": "673a31bd.00bb1",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1170,
        "y": 1860,
        "wires": []
    },
    {
        "id": "8b7f63d6.8be41",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/my-prefs",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 2040,
        "wires": [
            [
                "e06f2f7.80b83d"
            ]
        ]
    },
    {
        "id": "e06f2f7.80b83d",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "sets the query for the user",
        "func": "//get the passed parameters into the payload\nmsg.userid = msg.payload.userid;\nmsg.params = msg.payload;\nmsg.payload = {  \"userid\": msg.payload.userid };\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 420,
        "y": 2040,
        "wires": [
            [
                "8b85c41e.6ca938"
            ]
        ]
    },
    {
        "id": "8b85c41e.6ca938",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "user_settings",
        "operation": "find",
        "x": 720,
        "y": 2040,
        "wires": [
            [
                "233d7f4c.bdf4f"
            ]
        ]
    },
    {
        "id": "eb4ae314.6e0fc",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1690,
        "y": 2080,
        "wires": []
    },
    {
        "id": "d85020da.e2639",
        "type": "handlebars",
        "z": "e521bf7.1bc084",
        "name": "",
        "sourceProperty": "msg.payload",
        "targetProperty": "msg.payload",
        "query": "<head>\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\n</head>\n\n\n<div class=\"container\">\n   \n<div class=\"row\" style=\"border-style:solid;border-width:1px;border-color:blue; background-color:lightgrey; padding:5px;\">\n         Enter your notification settings to allow notifications via SMS or Email.  Leave blank to omit notification.\n\n        <form action=\"https://radarblip.io:18800/setUserPrefs\" method=\"POST\">\n                <label class=\"\" for=\"phoneInput\">Phone # for SMS: </label>\n                <input id=\"phone\" name=\"phone\" autocomplete=\"off\" type=\"tel\" pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\" value=\"{{phone}}\">\n                <br>\n                <label class=\"\" for=\"email\">Email: </label>\n                <input type=\"email\" name=\"email\" class=\"\" id=\"email\" value=\"{{email}}\">\n            \n                <input type=\"hidden\" name=\"userid\" class=\"\" id=\"userid\" value={{userid}}>\n                \n                <button type=\"submit\" id=\"save\" onclick=\"function (){\n                       alert('test');\n                \n                }\">Save</button>\n    </form>\n    <a href = \"https://radarblip.io:18800/my-subs?userid={{userid}}\">Edit My Keyword Notifications</a>\n    </div>\n    \n</div>\n \n\n<script>\n    \nconst phoneInput = document.querySelector('#phone');\nconst phoneFormat = '({0}{1}{2}) {3}{4}{5}-{6}{7}{8}{9}';\n\nphoneInput.addEventListener('input', (event) => {\n  const inputStripped = phoneInput.value.replace(/\\D/g, '');\n  const inputIsValid = !isNaN(parseInt(event.data));\n\n  if (event.inputType.includes('deleteContent')) {\n \n    return;\n  }\n\n\n  if (event.inputType == 'insertText' && (inputStripped.length > 10 || !inputIsValid)) {\n    phoneInput.value = phoneInput.value.substring(0, phoneInput.value.length - 1);\n    return;\n  }\n\n  if (inputStripped)\n    phoneInput.value = formatPhoneInput(inputStripped);\n});\n\nconst formatPhoneInput = (inputNumber) => {\n  let inputNumArr = inputNumber.split('');\n  let formatVar = inputNumArr.length - 1;\n  \n  // indexOf() + 3, so we can replace the entire '{x}' variable in phoneFormat\n  let replaceIndex = phoneFormat.indexOf(`{${formatVar}}`) + 3;\n  \n  // Autocompletion to next input value\n  switch (formatVar) {\n    case 2:\n      replaceIndex += 2;\n      break;\n    case 5:\n      replaceIndex += 1;\n      break;\n    default:\n      break;\n  }\n  \n  // phoneFormat substring based on the current number length\n  let formattedInput = phoneFormat.substring(0, replaceIndex);\n\n  for (let i = 0; i < inputNumArr.length; i++) {\n    formattedInput = formattedInput.replace(`{${i}}`, inputNumArr[i]);\n  }\n\n  return formattedInput;\n}\n    \n</script>\n",
        "x": 1470,
        "y": 2100,
        "wires": [
            [
                "eb4ae314.6e0fc"
            ]
        ]
    },
    {
        "id": "244b539d.5f1f1c",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/setUserPrefs",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 150,
        "y": 1820,
        "wires": [
            [
                "7cfaf363.cbb42c",
                "338a015e.6425be"
            ]
        ]
    },
    {
        "id": "233d7f4c.bdf4f",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "Settings Exist or Not? 1 , 2 ",
        "func": "if(msg.payload.length >0){\nreturn [msg,null];\n}else{\n    return [null,msg];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 820,
        "y": 2080,
        "wires": [
            [
                "7ebbdab9.3e9274"
            ],
            [
                "fc489624.1fdda8"
            ]
        ]
    },
    {
        "id": "7ebbdab9.3e9274",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "",
        "func": "msg.payload = msg.payload[0];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1130,
        "y": 2060,
        "wires": [
            [
                "d85020da.e2639"
            ]
        ]
    },
    {
        "id": "7cfaf363.cbb42c",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "send res",
        "func": "msg.payload='<meta http-equiv=\"Refresh\" content=\"0; url=https://radar-blip.com/my-blips\" />';\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1020,
        "y": 1860,
        "wires": [
            [
                "673a31bd.00bb1"
            ]
        ]
    },
    {
        "id": "d24cd3f1.5502d",
        "type": "mongodb out",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "user_settings",
        "payonly": true,
        "upsert": true,
        "multi": false,
        "operation": "update",
        "x": 1120,
        "y": 1820,
        "wires": []
    },
    {
        "id": "338a015e.6425be",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "query just the userid",
        "func": "msg.query = {\"userid\" : msg.payload.userid  };\n\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 1820,
        "wires": [
            [
                "d24cd3f1.5502d"
            ]
        ]
    },
    {
        "id": "fc489624.1fdda8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "GENERATE SETTINGS",
        "func": "msg.payload = {\n    \n    \"userid\" : msg.userid,\n    \"email\" : \"\",\n    \"phone\" : \"\",\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1140,
        "y": 2120,
        "wires": [
            [
                "d85020da.e2639"
            ]
        ]
    },
    {
        "id": "d655c286.0219d",
        "type": "comment",
        "z": "d04ea5a4.8bc1e8",
        "name": "TEMP",
        "info": "",
        "x": 2750,
        "y": 1740,
        "wires": []
    },
    {
        "id": "94a715eb.8979a8",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "func": "//set mongo query to ask for a specific _id:\nmsg.collection = \"USER_FEEDS_\" + msg.userid;\n//msg._id = msg.article.title.replace(/[^a-zA-Z ]/g, \"\");\n\n\n\n\nmsg._id = msg.article.id.split(\"/feed:\")[1];\n\n\n\n\n// msg._id.replace(\":\",\"\");\n// msg._id.replace(\",\",\"\");\n// msg._id.replace(\"/\",\"\");\n// msg._id.replace(' ','');\n// msg._id.replace('.','');\n// msg._id.replace('$','');\n\n\n\nmsg.payload = {\"_id\" : msg._id };\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2530,
        "y": 1720,
        "wires": [
            [
                "85fcd010.04916"
            ]
        ]
    },
    {
        "id": "3d440286.dc365e",
        "type": "link out",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "links": [
            "6a08414b.7582b"
        ],
        "x": 1535,
        "y": 360,
        "wires": []
    },
    {
        "id": "8cb40052.98a3c",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "SUBSC PROC TRIGGER",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 1530,
        "y": 380,
        "wires": [
            [
                "3d440286.dc365e"
            ]
        ]
    },
    {
        "id": "71266db2.33c304",
        "type": "delay",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 550,
        "y": 840,
        "wires": [
            [
                "bef9a206.5f78e"
            ]
        ]
    },
    {
        "id": "f10aea7a.8adb18",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "is SMS on?",
        "property": "kwset.sms",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 4230,
        "y": 2140,
        "wires": [
            [
                "6bfc5333.35e1ec"
            ],
            []
        ]
    },
    {
        "id": "49f9ded8.78481",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "is Email On?",
        "property": "kwset.email",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 4230,
        "y": 2180,
        "wires": [
            [
                "e102f71.63be408"
            ],
            []
        ]
    },
    {
        "id": "6bfc5333.35e1ec",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Format for SMS",
        "func": "\n\n\n\nmsg.payload = \"RadarBlip: \\nKeyword: [\" + msg.kwset.keyword + \" x\" + msg.feedinfo.matched_keywords[0].counts + \"] \\nSource: \" + msg.shorturl + \"\\n\\n\" + msg.article.title.replace(\"<b>\",\"\").replace(\"</b>\",\"\").replace(\"&#39\", \"'\") + \"\\n\\nView Your Blips: \" + \"https://radar-blip.com/my-blips\";\n\nmsg.payload.replace(\"&#39;\",\"'\");\nmsg.payload.replace(\"&amp;\",\"&\");\nmsg.payload.replace(\"&#33;\",\"!\");\nmsg.payload.replace('&#34;','\"');\nmsg.payload.replace('&#35;','#');\nmsg.payload.replace('&#36;','$');\nmsg.payload.replace('&#37;','%');\nmsg.payload.replace('&#38;','&');\nmsg.payload.replace('&#39;','#');\nmsg.payload.replace('&#40;','(');\nmsg.payload.replace('&#41;',')');\nmsg.payload.replace('&#42;','*');\nmsg.payload.replace('&#43;','+');\nmsg.payload.replace('&#44;',',');\nmsg.payload.replace('&#45;','-');\nmsg.payload.replace('&#46;','.');\n\n\n\n\t\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 4320,
        "y": 2100,
        "wires": [
            [
                "cea957a1.49a488"
            ]
        ]
    },
    {
        "id": "999b3005.9f5b2",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 3710,
        "y": 1640,
        "wires": []
    },
    {
        "id": "15afea14.7220e6",
        "type": "template",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "Duplicate!",
        "output": "str",
        "x": 3340,
        "y": 1640,
        "wires": [
            [
                "e7bbec86.54327"
            ]
        ]
    },
    {
        "id": "9556bb99.b95f38",
        "type": "catch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 1480,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "99048f90.f96ac",
        "type": "https-node",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "url": "",
        "authorized": false,
        "agent": false,
        "x": 1910,
        "y": 1820,
        "wires": [
            [
                "4cc5a153.ff7e3"
            ]
        ]
    },
    {
        "id": "bc10f16c.f711b",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1430,
        "y": 2540,
        "wires": []
    },
    {
        "id": "c6ffdddd.40f1e",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/set_sub",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 140,
        "y": 2940,
        "wires": [
            [
                "bd8cd7f9.509868"
            ]
        ]
    },
    {
        "id": "91456cb9.d6e28",
        "type": "debug",
        "z": "dbfc8b70.04c788",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 970,
        "y": 80,
        "wires": []
    },
    {
        "id": "634c2ee5.e46e7",
        "type": "catch",
        "z": "dbfc8b70.04c788",
        "name": "",
        "scope": [
            "976c6e21.a5446"
        ],
        "uncaught": false,
        "x": 370,
        "y": 80,
        "wires": [
            [
                "91456cb9.d6e28"
            ]
        ]
    },
    {
        "id": "4871575f.6416d8",
        "type": "comment",
        "z": "dbfc8b70.04c788",
        "name": "CATCH : func:  \"attache msg.meta data\"",
        "info": "",
        "x": 450,
        "y": 40,
        "wires": []
    },
    {
        "id": "61e223d2.6c5f7c",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 780,
        "y": 2480,
        "wires": [
            [
                "25683d17.42b162",
                "256c3149.2ffa9e"
            ]
        ]
    },
    {
        "id": "a729959.67b5568",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/edit_subs",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 160,
        "y": 2420,
        "wires": [
            [
                "a42eff9f.d8b2b"
            ]
        ]
    },
    {
        "id": "a42eff9f.d8b2b",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "get all query",
        "func": "//get the passed parameters into the payload\nmsg.userid = msg.payload.userid;\nmsg.params = msg.payload;\nmsg.payload = {  };\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 2420,
        "wires": [
            [
                "61e223d2.6c5f7c"
            ]
        ]
    },
    {
        "id": "25683d17.42b162",
        "type": "handlebars",
        "z": "e521bf7.1bc084",
        "name": "",
        "sourceProperty": "payload",
        "targetProperty": "payload",
        "query": "\n<div id=\"debug\">\n    \n</div>\n\n{{#each this}}\n\n\n<div id=\"{{_id}}\" class=\"sub-block\" style=\"padding:3px;margin-bottom:10px; border-style:solid; border-width:1px; border-color:black;\">\n    \n    <form action=\"/set-sub\" method=\"post\">\n    id: {{_id}}<br><input id=\"_id\" name=\"_id\" value=\"{{_id}}\"><br>\n    userid: <input id=\"userid\" name=\"userid\" value=\"{{userid}}\"><br>\n    Started: {{start_date}}<input id=\"start_date\" name=\"start_date\" value=\"{{start_date}}\" type=\"hidden\">   <br>\n    Keywords: \n    {{#each kwset}}\n        _id:<input id=\"_id\" name=\"_id\" value=\"{{_id}}\">\n        feed:<input id = \"feed\" value=\"{{feed}}\">\n        feed:<input id = \"feed\" value=\"{{keyword}}\">\n        index:<input id= \"kwset_{{index}}\"  value={{index}}>\n        \n    {{/each}}\n    <br>\n    \n    Feeds:<br>\n    {{#each feeds}}\n        {{.}}<br>\n    {{/each}}\n    \n    </form>\n    \n<a href=\"/edit_sub?_id={{_id}}\">Edit Subcription</a>\n\n    \n    \n</div>\n\n\n{{/each}}\n\n\n",
        "x": 990,
        "y": 2360,
        "wires": [
            [
                "bc10f16c.f711b"
            ]
        ],
        "info": "`\n        <script>\n        document.getElementById('sub{{_id}}').addEventListener('click', function (cb){\n            \n            var rss = document.getElementById(\"rss{{_id}}\").value;\n            var theid = \"{{_id}}\";\n            \n            \n            var data = {\n                \"_id\" : theid,\n                \"rssfeed\" : rss\n            }\n        \n            \n            fetch(\"https://radarblip.io:18800/addfeed_url\", {\n                 method: 'post',\n                 body : JSON.stringify(data),\n                 method: 'POST', // *GET, POST, PUT, DELETE, etc.\n                 mode: 'cors', // no-cors, *cors, same-origin\n                 cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                 credentials: 'same-origin', // include, *same-origin, omit\n                 headers: {\n                    'Content-Type': 'application/json'\n                        // 'Content-Type': 'application/x-www-form-urlencoded',\n                }\n                //redirect: 'follow', // manual, *follow, error\n                //referrerPolicy: 'no-referrer', // no-referrer, *client\n            })\n            .then(){\n                alert(this.responseText);\n            });\n            \n        });\n        \n    \n        \n    \n        </script>\n\n        \n        `"
    },
    {
        "id": "256c3149.2ffa9e",
        "type": "debug",
        "z": "e521bf7.1bc084",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 980,
        "y": 2640,
        "wires": []
    },
    {
        "id": "79650e21.d070f",
        "type": "mongodb in",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "operation": "find",
        "x": 1020,
        "y": 2880,
        "wires": [
            [
                "33024986.1bb306",
                "9e51be15.f3d7c"
            ]
        ]
    },
    {
        "id": "563fc2c8.982d3c",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/edit_sub",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 2840,
        "wires": [
            [
                "a79aa911.d949e8",
                "bd8cd7f9.509868"
            ]
        ]
    },
    {
        "id": "a79aa911.d949e8",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "get all query",
        "func": "//get the passed parameters into the payload\nmsg.userid = msg.payload.userid;\nmsg.params = msg.payload;\nmsg.payload = {\"_id\": msg.payload._id  };\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 2840,
        "wires": [
            [
                "166b252c.29de8b"
            ]
        ]
    },
    {
        "id": "33024986.1bb306",
        "type": "handlebars",
        "z": "e521bf7.1bc084",
        "name": "",
        "sourceProperty": "payload",
        "targetProperty": "payload",
        "query": "<script\n  src=\"https://code.jquery.com/jquery-3.4.1.slim.min.js\"\n  integrity=\"sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=\"\n  crossorigin=\"anonymous\"></script>\n  \n  \n  \n<div id=\"debug\">\n    \n</div>\n\n{{#each this}}\n\n\n<div id=\"{{_id}}\" class=\"sub-block\" style=\"padding:3px;margin-bottom:10px; border-style:solid; border-width:1px; border-color:black;\">\n    \n    <form action=\"/set_sub\" method=\"post\">\n    Keyword Set: {{_id}}<br>\n    userid: {{userid}}<br>\n    Started: {{start_date}}<input id=\"start_date\" name=\"start_date\" value=\"{{start_date}}\" type=\"hidden\">   <br>\n    Keywords: <br>\n    \n    {{#each kwset}}\n        <input type=\"hidden\" name=\"kwset.keyword\" value=\"{{this.keyword}}\">\n        <div class=\"\" style=\"background-color:lightgrey; border-width:1px;border-color:lightblue;border-style:solid;\">\n        #:<input id=\"_id\" name=\"_id\" value=\"{{_id}}\"><br>\n        feed-{{_id}} :<input id = \"feed\" value=\"{{feed}}\"><br>\n        keyword-{{_id}} :<input id = \"feed_{{_id}}\" value=\"{{keyword}}\"><br>\n        index:<input id= \"kwset_{{_id}}\"  value={{_id}}><br>\n        </div>\n    {{/each}}\n    <br>\n   \n       \n        <button type=\"submit\">Save</button>\n    \n    </form>\n\n    <form action=\"/add_keyword\" method=\"post\">\n        Add a Keyword:\n        <input type=\"text\" name=\"keyword\" >\n        <input type=\"hidden\" name=\"userid\" value=\"{{userid}}\">\n        <button type=\"submit\">Add Keyword</button>\n        <input type=\"hidden\" name=\"_id\" value=\"{{this._id}}\">\n    </form>\n    \n    \n</div>\n\n\n{{/each}}\n\n\n<script>\n    \n    var jqxhr = $.post( \"https://radarblip.io:18800/testpost\", function() {\n         alert( \"success\" );\n    })\n  .done(function() {\n    alert( \"second success\" );\n  })\n  .fail(function() {\n    alert( \"error\" );\n  })\n  .always(function() {\n    alert( \"finished\" );\n  });\n \n// Perform other work here ...\n \n// Set another completion function for the request above\njqxhr.always(function() {\n  alert( \"second finished\" );\n});\n</script>\n\n\n\n\n",
        "x": 1050,
        "y": 2780,
        "wires": [
            [
                "bc10f16c.f711b"
            ]
        ],
        "info": "`\n        <script>\n        document.getElementById('sub{{_id}}').addEventListener('click', function (cb){\n            \n            var rss = document.getElementById(\"rss{{_id}}\").value;\n            var theid = \"{{_id}}\";\n            \n            \n            var data = {\n                \"_id\" : theid,\n                \"rssfeed\" : rss\n            }\n        \n            \n            fetch(\"https://radarblip.io:18800/addfeed_url\", {\n                 method: 'post',\n                 body : JSON.stringify(data),\n                 method: 'POST', // *GET, POST, PUT, DELETE, etc.\n                 mode: 'cors', // no-cors, *cors, same-origin\n                 cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                 credentials: 'same-origin', // include, *same-origin, omit\n                 headers: {\n                    'Content-Type': 'application/json'\n                        // 'Content-Type': 'application/x-www-form-urlencoded',\n                }\n                //redirect: 'follow', // manual, *follow, error\n                //referrerPolicy: 'no-referrer', // no-referrer, *client\n            })\n            .then(){\n                alert(this.responseText);\n            });\n            \n        });\n        \n    \n        \n    \n        </script>\n\n        \n        `"
    },
    {
        "id": "9e51be15.f3d7c",
        "type": "debug",
        "z": "e521bf7.1bc084",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1020,
        "y": 3060,
        "wires": []
    },
    {
        "id": "bd8cd7f9.509868",
        "type": "debug",
        "z": "e521bf7.1bc084",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 340,
        "y": 2940,
        "wires": []
    },
    {
        "id": "166b252c.29de8b",
        "type": "objectid",
        "z": "e521bf7.1bc084",
        "name": "",
        "property": "payload._id",
        "propertyType": "msg",
        "x": 650,
        "y": 2840,
        "wires": [
            [
                "79650e21.d070f"
            ]
        ]
    },
    {
        "id": "60b78c0e.9e4c34",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/testform",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 310,
        "y": 2620,
        "wires": [
            []
        ]
    },
    {
        "id": "610565a1.89fdcc",
        "type": "http response",
        "z": "e521bf7.1bc084",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 640,
        "y": 2620,
        "wires": []
    },
    {
        "id": "bbd67ad8.289048",
        "type": "http in",
        "z": "e521bf7.1bc084",
        "name": "",
        "url": "/add_keyword",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 3100,
        "wires": [
            [
                "8cc0467c.ba9168"
            ]
        ]
    },
    {
        "id": "9bdb9fa.ac6df6",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "GOOGLE ALERT RSS MAKER",
        "info": "We need to manually import google-alert-api module into\nnode-red via the ~/.node-red/settings.js file.\n\n",
        "x": 720,
        "y": 3140,
        "wires": []
    },
    {
        "id": "78a53b77.443ab4",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "FEED THIS A KEYWORD via msg.payload",
        "info": "Feed this a string value keyword via msg.payload\n, it will call a custom made node that creates\nan RSS feed.\n\nIf keyword exists, it will return the existing \nRSS feed url.",
        "x": 720,
        "y": 3180,
        "wires": []
    },
    {
        "id": "8cc0467c.ba9168",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "get Keword Parameter",
        "func": "\nmsg.payload = msg.payload.keyword;\nmsg.keyword = msg.payload.keyword;\nmsg.query._id = msg.payload._id;\nmsg.payload = \"'\" + msg.payload + \"'\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 500,
        "y": 3100,
        "wires": [
            [
                "ca468cba.a24a8"
            ]
        ]
    },
    {
        "id": "1ad1f558.c4a79b",
        "type": "mongodb out",
        "z": "e521bf7.1bc084",
        "mongodb": "8f55ecde.6f0a8",
        "name": "",
        "collection": "subscriptions",
        "payonly": false,
        "upsert": false,
        "multi": false,
        "operation": "update",
        "x": 1480,
        "y": 3140,
        "wires": []
    },
    {
        "id": "ca468cba.a24a8",
        "type": "exec",
        "z": "e521bf7.1bc084",
        "command": "node /home/ubuntu/ga-gen/rss ",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "FEED MEE SEED-MORE!",
        "x": 730,
        "y": 3220,
        "wires": [
            [
                "5ba4f9ce.044348",
                "9e51be15.f3d7c"
            ],
            [],
            []
        ]
    },
    {
        "id": "cbe8c900.0ef388",
        "type": "function",
        "z": "e521bf7.1bc084",
        "name": "",
        "func": "msg.feed = msg.payload;\n\nmsg.payload = { $push: { \"kwset\": {\"keyword\":msg.keyword, \"feed\": msg.feed }, \"keywords\": msg.keyword } , \"feeds\": msg.feed}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1010,
        "y": 3280,
        "wires": [
            [
                "1ad1f558.c4a79b",
                "a79aa911.d949e8"
            ]
        ]
    },
    {
        "id": "5ba4f9ce.044348",
        "type": "switch",
        "z": "e521bf7.1bc084",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "empty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 870,
        "y": 3300,
        "wires": [
            [
                "cbe8c900.0ef388"
            ],
            []
        ]
    },
    {
        "id": "610bc371.e815ec",
        "type": "comment",
        "z": "e521bf7.1bc084",
        "name": "Future Functions",
        "info": "",
        "x": 140,
        "y": 2800,
        "wires": []
    },
    {
        "id": "e7bbec86.54327",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "property": "original.userid",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "admin",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3490,
        "y": 1600,
        "wires": [
            [
                "999b3005.9f5b2"
            ]
        ]
    },
    {
        "id": "79658a45.b4bbf4",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 2360,
        "y": 1460,
        "wires": []
    },
    {
        "id": "7e98a40a.1690dc",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "func": "msg.payload=\"ERR Socket Disconnect\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 2230,
        "y": 1620,
        "wires": [
            [
                "79658a45.b4bbf4"
            ]
        ]
    },
    {
        "id": "ef366912.c28cc8",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1930,
        "y": 2040,
        "wires": []
    },
    {
        "id": "72b193e.270946c",
        "type": "template",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "THIS IS REJECTED!",
        "output": "str",
        "x": 1780,
        "y": 2040,
        "wires": [
            [
                "ef366912.c28cc8"
            ]
        ]
    },
    {
        "id": "fd611d03.a3248",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "for labelling",
        "func": "msg.sourcey = \"prweb\";\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 1860,
        "wires": [
            [
                "91b00d7d.9ee86"
            ]
        ]
    },
    {
        "id": "7f759bf3.8f15d4",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "rss > channel > title",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 350,
        "y": 1500,
        "wires": [
            [
                "da414ab0.d0d958"
            ]
        ]
    },
    {
        "id": "da414ab0.d0d958",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "msg.channel - feed channel",
        "func": "msg.channeltitle = msg.payload;\nmsg.payload = msg.original;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 1500,
        "wires": [
            [
                "dffaf2cf.11006"
            ]
        ]
    },
    {
        "id": "62c39990.8b7128",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "preserve original to pick at later",
        "func": "msg.response = msg.payload;\n\nmsg.url =msg.topic;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 310,
        "y": 1420,
        "wires": [
            [
                "1b5c765c.af1cfa"
            ]
        ]
    },
    {
        "id": "dffaf2cf.11006",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "channel > link",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 360,
        "y": 1540,
        "wires": [
            [
                "cfd7f6e6.0dae18"
            ]
        ]
    },
    {
        "id": "cfd7f6e6.0dae18",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "msg.channellink  channel > link ",
        "func": "msg.channellink = msg.payload;\nmsg.payload = msg.original;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1540,
        "wires": [
            [
                "e17d8fe2.bf8a4"
            ]
        ]
    },
    {
        "id": "e17d8fe2.bf8a4",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "channel > description",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 400,
        "y": 1580,
        "wires": [
            [
                "d6bc85f0.571aa8"
            ]
        ]
    },
    {
        "id": "d6bc85f0.571aa8",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "func": "msg.channeldescription = msg.payload;\nmsg.payload = msg.original;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 1580,
        "wires": [
            [
                "451758e6.677ae8"
            ]
        ]
    },
    {
        "id": "451758e6.677ae8",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "channel > image > url ",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 420,
        "y": 1620,
        "wires": [
            [
                "8b62937.32c597"
            ]
        ]
    },
    {
        "id": "8b62937.32c597",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "func": "msg.channelimageurl = msg.payload;\nmsg.payload = msg.original;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1620,
        "wires": [
            [
                "1eef66a7.7d73d9"
            ]
        ]
    },
    {
        "id": "1eef66a7.7d73d9",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "rss > channel > item",
        "ret": "html",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 440,
        "y": 1660,
        "wires": [
            [
                "a7095ceb.d33e4"
            ]
        ]
    },
    {
        "id": "76604ac0.fbbca4",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "article.title",
        "func": "msg.article = {}; //init article\nmsg.article.title = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 1700,
        "wires": [
            [
                "b257d311.033aa"
            ]
        ]
    },
    {
        "id": "ab9be186.7e579",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "title",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 410,
        "y": 1700,
        "wires": [
            [
                "76604ac0.fbbca4"
            ]
        ]
    },
    {
        "id": "c642ea37.ac1c58",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "init article",
        "info": "",
        "x": 860,
        "y": 1760,
        "wires": []
    },
    {
        "id": "fc4fed23.3150a",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "article.description",
        "func": " //init article\nmsg.article.description = msg.payload;\nmsg.payload = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 630,
        "y": 1740,
        "wires": [
            [
                "73794ee2.abf79"
            ]
        ]
    },
    {
        "id": "b257d311.033aa",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "description",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 450,
        "y": 1740,
        "wires": [
            [
                "fc4fed23.3150a"
            ]
        ]
    },
    {
        "id": "2fbc7ec4.191322",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "orig item preserve",
        "func": "msg.originalitem = msg.payload;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 810,
        "y": 1660,
        "wires": [
            [
                "ab9be186.7e579"
            ]
        ]
    },
    {
        "id": "2dca8961.150a06",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "article.link",
        "func": " //init article\nmsg.article.link = msg.payload;\nmsg.payload = msg.originalitem;\nmsg.original = msg.originalitem;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 1780,
        "wires": [
            [
                "6c2c4dff.d2d214"
            ]
        ]
    },
    {
        "id": "73794ee2.abf79",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "link",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 450,
        "y": 1780,
        "wires": [
            [
                "2dca8961.150a06"
            ]
        ]
    },
    {
        "id": "2385a2fb.490ece",
        "type": "http request",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": false,
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 790,
        "y": 1860,
        "wires": [
            [
                "43041b3e.fabe04"
            ]
        ]
    },
    {
        "id": "b036d9c1.e40478",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "check the link provided",
        "info": "",
        "x": 280,
        "y": 1820,
        "wires": []
    },
    {
        "id": "6c2c4dff.d2d214",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "check if article link exists...",
        "func": "if(typeof(msg.article.link)!== undefined ){\n    msg.url = msg.article.link;\n   return [ msg,null]; \n}else {\n    return [null,msg];\n}\n",
        "outputs": 2,
        "noerr": 0,
        "x": 540,
        "y": 1820,
        "wires": [
            [
                "2385a2fb.490ece"
            ],
            [
                "2385a2fb.490ece"
            ]
        ]
    },
    {
        "id": "43041b3e.fabe04",
        "type": "function",
        "z": "e5b2e67a.fda9d8",
        "name": "strip the html of all urls",
        "func": "msg.checkjson = msg.payload.replace(/(?:https?|ftp):\\/\\/[\\n\\S]+/g, '');\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 980,
        "y": 1860,
        "wires": [
            [
                "fd611d03.a3248"
            ]
        ]
    },
    {
        "id": "91b00d7d.9ee86",
        "type": "link out",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "links": [
            "fb2c4f36.601a9"
        ],
        "x": 1315,
        "y": 1860,
        "wires": []
    },
    {
        "id": "a7095ceb.d33e4",
        "type": "delay",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "3",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 630,
        "y": 1660,
        "wires": [
            [
                "2fbc7ec4.191322"
            ]
        ]
    },
    {
        "id": "1b5c765c.af1cfa",
        "type": "switch",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "property": "response",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "<entry>",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 530,
        "y": 1420,
        "wires": [
            [
                "bb4b420e.8121e"
            ],
            [
                "7f759bf3.8f15d4"
            ]
        ]
    },
    {
        "id": "bb4b420e.8121e",
        "type": "cheerio",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "tag": "entry",
        "ret": "html",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 690,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "bf631a3f.299978",
        "type": "comment",
        "z": "e5b2e67a.fda9d8",
        "name": "Non Google Alerts Path (URL)",
        "info": "",
        "x": 300,
        "y": 1460,
        "wires": []
    },
    {
        "id": "a833b358.8f9ef",
        "type": "link in",
        "z": "e5b2e67a.fda9d8",
        "name": "",
        "links": [
            "be4e05d3.d5b088",
            "a599238a.07a4f",
            "47cb161c.6616e8"
        ],
        "x": 155,
        "y": 1420,
        "wires": [
            [
                "62c39990.8b7128"
            ]
        ]
    },
    {
        "id": "1c154ade.9cc745",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 2190,
        "y": 1540,
        "wires": []
    },
    {
        "id": "eed596d.829f268",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "property": "kwset.keyword",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "herjavec group",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2010,
        "y": 1540,
        "wires": [
            [
                "1c154ade.9cc745"
            ]
        ]
    },
    {
        "id": "882cd8ed.0c67a8",
        "type": "debug",
        "z": "dbfc8b70.04c788",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 840,
        "y": 580,
        "wires": []
    },
    {
        "id": "55e4293.df706d8",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 2810,
        "y": 1540,
        "wires": []
    },
    {
        "id": "1d50e958.40cf57",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "property": "kwset.keyword",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "optiv",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2670,
        "y": 1540,
        "wires": [
            [
                "55e4293.df706d8"
            ]
        ]
    },
    {
        "id": "6454c260.5fd70c",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 2210,
        "y": 600,
        "wires": []
    },
    {
        "id": "6194103e.3a0c",
        "type": "switch",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "property": "kwset.keyword",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "optiv",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2070,
        "y": 600,
        "wires": [
            [
                "6454c260.5fd70c"
            ]
        ]
    },
    {
        "id": "ac55ec13.75ecc",
        "type": "inject",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 920,
        "y": 1200,
        "wires": [
            [
                "b11a68fb.cbc508"
            ]
        ]
    },
    {
        "id": "b11a68fb.cbc508",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "func": "msg.payload = '<id>tag:google.com,2013:googlealerts/feed:15440434515387234944</id> <title type=\"html\">Information Security Consulting Market 2020: Enhanced Growth, Recent Trends and Major ...</title> <link href=\"https://www.google.com/url?rct=j&sa=t&url=https://publicist360.com/2020/04/15/information-security-consulting-market-2020-enhanced-growth-recent-trends-and-major-companies-are-ibm-corporation-accenture-atos-se-deloitte-touche-tohmatsu-limited-kpmg-international-cooperati/&ct=ga&cd=CAIyGmQ3MmRiZjlhZGMwNmIwNGE6Y29tOmVuOlVT&usg=AFQjCNGPfPkcfxUQ26rf9UqXJG8Q8QWeUQ\"> <published>2020-04-09T18:22:30Z</published> <updated>2020-04-09T18:22:30Z</updated> <content type=\"html\">... BAE Systems, Hewlett Packard Enterprise Development LP, Wipro Limited, SearchInform LTD, Dell Inc., Booz Allen Hamilton Inc., <b>Optiv</b> Security Inc.</content> <author> <name></name> </author>';\nmsg.originalPayload= msg.payload;\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1090,
        "y": 1180,
        "wires": [
            [
                "35063582.4032fa"
            ]
        ]
    },
    {
        "id": "4fd88cd.3a21474",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1760,
        "y": 600,
        "wires": []
    },
    {
        "id": "50d92085.c3f95",
        "type": "feedparse",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "url": "",
        "interval": 15,
        "x": 1410,
        "y": 560,
        "wires": [
            [
                "4fd88cd.3a21474"
            ]
        ]
    },
    {
        "id": "e1d7a0cc.94515",
        "type": "function",
        "z": "d04ea5a4.8bc1e8",
        "name": "Get <link> URL ***",
        "func": "//msg.payload =  msg.payload.substring( msg.payload.indexOf('<link href=\"'), msg.payload.indexOf('\"/>'));\nmsg.payload =  msg.payload.substring( msg.payload.indexOf('<link href=\"'), msg.payload.length);\nmsg.substringLink = msg.payload;\n\nmsg.payload = msg.payload.substring(msg.payload.indexOf('url=') +  4, msg.payload.length );\nmsg.substringParse1 = msg.payload;\n\nmsg.payload = msg.payload.substring(0, msg.payload.indexOf('&amp'));\nmsg.substringParse2 = msg.payload;\n\n\n//msg.sourceurl = msg.payload\n//msg.article.link = msg.sourceurl;\nmsg.payload = msg.originalitem;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1210,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "b995330d.7c68",
        "type": "debug",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1490,
        "y": 1200,
        "wires": []
    },
    {
        "id": "35063582.4032fa",
        "type": "cheerio",
        "z": "d04ea5a4.8bc1e8",
        "name": "",
        "tag": "link href",
        "ret": "text",
        "as": "multi",
        "map": [],
        "xmlMode": true,
        "decodeEntities": true,
        "lowerCaseTags": true,
        "lowerCaseAttributeNames": true,
        "recognizeCDATA": true,
        "recognizeSelfClosing": false,
        "x": 1260,
        "y": 1140,
        "wires": [
            [
                "b995330d.7c68"
            ]
        ]
    }
]